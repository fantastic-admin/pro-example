
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as pe,K as me,g as d,Z as fe,a7 as I,af as ce,bW as V,b6 as G,a4 as s,ck as ge,c as _e,o as C,k as t,aa as ve,m as a,w as Ce,a as o,aP as be,G as i,P as Ee,p as ke,N as y,O as $,n as T,a9 as ye,b9 as De,V as he,W as N}from"./index-Bnionyve.js";import{_ as ze}from"./index.vue_vue_type_script_setup_true_lang-DwNki4sp.js";import{a as K}from"./department-Bc3_Lksl.js";import{u as we}from"./index-CAH_iDR3.js";import{_ as R}from"./index.vue_vue_type_script_setup_true_lang-DCqhLxNQ.js";import{u as xe}from"./usePagination-BqwTFOKk.js";const H=pe({name:"PagesExampleDepartmentList",__name:"list",setup($e){const D=me(),{pagination:f,getParams:J,onSizeChange:U,onCurrentChange:W,onSortChange:j}=xe(),h=d(!1),c=d("router"),b=d({id:""}),P={title:""},g=d({...P});function A(){Object.assign(g.value,P)}const p=d({enable:!0,selectionDataList:[]}),z=d(!1),B=d([]);fe(()=>{r(),c.value==="router"&&I.on("get-data-list",()=>{r()})}),ce(()=>{c.value==="router"&&I.off("get-data-list")});function r(){z.value=!0;const n={...J(),...g.value.title&&{title:g.value.title}};K.list(n).then(e=>{z.value=!1,B.value=e.data.list,f.value.total=e.data.total})}function Z(n){U(n).then(()=>r())}function _(n=1){W(n).then(()=>r())}function q({prop:n,order:e}){j(n,e).then(()=>r())}const E=d(),{open:F,update:O}=V().create({destroyOnClose:!0,closeOnClickOverlay:!1,closeOnPressEscape:!1,beforeClose:(n,e)=>{var m;n==="confirm"?(m=E.value)==null||m.submit().then(()=>{r(),e()}):e()},content:()=>G(R,{ref:E,id:b.value.id})}),{open:L,update:S}=we().create({destroyOnClose:!0,closeOnClickOverlay:!1,closeOnPressEscape:!1,beforeClose:(n,e)=>{var m;n==="confirm"?(m=E.value)==null||m.submit().then(()=>{r(),e()}):e()},content:()=>G(R,{ref:E,id:b.value.id})});function Q(){c.value==="router"?D.push({name:"pagesExampleGeneralDepartmentCreate"}):(b.value.id="",c.value==="modal"?(O({title:"新增"}),F()):(S({title:"新增"}),L()))}function X(n){c.value==="router"?D.push({name:"pagesExampleGeneralDepartmentEdit",params:{id:n.id}}):(b.value.id=n.id,c.value==="modal"?(O({title:"编辑"}),F()):(S({title:"编辑"}),L()))}function Y(n){V().confirm({title:"确认信息",content:"确认删除「".concat(n.title,"」吗？"),onConfirm:()=>{K.delete(n.id).then(()=>{r(),De.success("模拟删除成功")})}})}function ee(n){D.push({name:"pagesExampleGeneralJobList",params:{department_id:n.id}})}return(n,e)=>{const m=ve,te=s("ElInput"),M=s("ElFormItem"),l=s("ElButton"),w=Ee,ae=s("ElForm"),ne=ze,oe=s("ElDivider"),le=s("ElButtonGroup"),se=s("ElSpace"),x=s("ElTableColumn"),ie=s("ElTable"),re=s("ElPagination"),ue=ye,de=ge("loading");return C(),_e("div",{class:T({"absolute-container":o(h)})},[t(m,{title:"部门管理",description:"页面数据为 Mock 示例数据，非真实数据。",class:"mb-0"}),t(ue,{class:T({"flex-1 overflow-auto":o(h)}),"main-class":{"flex-1 flex flex-col overflow-auto":o(h)}},{default:a(()=>[t(ne,{"show-toggle":!1},{default:a(({fold:u,toggle:k})=>[t(ae,{model:o(g),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[t(M,{label:"部门"},{default:a(()=>[t(te,{modelValue:o(g).title,"onUpdate:modelValue":e[0]||(e[0]=v=>o(g).title=v),placeholder:"请输入部门，支持模糊查询",clearable:"",onKeydown:e[1]||(e[1]=be(v=>_(),["enter"])),onClear:e[2]||(e[2]=v=>_())},null,8,["modelValue"])]),_:1}),t(M,null,{default:a(()=>[t(l,{onClick:e[3]||(e[3]=v=>{A(),_()})},{default:a(()=>[...e[6]||(e[6]=[i(" 重置 ",-1)])]),_:1}),t(l,{type:"primary",onClick:e[4]||(e[4]=v=>_())},{icon:a(()=>[t(w,{name:"i-ep:search"})]),default:a(()=>[e[7]||(e[7]=i(" 筛选 ",-1))]),_:1}),t(l,{link:"",disabled:"",onClick:k},{icon:a(()=>[t(w,{name:u?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[i(" "+ke(u?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(oe,{"border-style":"dashed"}),t(se,{wrap:""},{default:a(()=>[t(l,{type:"primary",size:"default",onClick:Q},{icon:a(()=>[t(w,{name:"i-ep:plus"})]),default:a(()=>[e[8]||(e[8]=i(" 新增部门 ",-1))]),_:1}),o(p).enable?(C(),y(l,{key:0,size:"default",disabled:!o(p).selectionDataList.length},{default:a(()=>[...e[9]||(e[9]=[i(" 单个批量操作按钮 ",-1)])]),_:1},8,["disabled"])):$("",!0),o(p).enable?(C(),y(le,{key:1},{default:a(()=>[t(l,{size:"default",disabled:!o(p).selectionDataList.length},{default:a(()=>[...e[10]||(e[10]=[i(" 批量操作按钮组1 ",-1)])]),_:1},8,["disabled"]),t(l,{size:"default",disabled:!o(p).selectionDataList.length},{default:a(()=>[...e[11]||(e[11]=[i(" 批量操作按钮组2 ",-1)])]),_:1},8,["disabled"])]),_:1})):$("",!0)]),_:1}),Ce((C(),y(ie,{class:"my-4",data:o(B),stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:q,onSelectionChange:e[5]||(e[5]=u=>o(p).selectionDataList=u)},{default:a(()=>[o(p).enable?(C(),y(x,{key:0,type:"selection",width:"40"})):$("",!0),t(x,{prop:"title",label:"部门"}),t(x,{label:"操作",width:"250",align:"center"},{default:a(u=>[t(l,{type:"info",size:"small",plain:"",onClick:k=>ee(u.row)},{default:a(()=>[...e[12]||(e[12]=[i(" 查看职位 ",-1)])]),_:1},8,["onClick"]),t(l,{type:"primary",size:"small",plain:"",onClick:k=>X(u.row)},{default:a(()=>[...e[13]||(e[13]=[i(" 编辑 ",-1)])]),_:1},8,["onClick"]),t(l,{type:"danger",size:"small",plain:"",onClick:k=>Y(u.row)},{default:a(()=>[...e[14]||(e[14]=[i(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[de,o(z)]]),t(re,{"current-page":o(f).page,total:o(f).total,"page-size":o(f).size,"page-sizes":o(f).sizes,layout:o(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Z,onCurrentChange:_},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["class","main-class"])],2)}}});typeof N=="function"&&N(H);const Me=he(H,[["__scopeId","data-v-1f1368cf"]]);export{Me as default};
