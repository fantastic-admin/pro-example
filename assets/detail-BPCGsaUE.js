
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{_ as Te}from"./index.vue_vue_type_script_setup_true_lang-Dkb_w7PN.js";import{_ as $e}from"./index.vue_vue_type_script_setup_true_lang-D2eXW8UX.js";import{_ as Be}from"./index-MXWOQYmf.js";import{d as Fe,J as Ne,K as Oe,g as V,ac as I,Z as se,ao as h,a4 as c,ck as Me,c as B,o as d,k as a,w as R,m as t,H as De,G as i,P as Le,a as n,aa as qe,N as p,O as f,l as m,co as ze,aF as P,R as W,S as H,p as F,aP as J,v as Z,x as N,b9 as U,V as Ke,W as me}from"./index-Bnionyve.js";import{S as je}from"./sortable.esm-BMgLh4Kk.js";import{a as Q}from"./menu-BAkdgYHt.js";import"./index-CJFXYYFb.js";import"./index.vue_vue_type_script_setup_true_lang-qwRnxT-f.js";import"./index.vue_vue_type_script_setup_true_lang-DvmhqQa1.js";const Ge={class:"absolute size-full flex flex-col"},Pe={class:"label-tip"},We={style:{display:"flex"}},He={class:"label-tip"},Je={class:"label-tip"},Ze={class:"index"},Qe={class:"flex-center gap-4"},fe=Fe({name:"PagesExampleMenuDetail",__name:"detail",setup(Xe){var de,ie;const O=Ne(),ce=Oe(),M=V(!1),X=I("formRef"),l=V({id:(de=O.params.id)!=null?de:"",parentId:(ie=O.query.parentId)!=null?ie:"",path:"",redirect:"",name:"",component:"",meta:{title:"",icon:"",activeIcon:"",defaultOpened:!1,alwaysOpened:!1,permanent:!1,auth:[],auths:[],menu:!0,breadcrumb:!0,activeMenu:"",cache:[],noCache:[],badge:"",badgeVariant:"default",newWindow:!1,link:"",iframe:"",copyright:!1}}),be=V({path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入显示名称",trigger:"blur"}]});se(()=>{l.value.id!==""&&ve()});function ve(){M.value=!0,Q.detail(l.value.id).then(u=>{M.value=!1,l.value.id=u.data.id,l.value.parentId=u.data.parentId,l.value.path=u.data.path,l.value.redirect=u.data.redirect,l.value.name=u.data.name,l.value.component=u.data.component,Object.assign(l.value.meta,u.data.meta)})}const g=V(""),D=V(!1),Y=I("inputAuthRef");function Ve(u){l.value.meta.auth.splice(l.value.meta.auth.indexOf(u),1)}function ge(){D.value=!0,h(()=>{var u,e;(e=(u=Y.value)==null?void 0:u.input)==null||e.focus()})}function ee(){g.value&&(l.value.meta.auth.includes(g.value)?U.warning("标识已存在"):l.value.meta.auth.push(g.value)),D.value=!1,g.value=""}const y=V(""),L=V(!1),le=I("inputCacheRef");function ye(u){typeof l.value.meta.cache=="object"&&l.value.meta.cache.splice(l.value.meta.cache.indexOf(u),1)}function xe(){L.value=!0,h(()=>{var u,e;(e=(u=le.value)==null?void 0:u.input)==null||e.focus()})}function te(){y.value&&typeof l.value.meta.cache=="object"&&(l.value.meta.cache.includes(y.value)?U.warning("规则已存在"):l.value.meta.cache.push(y.value)),L.value=!1,y.value=""}const x=V(""),q=V(!1),ae=I("inputNoCacheRef");function _e(u){l.value.meta.noCache.splice(l.value.meta.noCache.indexOf(u),1)}function Ce(){q.value=!0,h(()=>{var u,e;(e=(u=ae.value)==null?void 0:u.input)==null||e.focus()})}function ne(){x.value&&(l.value.meta.noCache.includes(x.value)?U.warning("规则已存在"):l.value.meta.noCache.push(x.value)),q.value=!1,x.value=""}const z=I("authsTableRef"),oe=V(0);se(()=>{ue()});function ke(){l.value.meta.auths.push({name:"",value:""}),h(()=>{var u;(u=z.value)==null||u.setScrollTop(l.value.meta.auths.length*50)})}function we(u){l.value.meta.auths.splice(u,1)}function ue(){var e;const u=(e=z.value)==null?void 0:e.$el.querySelector(".el-table__body-wrapper tbody");je.create(u,{handle:".sortable",animation:300,ghostClass:"ghost",onEnd:({newIndex:v,oldIndex:k})=>{if(v===void 0||k===void 0)return;const w=l.value.meta.auths.splice(k,1)[0];l.value.meta.auths.splice(v,0,w),oe.value+=1,h(()=>ue())}})}function Ee(){var u;(u=X.value)==null||u.validate(e=>{e&&(l.value.id===""?Q.create(l.value).then(()=>{U.success("模拟新增成功"),A()}):Q.edit(l.value).then(()=>{U.success("模拟编辑成功"),A()}))})}function A(){ce.close({name:"pagesExampleGeneralMenuList"})}return(u,e)=>{const v=Le,k=De,w=qe,b=c("ElInput"),r=c("ElFormItem"),s=c("ElCol"),S=c("ElLink"),pe=c("ElRow"),K=c("ElTooltip"),T=c("ElTag"),E=c("ElButton"),j=c("ElSpace"),re=Be,_=c("ElSwitch"),G=c("ElRadioButton"),Ie=c("ElRadioGroup"),$=c("ElTableColumn"),he=c("ElTable"),Re=$e,Ue=c("ElForm"),Ae=Te,Se=Me("loading");return d(),B("div",Ge,[a(w,{title:n(O).name==="pagesExampleGeneralMenuCreate"?"新增导航":"编辑导航",class:"mb-0"},{default:t(()=>[a(k,{variant:"outline",size:"sm",class:"rounded-full",onClick:A},{default:t(()=>[a(v,{name:"i-ep:arrow-left"}),e[25]||(e[25]=i(" 返回 ",-1))]),_:1})]),_:1},8,["title"]),R((d(),p(Ue,{ref_key:"formRef",ref:X,model:n(l),rules:n(be),"label-position":"top"},{default:t(()=>[a(Re,{"right-side-width":"500px","hide-right-side-toggle":"",class:"static","right-side-class":"flex flex-col"},{rightSide:t(()=>[a(w,{title:"权限池",class:"mb-0 border-b-none bg-border/50 -mx-15px -mt-15px"},{description:t(()=>[...e[51]||(e[51]=[m("p",null,"设置导航所具备的所有权限，权限池内的权限会用于角色管理",-1),m("p",null,"通常只在最子级导航上进行设置",-1)])]),_:1}),(d(),p(he,{ref_key:"authsTableRef",ref:z,key:n(oe),data:n(l).meta.auths,stripe:"","highlight-current-row":"",border:""},{default:t(()=>[a($,{width:"60",align:"center",fixed:""},{header:t(()=>[a(E,{type:"primary",size:"small",plain:"",circle:"",onClick:ke},{icon:t(()=>[a(v,{name:"i-ep:plus"})]),_:1})]),default:t(o=>[m("span",Ze,F(o.$index+1),1),a(E,{type:"danger",size:"small",plain:"",circle:"",class:"delete",onClick:C=>we(o.$index)},{icon:t(()=>[a(v,{name:"i-ep:delete"})]),_:1},8,["onClick"])]),_:1}),a($,{width:"80",align:"center",fixed:""},{header:t(()=>[...e[52]||(e[52]=[i(" 排序 ",-1)])]),default:t(()=>[a(T,{type:"info",class:"sortable"},{default:t(()=>[a(v,{name:"i-ep:d-caret"})]),_:1})]),_:1}),a($,{label:"名称"},{default:t(o=>[a(b,{modelValue:o.row.name,"onUpdate:modelValue":C=>o.row.name=C},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a($,{label:"标识"},{default:t(o=>[a(b,{modelValue:o.row.value,"onUpdate:modelValue":C=>o.row.value=C},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]))]),default:t(()=>[n(l).parentId?(d(),p(w,{key:0,title:"基础配置",description:"标准路由配置，包含 path/redirect/name/component",class:"mb-0 border-b-none bg-border/50 -mx-15px -mt-15px"})):f("",!0),n(l).parentId?(d(),p(pe,{key:1,gutter:30,style:{padding:"20px"}},{default:t(()=>[a(s,{xl:12,lg:24},{default:t(()=>[a(r,{label:"路由地址",prop:"path"},{default:t(()=>[a(b,{modelValue:n(l).path,"onUpdate:modelValue":e[0]||(e[0]=o=>n(l).path=o),clearable:"",placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{xl:12,lg:24},{default:t(()=>[a(r,{prop:"redirect"},{label:t(()=>[...e[26]||(e[26]=[i(" 重定向 ",-1),m("span",{class:"label-tip"},"父级路由通常无需设置，框架会自行处理",-1)])]),default:t(()=>[a(b,{modelValue:n(l).redirect,"onUpdate:modelValue":e[1]||(e[1]=o=>n(l).redirect=o),clearable:"",placeholder:"请输入重定向地址"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{xl:12,lg:24},{default:t(()=>[a(r,{prop:"name"},{label:t(()=>[...e[27]||(e[27]=[i(" 路由命名 ",-1),m("span",{class:"label-tip"},"即 name ，系统唯一",-1)])]),default:t(()=>[a(b,{modelValue:n(l).name,"onUpdate:modelValue":e[2]||(e[2]=o=>n(l).name=o),clearable:"",placeholder:"请输入路由命名"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{xl:12,lg:24},{default:t(()=>[a(r,{prop:"component"},{label:t(()=>[e[31]||(e[31]=i(" 组件路径 ",-1)),m("span",Pe,[e[29]||(e[29]=i(" 顶级路由请设置“",-1)),a(S,{type:"primary",underline:!1,onClick:e[3]||(e[3]=P(o=>n(l).component="Layout",["prevent"]))},{default:t(()=>[...e[28]||(e[28]=[i("Layout",-1)])]),_:1}),e[30]||(e[30]=i("”，中间层级路由无需设置 ",-1))])]),default:t(()=>[a(b,{modelValue:n(l).component,"onUpdate:modelValue":e[4]||(e[4]=o=>n(l).component=o),clearable:"",placeholder:"请输入完整组件路径"},ze({_:2},[n(l).component!=="Layout"?{name:"prepend",fn:t(()=>[e[32]||(e[32]=i(" /src/views/ ",-1))]),key:"0"}:void 0]),1032,["modelValue"])]),_:1})]),_:1})]),_:1})):f("",!0),a(w,{title:"扩展配置",class:"mb-0 border-b-none bg-border/50 -mx-15px -mt-15px"},{description:t(()=>[m("div",We,[e[34]||(e[34]=i(" 框架扩展配置，详细配置介绍请查看",-1)),a(S,{type:"primary",href:"https://fantastic-admin.hurui.me/guide/router.html#%E5%AF%BC%E8%88%AA%E9%85%8D%E7%BD%AE",target:"_blank"},{default:t(()=>[...e[33]||(e[33]=[i(" 框架文档 ",-1)])]),_:1})])]),_:1}),a(pe,{gutter:30,style:{padding:"20px"}},{default:t(()=>[a(s,{xl:12,lg:24},{default:t(()=>[a(r,{label:"显示名称",prop:"meta.title"},{default:t(()=>[a(b,{modelValue:n(l).meta.title,"onUpdate:modelValue":e[5]||(e[5]=o=>n(l).meta.title=o),clearable:"",placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.auth"},{label:t(()=>[e[35]||(e[35]=i(" 鉴权标识 ",-1)),a(K,{content:"当设置多个标识时，只要命中其中一个则鉴权通过",placement:"top"},{default:t(()=>[a(v,{name:"i-ri:question-line"})]),_:1})]),default:t(()=>[a(j,null,{default:t(()=>[(d(!0),B(W,null,H(n(l).meta.auth,o=>(d(),p(T,{key:o,size:"large",closable:"","disable-transitions":!1,onClose:C=>Ve(o)},{default:t(()=>[i(F(o),1)]),_:2},1032,["onClose"]))),128)),n(D)?(d(),p(b,{key:0,ref_key:"inputAuthRef",ref:Y,modelValue:n(g),"onUpdate:modelValue":e[6]||(e[6]=o=>Z(g)?g.value=o:null),style:{width:"200px"},onKeyup:J(ee,["enter"]),onBlur:ee},null,8,["modelValue"])):(d(),p(E,{key:1,onClick:ge},{default:t(()=>[...e[36]||(e[36]=[i(" 新增 ",-1)])]),_:1}))]),_:1})]),_:1})]),_:1}),a(s,{xl:12,lg:24},{default:t(()=>[a(r,{label:"默认图标",prop:"meta.icon"},{default:t(()=>[a(re,{modelValue:n(l).meta.icon,"onUpdate:modelValue":e[7]||(e[7]=o=>n(l).meta.icon=o)},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{xl:12,lg:24},{default:t(()=>[a(r,{label:"激活图标",prop:"meta.activeIcon"},{default:t(()=>[a(re,{modelValue:n(l).meta.activeIcon,"onUpdate:modelValue":e[8]||(e[8]=o=>n(l).meta.activeIcon=o)},null,8,["modelValue"])]),_:1})]),_:1}),n(l).parentId?(d(),p(s,{key:0,xl:12,lg:24},{default:t(()=>[a(r,{label:"默认展开",prop:"meta.defaultOpened"},{default:t(()=>[a(_,{modelValue:n(l).meta.defaultOpened,"onUpdate:modelValue":e[9]||(e[9]=o=>n(l).meta.defaultOpened=o),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:1,xl:12,lg:24},{default:t(()=>[a(r,{label:"始终展开",prop:"meta.alwaysOpened"},{default:t(()=>[a(_,{modelValue:n(l).meta.alwaysOpened,"onUpdate:modelValue":e[10]||(e[10]=o=>n(l).meta.alwaysOpened=o),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:2,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.permanent"},{label:t(()=>[...e[37]||(e[37]=[i(" 常驻标签页 ",-1),m("span",{class:"label-tip"},"请勿在带有参数的路由地址上开启该设置",-1)])]),default:t(()=>[a(_,{modelValue:n(l).meta.permanent,"onUpdate:modelValue":e[11]||(e[11]=o=>n(l).meta.permanent=o),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:3,xl:12,lg:24},{default:t(()=>[a(r,{label:"在导航显示",prop:"meta.menu"},{default:t(()=>[a(_,{modelValue:n(l).meta.menu,"onUpdate:modelValue":e[12]||(e[12]=o=>n(l).meta.menu=o),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:4,xl:12,lg:24},{default:t(()=>[a(r,{label:"在面包屑显示",prop:"meta.breadcrumb"},{default:t(()=>[a(_,{modelValue:n(l).meta.breadcrumb,"onUpdate:modelValue":e[13]||(e[13]=o=>n(l).meta.breadcrumb=o),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:5,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.cache"},{label:t(()=>[e[42]||(e[42]=i(" 缓存规则 ",-1)),a(K,{content:"当跳转到设置的路由时，则会对当前路由进行缓存",placement:"top"},{default:t(()=>[a(v,{name:"i-ri:question-line"})]),_:1}),R(m("span",He,[e[39]||(e[39]=i("切换为",-1)),a(S,{type:"primary",underline:!1,onClick:e[14]||(e[14]=P(o=>n(l).meta.cache=!0,["prevent"]))},{default:t(()=>[...e[38]||(e[38]=[i("始终缓存",-1)])]),_:1})],512),[[N,typeof n(l).meta.cache=="object"]]),R(m("span",Je,[e[41]||(e[41]=i("切换为",-1)),a(S,{type:"primary",underline:!1,onClick:e[15]||(e[15]=P(o=>n(l).meta.cache=[],["prevent"]))},{default:t(()=>[...e[40]||(e[40]=[i("规则模式",-1)])]),_:1})],512),[[N,typeof n(l).meta.cache=="boolean"]])]),default:t(()=>[R(a(j,null,{default:t(()=>[(d(!0),B(W,null,H(n(l).meta.cache,o=>(d(),p(T,{key:o,size:"large",closable:"","disable-transitions":!1,onClose:C=>ye(o)},{default:t(()=>[i(F(o),1)]),_:2},1032,["onClose"]))),128)),n(L)?(d(),p(b,{key:0,ref_key:"inputCacheRef",ref:le,modelValue:n(y),"onUpdate:modelValue":e[16]||(e[16]=o=>Z(y)?y.value=o:null),style:{width:"200px"},onKeyup:J(te,["enter"]),onBlur:te},null,8,["modelValue"])):(d(),p(E,{key:1,onClick:xe},{default:t(()=>[...e[43]||(e[43]=[i(" 新增 ",-1)])]),_:1}))]),_:1},512),[[N,typeof n(l).meta.cache=="object"]]),R(m("div",null," 始终缓存 ",512),[[N,typeof n(l).meta.cache=="boolean"]])]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:6,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.noCache"},{label:t(()=>[e[44]||(e[44]=i(" 不缓存规则 ",-1)),a(K,{content:"当跳转到设置的路由时，则会对当前路由取消缓存",placement:"top"},{default:t(()=>[a(v,{name:"i-ri:question-line"})]),_:1}),e[45]||(e[45]=m("span",{class:"label-tip"},"当缓存规则为“始终缓存”时生效",-1))]),default:t(()=>[a(j,null,{default:t(()=>[(d(!0),B(W,null,H(n(l).meta.noCache,o=>(d(),p(T,{key:o,size:"large",closable:"","disable-transitions":!1,onClose:C=>_e(o)},{default:t(()=>[i(F(o),1)]),_:2},1032,["onClose"]))),128)),n(q)?(d(),p(b,{key:0,ref_key:"inputNoCacheRef",ref:ae,modelValue:n(x),"onUpdate:modelValue":e[17]||(e[17]=o=>Z(x)?x.value=o:null),style:{width:"200px"},onKeyup:J(ne,["enter"]),onBlur:ne},null,8,["modelValue"])):(d(),p(E,{key:1,onClick:Ce},{default:t(()=>[...e[46]||(e[46]=[i(" 新增 ",-1)])]),_:1}))]),_:1})]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:7,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.activeMenu"},{label:t(()=>[...e[47]||(e[47]=[i(" 高亮导航 ",-1),m("span",{class:"label-tip"},"如果子路由不在导航显示，则需要设置高亮的上级路由地址",-1)])]),default:t(()=>[a(b,{modelValue:n(l).meta.activeMenu,"onUpdate:modelValue":e[18]||(e[18]=o=>n(l).meta.activeMenu=o),clearable:"",placeholder:"请输入高亮导航的完整路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:8,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.badge"},{label:t(()=>[...e[48]||(e[48]=[i(" 徽标 ",-1),m("span",{class:"label-tip"},"不宜设置太长，建议控制在4个字符内",-1)])]),default:t(()=>[a(b,{modelValue:n(l).meta.badge,"onUpdate:modelValue":e[19]||(e[19]=o=>n(l).meta.badge=o),clearable:"",placeholder:"请输入徽标显示内容"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:9,xl:12,lg:24},{default:t(()=>[a(r,{label:"徽标变体",prop:"meta.badgeVariant"},{default:t(()=>[a(Ie,{modelValue:n(l).meta.badgeVariant,"onUpdate:modelValue":e[20]||(e[20]=o=>n(l).meta.badgeVariant=o)},{default:t(()=>[a(G,{label:"默认",value:"default"}),a(G,{label:"次要",value:"secondary"}),a(G,{label:"破坏",value:"destructive"})]),_:1},8,["modelValue"])]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:10,xl:12,lg:24},{default:t(()=>[a(r,{label:"新窗口打开",prop:"meta.newWindow"},{default:t(()=>[a(_,{modelValue:n(l).meta.newWindow,"onUpdate:modelValue":e[21]||(e[21]=o=>n(l).meta.newWindow=o),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:11,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.link"},{label:t(()=>[...e[49]||(e[49]=[i(" 访问外链 ",-1),m("span",{class:"label-tip"},"请设置 http/https 开头的完整外链地址",-1)])]),default:t(()=>[a(b,{modelValue:n(l).meta.link,"onUpdate:modelValue":e[22]||(e[22]=o=>n(l).meta.link=o),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:12,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.iframe"},{label:t(()=>[...e[50]||(e[50]=[i(" 内嵌网页 ",-1),m("span",{class:"label-tip"},"请勿与外链同时设置，同时设置时，本设置会失效",-1)])]),default:t(()=>[a(b,{modelValue:n(l).meta.iframe,"onUpdate:modelValue":e[23]||(e[23]=o=>n(l).meta.iframe=o),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),n(l).parentId?(d(),p(s,{key:13,xl:12,lg:24},{default:t(()=>[a(r,{label:"底部版权",prop:"meta.copyright"},{default:t(()=>[a(_,{modelValue:n(l).meta.copyright,"onUpdate:modelValue":e[24]||(e[24]=o=>n(l).meta.copyright=o),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[Se,n(M)]]),a(Ae,null,{default:t(()=>[m("div",Qe,[a(k,{onClick:Ee},{default:t(()=>[...e[53]||(e[53]=[i(" 提交 ",-1)])]),_:1}),a(k,{variant:"outline",onClick:A},{default:t(()=>[...e[54]||(e[54]=[i(" 取消 ",-1)])]),_:1})])]),_:1})])}}});typeof me=="function"&&me(fe);const il=Ke(fe,[["__scopeId","data-v-098c153d"]]);export{il as default};
