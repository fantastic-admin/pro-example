
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PenAndPaper-DSvu9dwa-CWkxTD_Q.js","./index-Bnionyve.js","./index-DpF4sDjY.css","./vue-data-ui-DO-nR8BN.js","./alert-Vqv_sKXu.js","./command.vue_vue_type_script_setup_true_lang-BupUAzs5.js","./index.vue_vue_type_script_setup_true_lang-BlKfdQqy.js","./vue-data-ui-D1HaM8UR.css","./ColorPicker-J5wOPCeB-D7M-gujm.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./UserOptions-1OZ3jcm6-ChPN5pX4.js","./img-BecE5qXd-BcsKpilD.js","./dom-to-png--BNgrTZV-Dq14aDuv.js","./PackageVersion-TgflyMpU-BuemEpsd.js"])))=>i.map(i=>d[i]);
import{M as g,g as c,ar as Se,a1 as ve,Z as Fe,c as n,o as s,N as R,O as m,a as r,cA as L,co as ze,m as _,r as f,D as T,E as M,U as j,n as H,k as Ee,R as ce,S as he,p as Re,cC as q}from"./index-Bnionyve.js";import{s as Te,Q as Me,A as Ge,c as Ne,g as Ue,p as De,G as ge,y as Ve,I as Be,f as Le}from"./vue-data-ui-DO-nR8BN.js";import{E as je,M as He}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{t as qe,o as ye}from"./useNestedProp-dJX_8vvZ-Dub3p3M4.js";import{S as Qe,T as Xe}from"./BaseScanner-BgWxam9d-Cak_1oua.js";import{m as Ye}from"./usePrinter-DTzqpYKF-B2bIVIDD.js";import{O as Je}from"./useSvgExport-DrjCWun4-cEuqHQFy.js";import{a as Ze}from"./useUserOptionState-BIvW1Kz7-KDDO9AXL.js";import{o as Ke}from"./useChartAccessibility-9icAAmYg-DZae9bBn.js";import{J as We}from"./themes-AUNCOb2G-RAhReTPj.js";import et from"./Title-BWp-37K_-Dj90ij3U.js";import tt from"./img-BecE5qXd-BcsKpilD.js";import"./alert-Vqv_sKXu.js";import"./command.vue_vue_type_script_setup_true_lang-BupUAzs5.js";import"./index.vue_vue_type_script_setup_true_lang-BlKfdQqy.js";import"./dom-to-png--BNgrTZV-Dq14aDuv.js";const at=["id"],lt=["xmlns","viewBox"],ot=["width","height"],rt={key:1},ut=["d","stroke-width","stroke"],st={key:2},nt=["x1","y1","x2","y2","stroke-width","stroke"],it={key:3},vt=["x","y","height"],ct=["x","y","font-size","fill","font-weight","text-anchor"],ht={key:4,class:"vue-data-ui-watermark"},gt={__name:"vue-ui-tiremarks",props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{}}}},setup(de,{expose:pe}){const me=L(()=>q(()=>import("./PenAndPaper-DSvu9dwa-CWkxTD_Q.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),fe=L(()=>q(()=>import("./UserOptions-1OZ3jcm6-ChPN5pX4.js"),__vite__mapDeps([10,1,2,9,3,4,5,6,7,11,12]),import.meta.url)),ke=L(()=>q(()=>import("./PackageVersion-TgflyMpU-BuemEpsd.js"),__vite__mapDeps([13,1,2]),import.meta.url)),{vue_ui_tiremarks:be}=qe(),w=de,we=g(()=>!!w.dataset&&Object.keys(w.dataset).length),G=c(Me()),x=c(null),xe=c(null),Q=c(null),X=c(null),Y=c(0),J=c(0),$=c(null),O=c(null),e=c(V()),{loading:Z,FINAL_DATASET:N}=Qe({...Se(w),FINAL_CONFIG:e,prepareConfig:V,skeletonDataset:{percentage:50},skeletonConfig:Ge({defaultConfig:e.value,userConfig:{userOptions:{show:!1},style:{chart:{backgroundColor:"#99999930",animation:{use:!1},layout:{activeColor:"#6A6A6A80",inactiveColor:"#CACACA80",ticks:{gradient:{show:!1}}}}}}})}),{userOptionsVisible:U,setUserOptionsVisibility:K,keepUserOptionState:W}=Ze({config:e.value}),{svgRef:D}=Ke({config:e.value.style.chart.title});function V(){const t=ye({userConfig:w.config,defaultConfig:be});return t.theme?{...ye({userConfig:We.vue_ui_tiremarks[t.theme]||w.config,defaultConfig:t})}:t}ve(()=>w.config,t=>{e.value=V(),U.value=!e.value.userOptions.showOnChartHover,S.value=e.value.style.chart.width,F.value=e.value.style.chart.height,re(),J.value+=1},{deep:!0});const{isPrinting:ee,isImaging:te,generatePdf:ae,generateImage:le}=Ye({elementId:G.value,fileName:e.value.style.chart.title.text||"vue-ui-tiremarks",options:e.value.userOptions.print}),$e=g(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),i=c(e.value.style.chart.animation.use?0:Ne(N.value.percentage));ve(()=>N.value,t=>{e.value.style.chart.animation.use?oe(t.percentage):i.value=t.percentage||0},{deep:!0}),Fe(()=>{re()});function oe(t){let a=e.value.style.chart.animation.speed;const l=Math.abs(t-i.value)/(a*120);function o(){i.value<t?i.value=Math.min(i.value+l,t):i.value>t&&(i.value=Math.max(i.value-l,t)),i.value!==t&&requestAnimationFrame(o)}o()}const Ae=g(()=>!!e.value.debug);function re(){if(Ue(w.dataset)&&De({componentName:"VueUiTiremarks",type:"dataset",debug:Ae.value}),e.value.responsive){const t=je(()=>{const{width:a,height:l}=He({chart:x.value,title:e.value.style.chart.title.text?Q.value:null,source:X.value});requestAnimationFrame(()=>{S.value=Math.max(.1,a),F.value=Math.max(.1,l-12)})});$.value&&(O.value&&$.value.unobserve(O.value),$.value.disconnect()),$.value=new ResizeObserver(t),O.value=x.value.parentNode,$.value.observe(O.value)}oe(N.value.percentage||0)}const P=g(()=>e.value.style.chart.layout.display==="vertical"),v=g(()=>{const t=e.value.style.chart.percentage.show,a={top:t?48:12,left:t?64:16,right:t?64:16,bottom:t?48:12};return P.value?{top:e.value.style.chart.percentage.verticalPosition==="top"?a.top:3,left:3,right:3,bottom:e.value.style.chart.percentage.verticalPosition==="bottom"?a.bottom:3}:{top:0,bottom:0,left:e.value.style.chart.percentage.horizontalPosition==="left"?a.left:16,right:e.value.style.chart.percentage.horizontalPosition==="right"?a.right:10}}),I=g(()=>Object.values(v.value).reduce((t,a)=>t+a,0)),S=c(e.value.style.chart.width),F=c(e.value.style.chart.height),u=g(()=>({height:F.value,width:S.value})),ue=g(()=>({horizontal:{x:d.value.x+(e.value.style.chart.percentage.horizontalPosition==="left"?6:3),y:u.value.height/2-d.value.fontSize/2},vertical:{x:u.value.width/2-20,y:d.value.y-d.value.fontSize/2}})[e.value.style.chart.layout.display]),y=g(()=>P.value?{mark:(u.value.height-I.value)/100*.5,space:(u.value.height-I.value)/100*.5}:{mark:(u.value.width-I.value)/100*.5,space:(u.value.width-I.value)/100*.5}),se=g(()=>{const t=[];for(let a=0;a<100;a+=1){const l=e.value.style.chart.layout.ticks.gradient.show?ge(e.value.style.chart.layout.activeColor,a/100*(e.value.style.chart.layout.ticks.gradient.shiftHueIntensity/100)):e.value.style.chart.layout.activeColor;if(P.value){const o=e.value.style.chart.layout.crescendo?(100-a)*(u.value.width-v.value.left-v.value.right)/100/3:0,h=v.value.left+4+o,p=u.value.width-v.value.right-4-o,k=u.value.height-v.value.bottom-a*y.value.mark-a*y.value.space-y.value.mark,b=u.value.height-v.value.bottom-a*y.value.mark-a*y.value.space-y.value.mark,A=(p-h)/e.value.style.chart.layout.curveAngleX,C=e.value.style.chart.layout.curveAngleY*((1+a)/100);t.push({x1:h,x2:p,y1:k,y2:b,curve:"M ".concat(h," ").concat(k," C ").concat(h+A," ").concat(k-C,", ").concat(p-A," ").concat(b-C,", ").concat(p," ").concat(b),color:l})}else{const o=e.value.style.chart.layout.crescendo?(100-a)*(u.value.height-v.value.top-v.value.bottom)/100/3:0,h=v.value.left+a*y.value.mark+a*y.value.space-y.value.mark,p=h,k=v.value.top+4+o,b=u.value.height-v.value.bottom-4-o,A=e.value.style.chart.layout.curveAngleY*((1+a)/100),C=(b-k)/e.value.style.chart.layout.curveAngleX;t.push({x1:h,x2:p,y1:k,y2:b,curve:"M ".concat(h," ").concat(k," C ").concat(h+A," ").concat(k+C,", ").concat(p+A," ").concat(b-C,", ").concat(p," ").concat(b),color:l})}}return t}),d=g(()=>{let t,a,l;const o=e.value.style.chart.percentage.fontSize/3;return P.value?e.value.style.chart.percentage.verticalPosition==="top"?(t=u.value.width/2,a=v.value.top/2,l="middle"):e.value.style.chart.percentage.verticalPosition==="bottom"&&(t=u.value.width/2,a=u.value.height-v.value.bottom/2+o,l="middle"):e.value.style.chart.percentage.horizontalPosition==="left"?(t=4,a=u.value.height/2+o,l="start"):e.value.style.chart.percentage.horizontalPosition==="right"&&(t=u.value.width-v.value.right+8,a=u.value.height/2+o,l="start"),{x:t,y:a,textAnchor:l,bold:e.value.style.chart.percentage.bold,fontSize:e.value.style.chart.percentage.fontSize,fill:e.value.style.chart.percentage.color}}),z=c(!1);function ne(t){z.value=t,Y.value+=1}const E=c(!1);function B(){E.value=!E.value}async function Ce({scale:t=2}={}){if(!x.value)return;const{width:a,height:l}=x.value.getBoundingClientRect(),o=a/l,{imageUri:h,base64:p}=await tt({domElement:x.value,base64:!0,img:!0,scale:t});return{imageUri:h,base64:p,title:e.value.style.chart.title.text,width:a,height:l,aspectRatio:o}}const _e=g(()=>e.value.style.chart.backgroundColor),Oe=g(()=>e.value.style.chart.title),{exportSvg:Pe,getSvg:Ie}=Je({svg:D,title:Oe,backgroundColor:_e});async function ie({isCb:t}){if(t){const{blob:a,url:l,text:o,dataUrl:h}=await Ie();e.value.userOptions.callbacks.svg({blob:a,url:l,text:o,dataUrl:h})}else Pe()}return pe({getImage:Ce,generatePdf:ae,generateImage:le,generateSvg:ie,toggleAnnotator:B,toggleFullscreen:ne}),(t,a)=>(s(),n("div",{ref_key:"tiremarksChart",ref:x,class:H("vue-data-ui-component vue-ui-tiremarks ".concat(e.value.useCssAnimation?"":"vue-ui-dna")),style:j("font-family:".concat(e.value.style.fontFamily,";width:100%; text-align:center;background:").concat(e.value.style.chart.backgroundColor)),id:G.value,onMouseenter:a[0]||(a[0]=()=>r(K)(!0)),onMouseleave:a[1]||(a[1]=()=>r(K)(!1))},[e.value.userOptions.buttons.annotator?(s(),R(r(me),{key:0,svgRef:r(D),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:E.value,onClose:B},null,8,["svgRef","backgroundColor","color","active"])):m("",!0),$e.value?(s(),n("div",{key:1,ref_key:"noTitle",ref:xe,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):m("",!0),e.value.style.chart.title.text?(s(),n("div",{key:2,ref_key:"chartTitle",ref:Q,style:"width:100%;background:transparent;padding-bottom:12px"},[(s(),R(et,{key:"title_".concat(J.value),config:{title:{cy:"wheel-title",...e.value.style.chart.title},subtitle:{cy:"wheel-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):m("",!0),e.value.userOptions.show&&we.value&&(r(W)||r(U))?(s(),R(r(fe),{ref:"details",key:"user_options_".concat(Y.value),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:r(ee),isImaging:r(te),uid:G.value,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasFullscreen:e.value.userOptions.buttons.fullscreen,hasXls:!1,isFullscreen:z.value,titles:{...e.value.userOptions.buttonTitles},chartElement:x.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:E.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,onToggleFullscreen:ne,onGeneratePdf:r(ae),onGenerateImage:r(le),onGenerateSvg:ie,onToggleAnnotator:B,style:j({visibility:r(W)?r(U)?"visible":"hidden":"visible"})},ze({_:2},[t.$slots.menuIcon?{name:"menuIcon",fn:_(({isOpen:l,color:o})=>[f(t.$slots,"menuIcon",T(M({isOpen:l,color:o})),void 0,!0)]),key:"0"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:_(()=>[f(t.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:_(()=>[f(t.$slots,"optionImg",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:_(({toggleFullscreen:l,isFullscreen:o})=>[f(t.$slots,"optionFullscreen",T(M({toggleFullscreen:l,isFullscreen:o})),void 0,!0)]),key:"3"}:void 0,t.$slots.optionAnnotator?{name:"optionAnnotator",fn:_(({toggleAnnotator:l,isAnnotator:o})=>[f(t.$slots,"optionAnnotator",T(M({toggleAnnotator:l,isAnnotator:o})),void 0,!0)]),key:"4"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasImg","hasSvg","hasFullscreen","isFullscreen","titles","chartElement","position","hasAnnotator","isAnnotation","callbacks","printScale","onGeneratePdf","onGenerateImage","style"])):m("",!0),(s(),n("svg",{ref_key:"svgRef",ref:D,xmlns:r(Ve),class:H({"vue-data-ui-fullscreen--on":z.value,"vue-data-ui-fulscreen--off":!z.value}),viewBox:"0 0 ".concat(S.value," ").concat(F.value),style:j("max-width:100%; overflow: visible; background:transparent;color:".concat(e.value.style.chart.color))},[Ee(r(ke)),t.$slots["chart-background"]?(s(),n("foreignObject",{key:0,x:0,y:0,width:u.value.width,height:u.value.height,style:{pointerEvents:"none"}},[f(t.$slots,"chart-background",{},void 0,!0)],8,ot)):m("",!0),e.value.style.chart.layout.curved?(s(),n("g",rt,[(s(!0),n(ce,null,he(se.value,(l,o)=>(s(),n("path",{d:l.curve,"stroke-width":y.value.mark,stroke:i.value>=o?l.color:e.value.style.chart.layout.inactiveColor,"stroke-linecap":"round",fill:"none",class:H({"vue-ui-tick-animated":e.value.style.chart.animation.use&&o<=i.value})},null,10,ut))),256))])):(s(),n("g",st,[(s(!0),n(ce,null,he(se.value,(l,o)=>(s(),n("line",{x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,"stroke-width":y.value.mark,stroke:i.value>=o?l.color:e.value.style.chart.layout.inactiveColor,"stroke-linecap":"round"},null,8,nt))),256))])),e.value.style.chart.percentage.show?(s(),n("g",it,[r(Z)?(s(),n("rect",{key:0,x:ue.value.x,y:ue.value.y,width:40,height:d.value.fontSize,fill:"#6A6A6A80",rx:3},null,8,vt)):(s(),n("text",{key:1,x:d.value.x,y:d.value.y,"font-size":d.value.fontSize,fill:e.value.style.chart.layout.ticks.gradient.show&&e.value.style.chart.percentage.useGradientColor?r(ge)(e.value.style.chart.layout.activeColor,i.value/100*(e.value.style.chart.layout.ticks.gradient.shiftHueIntensity/100)):e.value.style.chart.percentage.color,"font-weight":d.value.bold?"bold":"normal","text-anchor":d.value.textAnchor},Re(r(Be)(e.value.style.chart.percentage.formatter,i.value,r(Le)({v:i.value,s:"%",r:e.value.style.chart.percentage.rounding}))),9,ct))])):m("",!0),f(t.$slots,"svg",{svg:u.value},void 0,!0)],14,lt)),t.$slots.watermark?(s(),n("div",ht,[f(t.$slots,"watermark",T(M({isPrinting:r(ee)||r(te)})),void 0,!0)])):m("",!0),t.$slots.source?(s(),n("div",{key:5,ref_key:"source",ref:X,dir:"auto"},[f(t.$slots,"source",{},void 0,!0)],512)):m("",!0),r(Z)?(s(),R(Xe,{key:6})):m("",!0)],46,at))}},St=Te(gt,[["__scopeId","data-v-9473b7f9"]]);export{St as default};
