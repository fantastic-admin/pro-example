
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{_ as he}from"./index-MXWOQYmf.js";import{d as Re,g as c,ac as I,Z as ie,ao as E,a4 as b,ck as Ue,w as h,a as n,c as T,o as d,l as m,k as a,m as t,N as p,O as v,aa as Se,G as i,co as Ae,aF as z,R as K,S as P,p as B,aP as W,v as G,P as Te,x as N,b9 as R,V as Be}from"./index-Bnionyve.js";import{S as Ne}from"./sortable.esm-BMgLh4Kk.js";import{a as H}from"./menu-BAkdgYHt.js";import"./index.vue_vue_type_script_setup_true_lang-qwRnxT-f.js";import"./index.vue_vue_type_script_setup_true_lang-DvmhqQa1.js";const Oe={class:"form"},$e={class:"top-side"},Fe={class:"form-left-side"},De={class:"label-tip"},Me={style:{display:"flex"}},qe={class:"label-tip"},Le={class:"label-tip"},je={class:"form-right-side"},ze={class:"index"},Ke={class:"bottom-side"},Pe=Re({__name:"index",props:{id:{default:""},parentId:{default:""}},emits:["onSubmit"],setup(pe,{emit:re}){const Z=pe,J=re,O=c(!1),Q=I("formRef"),l=c({id:Z.id,parentId:Z.parentId,path:"",redirect:"",name:"",component:"",meta:{title:"",icon:"",activeIcon:"",defaultOpened:!1,alwaysOpened:!1,permanent:!1,auth:[],auths:[],menu:!0,breadcrumb:!0,activeMenu:"",cache:[],noCache:[],badge:"",badgeVariant:"default",newWindow:!1,link:"",iframe:"",copyright:!1}}),se=c({path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入显示名称",trigger:"blur"}]});ie(()=>{l.value.id!==""&&me()});function me(){O.value=!0,H.detail(l.value.id).then(u=>{O.value=!1,l.value.id=u.data.id,l.value.parentId=u.data.parentId,l.value.path=u.data.path,l.value.redirect=u.data.redirect,l.value.name=u.data.name,l.value.component=u.data.component,Object.assign(l.value.meta,u.data.meta)})}const V=c(""),$=c(!1),X=I("inputAuthRef");function fe(u){l.value.meta.auth.splice(l.value.meta.auth.indexOf(u),1)}function be(){$.value=!0,E(()=>{var u,e;(e=(u=X.value)==null?void 0:u.input)==null||e.focus()})}function Y(){V.value&&(l.value.meta.auth.includes(V.value)?R.warning("标识已存在"):l.value.meta.auth.push(V.value)),$.value=!1,V.value=""}const y=c(""),F=c(!1),ee=I("inputCacheRef");function ve(u){typeof l.value.meta.cache=="object"&&l.value.meta.cache.splice(l.value.meta.cache.indexOf(u),1)}function ce(){F.value=!0,E(()=>{var u,e;(e=(u=ee.value)==null?void 0:u.input)==null||e.focus()})}function le(){y.value&&typeof l.value.meta.cache=="object"&&(l.value.meta.cache.includes(y.value)?R.warning("规则已存在"):l.value.meta.cache.push(y.value)),F.value=!1,y.value=""}const g=c(""),D=c(!1),te=I("inputNoCacheRef");function Ve(u){l.value.meta.noCache.splice(l.value.meta.noCache.indexOf(u),1)}function ye(){D.value=!0,E(()=>{var u,e;(e=(u=te.value)==null?void 0:u.input)==null||e.focus()})}function ae(){g.value&&(l.value.meta.noCache.includes(g.value)?R.warning("规则已存在"):l.value.meta.noCache.push(g.value)),D.value=!1,g.value=""}const M=I("authsTableRef"),ne=c(0);ie(()=>{oe()});function ge(){l.value.meta.auths.push({name:"",value:""}),E(()=>{var u;(u=M.value)==null||u.setScrollTop(l.value.meta.auths.length*50)})}function ke(u){l.value.meta.auths.splice(u,1)}function oe(){var e;const u=(e=M.value)==null?void 0:e.$el.querySelector(".el-table__body-wrapper tbody");Ne.create(u,{handle:".sortable",animation:300,ghostClass:"ghost",onEnd:({newIndex:_,oldIndex:f})=>{if(_===void 0||f===void 0)return;const r=l.value.meta.auths.splice(f,1)[0];l.value.meta.auths.splice(_,0,r),ne.value+=1,E(()=>oe())}})}function xe(){var u;(u=Q.value)==null||u.validate(e=>{e&&(l.value.id===""?H.create(l.value).then(()=>{R.success("模拟新增成功"),J("onSubmit")}):H.edit(l.value).then(()=>{R.success("模拟编辑成功"),J("onSubmit")}))})}return(u,e)=>{const _=Se,f=b("ElInput"),r=b("ElFormItem"),s=b("ElCol"),U=b("ElLink"),ue=b("ElRow"),C=Te,q=b("ElTooltip"),S=b("ElTag"),w=b("ElButton"),L=b("ElSpace"),de=he,k=b("ElSwitch"),j=b("ElRadioButton"),_e=b("ElRadioGroup"),Ce=b("ElScrollbar"),A=b("ElTableColumn"),we=b("ElTable"),Ie=b("ElForm"),Ee=Ue("loading");return h((d(),T("div",Oe,[m("div",$e,[a(Ie,{ref_key:"formRef",ref:Q,model:n(l),rules:n(se),"label-position":"top"},{default:t(()=>[m("div",Fe,[a(Ce,null,{default:t(()=>[n(l).parentId?(d(),p(_,{key:0,title:"基础配置",description:"标准路由配置，包含 path/redirect/name/component",class:"mb-0 border-b-none bg-border/50"})):v("",!0),n(l).parentId?(d(),p(ue,{key:1,gutter:30,style:{padding:"20px"}},{default:t(()=>[a(s,{xl:12,lg:24},{default:t(()=>[a(r,{label:"路由地址",prop:"path"},{default:t(()=>[a(f,{modelValue:n(l).path,"onUpdate:modelValue":e[0]||(e[0]=o=>n(l).path=o),clearable:"",placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{xl:12,lg:24},{default:t(()=>[a(r,{prop:"redirect"},{label:t(()=>[...e[25]||(e[25]=[i(" 重定向 ",-1),m("span",{class:"label-tip"},"父级路由通常无需设置，框架会自行处理",-1)])]),default:t(()=>[a(f,{modelValue:n(l).redirect,"onUpdate:modelValue":e[1]||(e[1]=o=>n(l).redirect=o),clearable:"",placeholder:"请输入重定向地址"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{xl:12,lg:24},{default:t(()=>[a(r,{prop:"name"},{label:t(()=>[...e[26]||(e[26]=[i(" 路由命名 ",-1),m("span",{class:"label-tip"},"即 name ，系统唯一",-1)])]),default:t(()=>[a(f,{modelValue:n(l).name,"onUpdate:modelValue":e[2]||(e[2]=o=>n(l).name=o),clearable:"",placeholder:"请输入路由命名"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{xl:12,lg:24},{default:t(()=>[a(r,{prop:"component"},{label:t(()=>[e[30]||(e[30]=i(" 组件路径 ",-1)),m("span",De,[e[28]||(e[28]=i(" 顶级路由请设置“",-1)),a(U,{type:"primary",underline:!1,onClick:e[3]||(e[3]=z(o=>n(l).component="Layout",["prevent"]))},{default:t(()=>[...e[27]||(e[27]=[i("Layout",-1)])]),_:1}),e[29]||(e[29]=i("”，中间层级路由无需设置 ",-1))])]),default:t(()=>[a(f,{modelValue:n(l).component,"onUpdate:modelValue":e[4]||(e[4]=o=>n(l).component=o),clearable:"",placeholder:"请输入完整组件路径"},Ae({_:2},[n(l).component!=="Layout"?{name:"prepend",fn:t(()=>[e[31]||(e[31]=i(" /src/views/ ",-1))]),key:"0"}:void 0]),1032,["modelValue"])]),_:1})]),_:1})]),_:1})):v("",!0),a(_,{title:"扩展配置",class:"mb-0 border-b-none bg-border/50"},{description:t(()=>[m("div",Me,[e[33]||(e[33]=i(" 框架扩展配置，详细配置介绍请查看",-1)),a(U,{type:"primary",href:"https://fantastic-admin.hurui.me/guide/router.html#%E5%AF%BC%E8%88%AA%E9%85%8D%E7%BD%AE",target:"_blank"},{default:t(()=>[...e[32]||(e[32]=[i(" 框架文档 ",-1)])]),_:1})])]),_:1}),a(ue,{gutter:30,style:{padding:"20px"}},{default:t(()=>[a(s,{xl:12,lg:24},{default:t(()=>[a(r,{label:"显示名称",prop:"meta.title"},{default:t(()=>[a(f,{modelValue:n(l).meta.title,"onUpdate:modelValue":e[5]||(e[5]=o=>n(l).meta.title=o),clearable:"",placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.auth"},{label:t(()=>[e[34]||(e[34]=i(" 鉴权标识 ",-1)),a(q,{content:"当设置多个标识时，只要命中其中一个则鉴权通过",placement:"top"},{default:t(()=>[a(C,{name:"i-ri:question-line"})]),_:1})]),default:t(()=>[a(L,null,{default:t(()=>[(d(!0),T(K,null,P(n(l).meta.auth,o=>(d(),p(S,{key:o,size:"large",closable:"","disable-transitions":!1,onClose:x=>fe(o)},{default:t(()=>[i(B(o),1)]),_:2},1032,["onClose"]))),128)),n($)?(d(),p(f,{key:0,ref_key:"inputAuthRef",ref:X,modelValue:n(V),"onUpdate:modelValue":e[6]||(e[6]=o=>G(V)?V.value=o:null),style:{width:"200px"},onKeyup:W(Y,["enter"]),onBlur:Y},null,8,["modelValue"])):(d(),p(w,{key:1,onClick:be},{default:t(()=>[...e[35]||(e[35]=[i(" 新增 ",-1)])]),_:1}))]),_:1})]),_:1})]),_:1}),a(s,{xl:12,lg:24},{default:t(()=>[a(r,{label:"默认图标",prop:"meta.icon"},{default:t(()=>[a(de,{modelValue:n(l).meta.icon,"onUpdate:modelValue":e[7]||(e[7]=o=>n(l).meta.icon=o)},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{xl:12,lg:24},{default:t(()=>[a(r,{label:"激活图标",prop:"meta.activeIcon"},{default:t(()=>[a(de,{modelValue:n(l).meta.activeIcon,"onUpdate:modelValue":e[8]||(e[8]=o=>n(l).meta.activeIcon=o)},null,8,["modelValue"])]),_:1})]),_:1}),n(l).parentId?(d(),p(s,{key:0,xl:12,lg:24},{default:t(()=>[a(r,{label:"默认展开",prop:"meta.defaultOpened"},{default:t(()=>[a(k,{modelValue:n(l).meta.defaultOpened,"onUpdate:modelValue":e[9]||(e[9]=o=>n(l).meta.defaultOpened=o),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:1,xl:12,lg:24},{default:t(()=>[a(r,{label:"默认展开",prop:"meta.alwaysOpened"},{default:t(()=>[a(k,{modelValue:n(l).meta.alwaysOpened,"onUpdate:modelValue":e[10]||(e[10]=o=>n(l).meta.alwaysOpened=o),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:2,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.permanent"},{label:t(()=>[...e[36]||(e[36]=[i(" 常驻标签页 ",-1),m("span",{class:"label-tip"},"请勿在带有参数的路由地址上开启该设置",-1)])]),default:t(()=>[a(k,{modelValue:n(l).meta.permanent,"onUpdate:modelValue":e[11]||(e[11]=o=>n(l).meta.permanent=o),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:3,xl:12,lg:24},{default:t(()=>[a(r,{label:"在导航显示",prop:"meta.menu"},{default:t(()=>[a(k,{modelValue:n(l).meta.menu,"onUpdate:modelValue":e[12]||(e[12]=o=>n(l).meta.menu=o),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:4,xl:12,lg:24},{default:t(()=>[a(r,{label:"在面包屑显示",prop:"meta.breadcrumb"},{default:t(()=>[a(k,{modelValue:n(l).meta.breadcrumb,"onUpdate:modelValue":e[13]||(e[13]=o=>n(l).meta.breadcrumb=o),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:5,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.cache"},{label:t(()=>[e[41]||(e[41]=i(" 缓存规则 ",-1)),a(q,{content:"当跳转到设置的路由时，则会对当前路由进行缓存",placement:"top"},{default:t(()=>[a(C,{name:"i-ri:question-line"})]),_:1}),h(m("span",qe,[e[38]||(e[38]=i("切换为",-1)),a(U,{type:"primary",underline:!1,onClick:e[14]||(e[14]=z(o=>n(l).meta.cache=!0,["prevent"]))},{default:t(()=>[...e[37]||(e[37]=[i("始终缓存",-1)])]),_:1})],512),[[N,typeof n(l).meta.cache=="object"]]),h(m("span",Le,[e[40]||(e[40]=i("切换为",-1)),a(U,{type:"primary",underline:!1,onClick:e[15]||(e[15]=z(o=>n(l).meta.cache=[],["prevent"]))},{default:t(()=>[...e[39]||(e[39]=[i("规则模式",-1)])]),_:1})],512),[[N,typeof n(l).meta.cache=="boolean"]])]),default:t(()=>[h(a(L,null,{default:t(()=>[(d(!0),T(K,null,P(n(l).meta.cache,o=>(d(),p(S,{key:o,size:"large",closable:"","disable-transitions":!1,onClose:x=>ve(o)},{default:t(()=>[i(B(o),1)]),_:2},1032,["onClose"]))),128)),n(F)?(d(),p(f,{key:0,ref_key:"inputCacheRef",ref:ee,modelValue:n(y),"onUpdate:modelValue":e[16]||(e[16]=o=>G(y)?y.value=o:null),style:{width:"200px"},onKeyup:W(le,["enter"]),onBlur:le},null,8,["modelValue"])):(d(),p(w,{key:1,onClick:ce},{default:t(()=>[...e[42]||(e[42]=[i(" 新增 ",-1)])]),_:1}))]),_:1},512),[[N,typeof n(l).meta.cache=="object"]]),h(m("div",null," 始终缓存 ",512),[[N,typeof n(l).meta.cache=="boolean"]])]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:6,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.noCache"},{label:t(()=>[e[43]||(e[43]=i(" 不缓存规则 ",-1)),a(q,{content:"当跳转到设置的路由时，则会对当前路由取消缓存",placement:"top"},{default:t(()=>[a(C,{name:"i-ri:question-line"})]),_:1}),e[44]||(e[44]=m("span",{class:"label-tip"},"当缓存规则为“始终缓存”时生效",-1))]),default:t(()=>[a(L,null,{default:t(()=>[(d(!0),T(K,null,P(n(l).meta.noCache,o=>(d(),p(S,{key:o,size:"large",closable:"","disable-transitions":!1,onClose:x=>Ve(o)},{default:t(()=>[i(B(o),1)]),_:2},1032,["onClose"]))),128)),n(D)?(d(),p(f,{key:0,ref_key:"inputNoCacheRef",ref:te,modelValue:n(g),"onUpdate:modelValue":e[17]||(e[17]=o=>G(g)?g.value=o:null),style:{width:"200px"},onKeyup:W(ae,["enter"]),onBlur:ae},null,8,["modelValue"])):(d(),p(w,{key:1,onClick:ye},{default:t(()=>[...e[45]||(e[45]=[i(" 新增 ",-1)])]),_:1}))]),_:1})]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:7,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.activeMenu"},{label:t(()=>[...e[46]||(e[46]=[i(" 高亮导航 ",-1),m("span",{class:"label-tip"},"如果子路由不在导航显示，则需要设置高亮的上级路由地址",-1)])]),default:t(()=>[a(f,{modelValue:n(l).meta.activeMenu,"onUpdate:modelValue":e[18]||(e[18]=o=>n(l).meta.activeMenu=o),clearable:"",placeholder:"请输入高亮导航的完整路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:8,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.badge"},{label:t(()=>[...e[47]||(e[47]=[i(" 徽标 ",-1),m("span",{class:"label-tip"},"不宜设置太长，建议控制在4个字符内",-1)])]),default:t(()=>[a(f,{modelValue:n(l).meta.badge,"onUpdate:modelValue":e[19]||(e[19]=o=>n(l).meta.badge=o),clearable:"",placeholder:"请输入徽标显示内容"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:9,xl:12,lg:24},{default:t(()=>[a(r,{label:"徽标变体",prop:"meta.badgeVariant"},{default:t(()=>[a(_e,{modelValue:n(l).meta.badgeVariant,"onUpdate:modelValue":e[20]||(e[20]=o=>n(l).meta.badgeVariant=o)},{default:t(()=>[a(j,{label:"默认",value:"default"}),a(j,{label:"次要",value:"secondary"}),a(j,{label:"破坏",value:"destructive"})]),_:1},8,["modelValue"])]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:10,xl:12,lg:24},{default:t(()=>[a(r,{label:"新窗口打开",prop:"meta.newWindow"},{default:t(()=>[a(k,{modelValue:n(l).meta.newWindow,"onUpdate:modelValue":e[21]||(e[21]=o=>n(l).meta.newWindow=o),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:11,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.link"},{label:t(()=>[...e[48]||(e[48]=[i(" 访问外链 ",-1),m("span",{class:"label-tip"},"请设置 http/https 开头的完整外链地址",-1)])]),default:t(()=>[a(f,{modelValue:n(l).meta.link,"onUpdate:modelValue":e[22]||(e[22]=o=>n(l).meta.link=o),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:12,xl:12,lg:24},{default:t(()=>[a(r,{prop:"meta.iframe"},{label:t(()=>[...e[49]||(e[49]=[i(" 内嵌网页 ",-1),m("span",{class:"label-tip"},"请勿与外链同时设置，同时设置时，本设置会失效",-1)])]),default:t(()=>[a(f,{modelValue:n(l).meta.iframe,"onUpdate:modelValue":e[23]||(e[23]=o=>n(l).meta.iframe=o),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),n(l).parentId?(d(),p(s,{key:13,xl:12,lg:24},{default:t(()=>[a(r,{label:"底部版权",prop:"meta.copyright"},{default:t(()=>[a(k,{modelValue:n(l).meta.copyright,"onUpdate:modelValue":e[24]||(e[24]=o=>n(l).meta.copyright=o),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0)]),_:1})]),_:1})]),m("div",je,[a(_,{title:"权限池",class:"mb-0 border-b-none bg-border/50"},{description:t(()=>[...e[50]||(e[50]=[m("p",null,"设置导航所具备的所有权限，权限池内的权限会用于角色管理",-1),m("p",null,"通常只在最子级导航上进行设置",-1)])]),_:1}),(d(),p(we,{ref_key:"authsTableRef",ref:M,key:n(ne),data:n(l).meta.auths,stripe:"","highlight-current-row":"",border:""},{default:t(()=>[a(A,{width:"60",align:"center",fixed:""},{header:t(()=>[a(w,{type:"primary",size:"small",circle:"",plain:"",onClick:ge},{icon:t(()=>[a(C,{name:"i-ep:plus"})]),_:1})]),default:t(o=>[m("span",ze,B(o.$index+1),1),a(w,{type:"danger",size:"small",plain:"",circle:"",class:"delete",onClick:x=>ke(o.$index)},{icon:t(()=>[a(C,{name:"i-ep:delete"})]),_:1},8,["onClick"])]),_:1}),a(A,{width:"80",align:"center",fixed:""},{header:t(()=>[...e[51]||(e[51]=[i(" 排序 ",-1)])]),default:t(()=>[a(S,{type:"info",class:"sortable"},{default:t(()=>[a(C,{name:"i-ep:d-caret"})]),_:1})]),_:1}),a(A,{label:"名称"},{default:t(o=>[a(f,{modelValue:o.row.name,"onUpdate:modelValue":x=>o.row.name=x},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(A,{label:"标识"},{default:t(o=>[a(f,{modelValue:o.row.value,"onUpdate:modelValue":x=>o.row.value=x},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]))])]),_:1},8,["model","rules"])]),m("div",Ke,[a(w,{type:"primary",onClick:xe},{default:t(()=>[...e[52]||(e[52]=[i(" 提交 ",-1)])]),_:1})])])),[[Ee,n(O)]])}}}),Xe=Be(Pe,[["__scopeId","data-v-2cf30571"]]);export{Xe as default};
