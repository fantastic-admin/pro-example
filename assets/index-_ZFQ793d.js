
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{a as k}from"./table-Bw6yXVea.js";import{u as T}from"./usePagination-Ci1eRh1x.js";import{d as I,ap as L,aq as P,n as B,a7 as D,r as d,l as c,o as f,w as g,g as m,e as l,c as M,F as S,q,h as F}from"./index-H6QnEWHf.js";const N=I({__name:"index",props:L({id:{default:""},info:{default:{}}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const t=p,u=P(p,"modelValue"),{pagination:s,getParams:b,onSizeChange:h,onCurrentChange:v,onSortChange:C}=T(),e=B({loading:!1,dataList:[],border:!1,stripe:!1,header:!0,columns:[]});D(()=>{r()});function r(){e.value.loading=!0;const n={...b(),...t.id&&{id:t.id},...t.info.code&&{code:t.info.code}};k.preview(n).then(a=>{e.value.loading=!1,e.value.dataList=a.data.list,s.value.total=a.data.total,t.id?(e.value.border=a.data.tableInfo.border,e.value.stripe=a.data.tableInfo.stripe,e.value.header=a.data.tableInfo.header,e.value.columns=a.data.tableInfo.columns.filter(i=>i.enable)):(e.value.border=t.info.border,e.value.stripe=t.info.stripe,e.value.header=t.info.header,e.value.columns=t.info.columns.filter(i=>i.enable))})}function _(n){h(n).then(()=>r())}function w(n=1){v(n).then(()=>r())}function x({prop:n,order:a}){C(n,a).then(()=>r())}return(n,a)=>{const i=d("ElTableColumn"),z=d("ElTable"),E=d("ElPagination"),y=d("ElDialog");return f(),c(y,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=o=>u.value=o),title:"预览",width:"80%","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",onClosed:a[1]||(a[1]=o=>u.value=!1)},{default:g(()=>[m(z,{data:l(e).dataList,border:l(e).border,stripe:l(e).stripe,"show-header":l(e).header,onSortChange:x},{default:g(()=>[(f(!0),M(S,null,q(l(e).columns,(o,V)=>(f(),c(i,{key:V,label:o.name,prop:o.field,width:o.width,align:o.align,sortable:o.sortable,fixed:o.fixed?o.fixed:!1},null,8,["label","prop","width","align","sortable","fixed"]))),128))]),_:1},8,["data","border","stripe","show-header"]),m(E,{"current-page":l(s).page,total:l(s).total,"page-size":l(s).size,"page-sizes":l(s).sizes,layout:l(s).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:w,onSizeChange:_},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["modelValue"])}}}),A=F(N,[["__scopeId","data-v-c12f2de6"]]);export{A as default};
