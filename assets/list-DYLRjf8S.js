
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as ce,J as ge,K as _e,g as u,Z as ve,a7 as V,af as be,bW as G,b6 as J,a4 as s,ck as Ce,c as Ee,o as b,k as t,m as a,H as ke,a as n,G as i,P as ye,aa as De,w as ze,aP as we,p as he,N as y,O as x,n as T,a9 as $e,b9 as xe,V as Pe,W as N}from"./index-Bnionyve.js";import{_ as Be}from"./index.vue_vue_type_script_setup_true_lang-DwNki4sp.js";import{a as Fe}from"./department-Bc3_Lksl.js";import{a as R,_ as H}from"./index.vue_vue_type_script_setup_true_lang-B3OJuRIB.js";import{u as Oe}from"./index-CAH_iDR3.js";import{u as Le}from"./usePagination-BqwTFOKk.js";const K=ce({name:"PagesExampleDepartmentJobList",__name:"list",setup(Se){const{pagination:f,getParams:U,onSizeChange:W,onCurrentChange:j,onSortChange:A}=Le(),C=ge(),D=_e(),z=u(!1),c=u("router"),E=u({id:""}),P={title:""},g=u({...P});function Z(){Object.assign(g.value,P)}const m=u({enable:!0,selectionDataList:[]}),w=u(!1),B=u([]),F=u("");ve(()=>{q(),d(),c.value==="router"&&V.on("get-data-list",()=>{d()})}),be(()=>{c.value==="router"&&V.off("get-data-list")});function q(){Fe.detail(C.params.department_id).then(o=>{F.value=o.data.title})}function d(){w.value=!0;const o={...U(),department_id:C.params.department_id,...g.value.title&&{title:g.value.title}};R.list(o).then(e=>{w.value=!1,B.value=e.data.list,f.value.total=e.data.total})}function Q(o){W(o).then(()=>d())}function _(o=1){j(o).then(()=>d())}function X({prop:o,order:e}){A(o,e).then(()=>d())}const k=u(),{open:O,update:L}=G().create({destroyOnClose:!0,closeOnClickOverlay:!1,closeOnPressEscape:!1,beforeClose:(o,e)=>{var l;o==="confirm"?(l=k.value)==null||l.submit().then(()=>{d(),e()}):e()},content:()=>J(H,{ref:k,id:E.value.id})}),{open:S,update:M}=Oe().create({destroyOnClose:!0,closeOnClickOverlay:!1,closeOnPressEscape:!1,beforeClose:(o,e)=>{var l;o==="confirm"?(l=k.value)==null||l.submit().then(()=>{d(),e()}):e()},content:()=>J(H,{ref:k,id:E.value.id})});function Y(){c.value==="router"?D.push({name:"pagesExampleGeneralJobCreate",params:{department_id:C.params.department_id}}):(E.value.id="",c.value==="modal"?(L({title:"新增"}),O()):(M({title:"新增"}),S()))}function ee(o){c.value==="router"?D.push({name:"pagesExampleGeneralJobEdit",params:{id:o.id,department_id:C.params.department_id}}):(E.value.id=o.id,c.value==="modal"?(L({title:"编辑"}),O()):(M({title:"编辑"}),S()))}function te(o){G().confirm({title:"确认信息",content:"确认删除「".concat(o.title,"」吗？"),onConfirm:()=>{R.delete(o.id).then(()=>{d(),xe.success("模拟删除成功")})}})}return(o,e)=>{const l=ye,ae=ke,ne=De,oe=s("ElInput"),I=s("ElFormItem"),r=s("ElButton"),le=s("ElForm"),se=Be,ie=s("ElDivider"),re=s("ElButtonGroup"),ue=s("ElSpace"),h=s("ElTableColumn"),de=s("ElTable"),pe=s("ElPagination"),me=$e,fe=Ce("loading");return b(),Ee("div",{class:T({"absolute-container":n(z)})},[t(ne,{title:"「".concat(n(F),"」职位管理"),description:"页面数据为 Mock 示例数据，非真实数据。",class:"mb-0"},{default:a(()=>[t(ae,{variant:"outline",size:"sm",class:"rounded-full",onClick:e[0]||(e[0]=p=>n(D).close({name:"pagesExampleGeneralDepartmentList"}))},{default:a(()=>[t(l,{name:"i-ep:arrow-left"}),e[7]||(e[7]=i(" 返回 ",-1))]),_:1})]),_:1},8,["title"]),t(me,{class:T({"flex-1 overflow-auto":n(z)}),"main-class":{"flex-1 flex flex-col overflow-auto":n(z)}},{default:a(()=>[t(se,{"show-toggle":!1},{default:a(({fold:p,toggle:$})=>[t(le,{model:n(g),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[t(I,{label:"职位"},{default:a(()=>[t(oe,{modelValue:n(g).title,"onUpdate:modelValue":e[1]||(e[1]=v=>n(g).title=v),placeholder:"请输入职位名称，支持模糊查询",clearable:"",onKeydown:e[2]||(e[2]=we(v=>_(),["enter"])),onClear:e[3]||(e[3]=v=>_())},null,8,["modelValue"])]),_:1}),t(I,null,{default:a(()=>[t(r,{onClick:e[4]||(e[4]=v=>{Z(),_()})},{default:a(()=>[...e[8]||(e[8]=[i(" 重置 ",-1)])]),_:1}),t(r,{type:"primary",onClick:e[5]||(e[5]=v=>_())},{icon:a(()=>[t(l,{name:"i-ep:search"})]),default:a(()=>[e[9]||(e[9]=i(" 筛选 ",-1))]),_:1}),t(r,{link:"",disabled:"",onClick:$},{icon:a(()=>[t(l,{name:p?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[i(" "+he(p?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(ie,{"border-style":"dashed"}),t(ue,{wrap:""},{default:a(()=>[t(r,{type:"primary",size:"default",onClick:Y},{icon:a(()=>[t(l,{name:"i-ep:plus"})]),default:a(()=>[e[10]||(e[10]=i(" 新增职位 ",-1))]),_:1}),n(m).enable?(b(),y(r,{key:0,size:"default",disabled:!n(m).selectionDataList.length},{default:a(()=>[...e[11]||(e[11]=[i(" 单个批量操作按钮 ",-1)])]),_:1},8,["disabled"])):x("",!0),n(m).enable?(b(),y(re,{key:1},{default:a(()=>[t(r,{size:"default",disabled:!n(m).selectionDataList.length},{default:a(()=>[...e[12]||(e[12]=[i(" 批量操作按钮组1 ",-1)])]),_:1},8,["disabled"]),t(r,{size:"default",disabled:!n(m).selectionDataList.length},{default:a(()=>[...e[13]||(e[13]=[i(" 批量操作按钮组2 ",-1)])]),_:1},8,["disabled"])]),_:1})):x("",!0)]),_:1}),ze((b(),y(de,{class:"my-4",data:n(B),stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:X,onSelectionChange:e[6]||(e[6]=p=>n(m).selectionDataList=p)},{default:a(()=>[n(m).enable?(b(),y(h,{key:0,type:"selection",width:"40"})):x("",!0),t(h,{prop:"title",label:"职位"}),t(h,{label:"操作",width:"250",align:"center"},{default:a(p=>[t(r,{type:"primary",size:"small",plain:"",onClick:$=>ee(p.row)},{default:a(()=>[...e[14]||(e[14]=[i(" 编辑 ",-1)])]),_:1},8,["onClick"]),t(r,{type:"danger",size:"small",plain:"",onClick:$=>te(p.row)},{default:a(()=>[...e[15]||(e[15]=[i(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[fe,n(w)]]),t(pe,{"current-page":n(f).page,total:n(f).total,"page-size":n(f).size,"page-sizes":n(f).sizes,layout:n(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Q,onCurrentChange:_},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["class","main-class"])],2)}}});typeof N=="function"&&N(K);const Ne=Pe(K,[["__scopeId","data-v-88248c51"]]);export{Ne as default};
