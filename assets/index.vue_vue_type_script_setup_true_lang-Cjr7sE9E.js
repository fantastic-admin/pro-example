
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d,ax as g,at as q,g as m,N as i,o as c,m as u,r as f,a as r,aJ as y,ae as x,bA as S,O as L,M as R,Z as $,a3 as B,ar as E,a1 as M,w as I,x as z,n as b,b as F,D as N,E as j,B as D,bs as P,k as w,G as T,p as V}from"./index-Bnionyve.js";const[k,G]=q("AvatarRoot");var J=d({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){return g(),G({imageLoadingStatus:m("idle")}),(a,t)=>(c(),i(r(y),{"as-child":a.asChild,as:a.as},{default:u(()=>[f(a.$slots,"default")]),_:3},8,["as-child","as"]))}}),U=J,W=d({__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){const a=e,t=k();g();const l=m(a.delayMs===void 0);return x(n=>{if(a.delayMs&&S){const o=window.setTimeout(()=>{l.value=!0},a.delayMs);n(()=>{window.clearTimeout(o)})}}),(n,o)=>l.value&&r(t).imageLoadingStatus.value!=="loaded"?(c(),i(r(y),{key:0,"as-child":n.asChild,as:n.as},{default:u(()=>[f(n.$slots,"default")]),_:3},8,["as-child","as"])):L("v-if",!0)}}),Z=W;function A(e,a){return e?a?(e.src!==a&&(e.src=a),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function H(e,{referrerPolicy:a,crossOrigin:t}={}){const l=m(!1),n=m(null),o=R(()=>l.value?(!n.value&&S&&(n.value=new window.Image),n.value):null),v=m(A(o.value,e.value)),_=p=>()=>{l.value&&(v.value=p)};return $(()=>{l.value=!0,x(p=>{const s=o.value;if(!s)return;v.value=A(s,e.value);const h=_("loaded"),C=_("error");s.addEventListener("load",h),s.addEventListener("error",C),a!=null&&a.value&&(s.referrerPolicy=a.value),typeof(t==null?void 0:t.value)=="string"&&(s.crossOrigin=t.value),p(()=>{s.removeEventListener("load",h),s.removeEventListener("error",C)})})}),B(()=>{l.value=!1}),v}var K=d({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(e,{emit:a}){const t=e,l=a,{src:n,referrerPolicy:o,crossOrigin:v}=E(t);g();const _=k(),p=H(n,{referrerPolicy:o,crossOrigin:v});return M(p,s=>{l("loadingStatusChange",s),s!=="idle"&&(_.imageLoadingStatus.value=s)},{immediate:!0}),(s,h)=>I((c(),i(r(y),{role:"img","as-child":s.asChild,as:s.as,src:r(n),"referrer-policy":r(o)},{default:u(()=>[f(s.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[z,r(p)==="loaded"]])}}),O=K;const Q=d({__name:"Avatar",props:{class:{},size:{default:"sm"},shape:{default:"circle"}},setup(e){const a=e;return(t,l)=>(c(),i(r(U),{class:b(r(F)(r(ee)({size:e.size,shape:e.shape}),a.class))},{default:u(()=>[f(t.$slots,"default")]),_:3},8,["class"]))}}),X=d({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{}},setup(e){const a=e;return(t,l)=>(c(),i(r(Z),N(j(a)),{default:u(()=>[f(t.$slots,"default")]),_:3},16))}}),Y=d({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(e){const a=e;return(t,l)=>(c(),i(r(O),D(a,{class:"h-full w-full object-cover"}),{default:u(()=>[f(t.$slots,"default")]),_:3},16))}}),ee=P("inline-flex items-center justify-center font-normal text-foreground select-none shrink-0 bg-secondary overflow-hidden",{variants:{size:{sm:"h-10 w-10 text-xs",base:"h-16 w-16 text-2xl",lg:"h-32 w-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}}),te=d({name:"FaAvatar",__name:"index",props:{src:{},fallback:{},shape:{},class:{}},setup(e){const a=e;return(t,l)=>(c(),i(r(Q),{shape:e.shape,class:b(a.class)},{default:u(()=>[w(r(Y),{src:e.src},null,8,["src"]),w(r(X),{class:"inline-flex"},{default:u(()=>[f(t.$slots,"default",{},()=>[T(V(e.fallback),1)])]),_:3})]),_:3},8,["shape","class"]))}});export{te as _};
