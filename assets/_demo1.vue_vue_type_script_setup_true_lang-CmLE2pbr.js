
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as L,aJ as z,s as H,n as A,a7 as J,c as y,o as _,W as T,b as Z,X as G,e as i,a4 as K,t as Q,h as U,F as tt,g as C}from"./index-H6QnEWHf.js";function W(t,e,o,l){return Number.parseFloat((e-l*e/t+o).toFixed(2))}function et(t){[...t.querySelectorAll("*")].forEach(e=>t.removeChild(e))}function ot(t){return t.value}function v(t,e){const o=document.createElementNS("http://www.w3.org/2000/svg",t);for(const l in e)o.setAttribute(l,e[l]);return o}function lt(t,e,o){if(et(t),e.length<=1)return;o=o||{},typeof e[0]=="number"&&(e=e.map(s=>({value:s})));const l=o.onmousemove,a=o.onmouseout,n="interactive"in o?o.interactive:!!l,k=o.spotRadius||2,d=k*2,V=o.cursorWidth||2,g=Number.parseFloat(t.attributes["stroke-width"].value),X=o.fetch||ot,b=e.map(s=>X(s)),B=Number.parseFloat(t.attributes.width.value)-d*2,x=Number.parseFloat(t.attributes.height.value),E=x-g*2-d,N=Math.max(...b),u=-1e3,D=b.length-1,I=B/D,p=[],M=W(N,E,g+k,b[0]);let $="M".concat(d," ").concat(M);b.forEach((s,f)=>{const r=f*I+d,c=W(N,E,g+k,s);p.push(Object.assign({},e[f],{index:f,x:r,y:c})),$+=" L ".concat(r," ").concat(c)});const P=v("path",{class:"sparkline--line",d:$,fill:"none"}),Y="".concat($," V ").concat(x," L ").concat(d," ").concat(x," Z"),O=v("path",{class:"sparkline--fill",d:Y,stroke:"none"});if(t.appendChild(O),t.appendChild(P),!n)return;const h=v("line",{class:"sparkline--cursor",x1:u,x2:u,y1:0,y2:x,"stroke-width":V}),w=v("circle",{class:"sparkline--spot",cx:u,cy:u,r:k});t.appendChild(h),t.appendChild(w);const F=v("rect",{width:t.attributes.width.value,height:t.attributes.height.value,style:"fill: transparent; stroke: transparent",class:"sparkline--interaction-layer"});t.appendChild(F),F.addEventListener("mouseout",s=>{h.setAttribute("x1",u.toString()),h.setAttribute("x2",u.toString()),w.setAttribute("cx",u.toString()),a&&a(s)}),F.addEventListener("mousemove",s=>{const f=s.offsetX;let r=p.find(q=>q.x>=f);r||(r=p[D]);const c=p[p.indexOf(r)-1];let m,R;c?(R=c.x+(r.x-c.x)/2,m=f>=R?r:c):m=r;const S=m.x,j=m.y;w.setAttribute("cx",S),w.setAttribute("cy",j),h.setAttribute("x1",S),h.setAttribute("x2",S),l&&l(s,m)})}const at={class:"sparkline"},st=["width","height","stroke-width","stroke","fill"],nt=L({name:"FaSparkline",__name:"index",props:{value:{},width:{default:100},height:{default:30},strokeWidth:{default:3},strokeColor:{default:"#dc2b33"},fillColor:{default:"transparent"},cursorColor:{default:"#dc2b33"},spotColor:{default:"#dc2b33"},tooltip:{type:Boolean,default:!1}},setup(t){z(a=>({v1f4c94fe:a.cursorColor,v1e4009dc:a.spotColor}));const e=t,o=H("sparklineRef"),l=A({show:!1,content:"",top:0,left:0});return J(()=>{lt(o.value,e.value,e.tooltip&&{onmousemove:(a,n)=>{l.value.show=!0,l.value.content=n.tooltip,l.value.top=a.offsetY,l.value.left=a.offsetX+20},onmouseout:()=>{l.value.show=!1}})}),(a,n)=>(_(),y("div",at,[(_(),y("svg",{ref_key:"sparklineRef",ref:o,width:t.width,height:t.height,"stroke-width":t.strokeWidth,stroke:t.strokeColor,fill:t.fillColor},null,8,st)),t.tooltip?T((_(),y("span",{key:0,class:"tooltip",style:K(["left: ".concat(i(l).left,"px"),"top: ".concat(i(l).top,"px")])},Q(i(l).content),5)),[[G,i(l).show]]):Z("",!0)]))}}),rt=U(nt,[["__scopeId","data-v-93dd89db"]]),ut=L({__name:"_demo1",setup(t){const e=A([1,5,2,4,8,3,7]),o=A([{tooltip:"值：1",value:1},{tooltip:"值：3",value:3},{tooltip:"值：5",value:5},{tooltip:"值：8",value:8},{tooltip:"值：4",value:4},{tooltip:"值：6",value:6},{tooltip:"值：9",value:9}]);return(l,a)=>{const n=rt;return _(),y(tt,null,[C(n,{value:i(e)},null,8,["value"]),C(n,{value:i(e),"stroke-color":"#409eff","fill-color":"#b3d8ff"},null,8,["value"]),C(n,{value:i(o),tooltip:""},null,8,["value"]),C(n,{value:i(o),tooltip:"","stroke-color":"#409eff","fill-color":"#b3d8ff","cursor-color":"#e6a23c","spot-color":"#909399"},null,8,["value"])],64)}}});export{ut as _};
