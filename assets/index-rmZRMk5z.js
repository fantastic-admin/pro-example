
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as F,ap as y,aq as M,x as g,s as T,n as h,a7 as U,r as m,l as q,o as z,e as o,w as n,g as d,i as x,L as C,h as S}from"./index-H6QnEWHf.js";import{a as V}from"./dictionary-2rfPmV2q.js";const L=F({__name:"index",props:y({parentId:{default:""},id:{default:""},tree:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:y(["addNode","editNode"],["update:modelValue"]),setup(_,{emit:k}){const s=_,b=k,f=M(_,"modelValue"),N=g(()=>s.id===""?"新增字典":"编辑字典");function v(t,l,u=!1){const i=[];return t.forEach(p=>{const a={...p};a.id===l||u?(a.disabled=!0,a.children&&(a.children=v(a.children,l,!0))):(a.disabled=!1,a.children&&(a.children=v(a.children,l,u))),i.push(a)}),i}const w=g(()=>v(s.tree,s.id)),E=T("formRef"),e=h({parentId:s.parentId,id:s.id,name:"",code:""}),B=h({name:[{required:!0,message:"请输入字典名称"}],code:[{required:!0,message:"请输入字典编码"}]});U(()=>{s.id!==""&&V.detail(s.id).then(t=>{e.value.id=t.data.id,e.value.name=t.data.name,e.value.code=t.data.code})});function R(){var t;(t=E.value)==null||t.validate(l=>{l&&(e.value.id===""?V.create(e.value).then(u=>{C.success("模拟新增成功"),b("addNode",{id:u.data.data,label:e.value.name,code:e.value.code}),c()}):V.edit(e.value).then(()=>{C.success("模拟编辑成功"),b("editNode",{id:e.value.id,label:e.value.name,code:e.value.code},e.value.parentId),c()}))})}function c(){f.value=!1}return(t,l)=>{const u=m("ElCascader"),i=m("ElFormItem"),p=m("ElInput"),a=m("ElForm"),I=m("ElButton"),D=m("ElDialog");return z(),q(D,{modelValue:f.value,"onUpdate:modelValue":l[3]||(l[3]=r=>f.value=r),title:o(N),width:"400px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",onClosed:c},{footer:n(()=>[d(I,{size:"large",onClick:c},{default:n(()=>[...l[4]||(l[4]=[x(" 取消 ",-1)])]),_:1}),d(I,{type:"primary",size:"large",onClick:R},{default:n(()=>[...l[5]||(l[5]=[x(" 确定 ",-1)])]),_:1})]),default:n(()=>[d(a,{ref_key:"formRef",ref:E,model:o(e),rules:o(B),"label-width":"80px"},{default:n(()=>[d(i,{label:"父级字典",prop:"parentId"},{default:n(()=>[d(u,{modelValue:o(e).parentId,"onUpdate:modelValue":l[0]||(l[0]=r=>o(e).parentId=r),options:o(w),props:{value:"id",emitPath:!1,checkStrictly:!0},"show-all-levels":!1,placeholder:"请选择父级字典，默认为根字典",clearable:""},null,8,["modelValue","options"])]),_:1}),d(i,{label:"字典名称",prop:"name"},{default:n(()=>[d(p,{modelValue:o(e).name,"onUpdate:modelValue":l[1]||(l[1]=r=>o(e).name=r),placeholder:"请输入字典名称",clearable:""},null,8,["modelValue"])]),_:1}),d(i,{label:"字典编码",prop:"code"},{default:n(()=>[d(p,{modelValue:o(e).code,"onUpdate:modelValue":l[2]||(l[2]=r=>o(e).code=r),placeholder:"请输入字典编码",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),A=S(L,[["__scopeId","data-v-768ae321"]]);export{A as default};
