
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as B,n as p,P as F,an as E,x as N,a7 as k,z as q,N as j,ao as I,c as L,o as S,A as V,f as D}from"./index-H6QnEWHf.js";const T=B({name:"FaParticlesBg",__name:"index",props:{color:{default:"#FFF"},quantity:{default:100},staticity:{default:50},ease:{default:50},class:{}},setup(X){const r=X,i=p(null),h=p(null),u=p(null),d=p([]),m=F({x:0,y:0}),e=F({w:0,h:0}),{x:w,y:z}=E(),{pixelRatio:f}=I(),Y=N(()=>{let a=r.color.replace(/^#/,"");a.length===3&&(a=a.split("").map(l=>l+l).join(""));const t=Number.parseInt(a,16),n=t>>16&255,s=t>>8&255,o=t&255;return"".concat(n," ").concat(s," ").concat(o)});k(()=>{i.value&&(u.value=i.value.getContext("2d")),x(),c(),window.addEventListener("resize",x)}),q(()=>{window.removeEventListener("resize",x)}),j([w,z],()=>{_()});function x(){R(),b()}function _(){if(i.value){const a=i.value.getBoundingClientRect(),{w:t,h:n}=e,s=w.value-a.left-t/2,o=z.value-a.top-n/2;s<t/2&&s>-t/2&&o<n/2&&o>-n/2&&(m.x=s,m.y=o)}}function R(){h.value&&i.value&&u.value&&(d.value.length=0,e.w=h.value.offsetWidth,e.h=h.value.offsetHeight,i.value.width=e.w*f.value,i.value.height=e.h*f.value,i.value.style.width="".concat(e.w,"px"),i.value.style.height="".concat(e.h,"px"),u.value.scale(f.value,f.value))}function M(){const a=Math.floor(Math.random()*e.w),t=Math.floor(Math.random()*e.h),n=0,s=0,o=Math.floor(Math.random()*2)+1,l=0,v=Number.parseFloat((Math.random()*.6+.1).toFixed(1)),g=(Math.random()-.5)*.2,$=(Math.random()-.5)*.2,A=.1+Math.random()*4;return{x:a,y:t,translateX:n,translateY:s,size:o,alpha:l,targetAlpha:v,dx:g,dy:$,magnetism:A}}function y(a,t=!1){if(u.value){const{x:n,y:s,translateX:o,translateY:l,size:v,alpha:g}=a;u.value.translate(o,l),u.value.beginPath(),u.value.arc(n,s,v,0,2*Math.PI),u.value.fillStyle="rgba(".concat(Y.value.split(" ").join(", "),", ").concat(g,")"),u.value.fill(),u.value.setTransform(f.value,0,0,f.value,0,0),t||d.value.push(a)}}function C(){u.value&&u.value.clearRect(0,0,e.w,e.h)}function b(){C();const a=r.quantity;for(let t=0;t<a;t++){const n=M();y(n)}}function P(a,t,n,s,o){const l=(a-t)*(o-s)/(n-t)+s;return l>0?l:0}function c(){C(),d.value.forEach((a,t)=>{const s=[a.x+a.translateX-a.size,e.w-a.x-a.translateX-a.size,a.y+a.translateY-a.size,e.h-a.y-a.translateY-a.size].reduce((l,v)=>Math.min(l,v)),o=Number.parseFloat(P(s,0,20,0,1).toFixed(2));if(o>1?(a.alpha+=.02,a.alpha>a.targetAlpha&&(a.alpha=a.targetAlpha)):a.alpha=a.targetAlpha*o,a.x+=a.dx,a.y+=a.dy,a.translateX+=(m.x/(r.staticity/a.magnetism)-a.translateX)/r.ease,a.translateY+=(m.y/(r.staticity/a.magnetism)-a.translateY)/r.ease,a.x<-a.size||a.x>e.w+a.size||a.y<-a.size||a.y>e.h+a.size){d.value.splice(t,1);const l=M();y(l)}else y({...a,x:a.x,y:a.y,translateX:a.translateX,translateY:a.translateY,alpha:a.alpha},!0)}),window.requestAnimationFrame(c)}return(a,t)=>(S(),L("div",{ref_key:"canvasContainerRef",ref:h,class:V(r.class),"aria-hidden":"true"},[D("canvas",{ref_key:"canvasRef",ref:i},null,512)],2))}});export{T as _};
