
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./UserOptions-1OZ3jcm6-ChPN5pX4.js","./index-Bnionyve.js","./index-DpF4sDjY.css","./vClickOutside-C6WiFswA-B2BXHGcD.js","./vue-data-ui-DO-nR8BN.js","./alert-Vqv_sKXu.js","./command.vue_vue_type_script_setup_true_lang-BupUAzs5.js","./index.vue_vue_type_script_setup_true_lang-BlKfdQqy.js","./vue-data-ui-D1HaM8UR.css","./img-BecE5qXd-BcsKpilD.js","./dom-to-png--BNgrTZV-Dq14aDuv.js"])))=>i.map(i=>d[i]);
import{bv as te,M as d,g,an as oe,Z as z,a1 as se,c as n,o as l,N as le,O as p,l as h,a as i,co as re,m as y,r as u,D as B,E as U,U as k,cA as ne,R as x,S as I,B as f,k as ue,n as A,ao as ie,cC as ve}from"./index-Bnionyve.js";import{s as ce,Q as G,g as de,p as pe,aa as me,K as fe,a1 as ge,e as he,r as ye}from"./vue-data-ui-DO-nR8BN.js";import{t as be,o as H}from"./useNestedProp-dJX_8vvZ-Dub3p3M4.js";import{m as ke}from"./usePrinter-DTzqpYKF-B2bIVIDD.js";import{a as xe}from"./useUserOptionState-BIvW1Kz7-KDDO9AXL.js";import{J as $e}from"./themes-AUNCOb2G-RAhReTPj.js";import{w as we}from"./Shape-CNXKB8O0-CSD830I9.js";import"./alert-Vqv_sKXu.js";import"./command.vue_vue_type_script_setup_true_lang-BupUAzs5.js";import"./index.vue_vue_type_script_setup_true_lang-BlKfdQqy.js";const _e=["id"],Ie={role:"cell"},Ce={role:"row"},Oe=["data-cell"],Pe={key:0,style:{display:"flex","flex-direction":"row",gap:"2px","align-items":"center"}},Fe=["height","width"],Ve={key:0,role:"cell","data-cell":"sum"},Re={key:1,role:"cell","data-cell":"average"},Se={key:2,role:"cell","data-cell":"median"},Ne={key:1,ref:"source",dir:"auto"},Me={__name:"vue-ui-table-heatmap",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},setup(K,{expose:Q}){te(e=>({cea75ac0:ee.value,v98a6fd0a:Y.value}));const X=ne(()=>ve(()=>import("./UserOptions-1OZ3jcm6-ChPN5pX4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),{vue_ui_table_heatmap:j}=be(),m=K,$=g(G()),v=g(!1),b=g(null),w=g(!1),C=g(0),D=oe();z(()=>{D["chart-background"]&&console.warn("VueUiTableHeatmap does not support the #chart-background slot.")});const a=d({get:()=>F(),set:e=>e}),{userOptionsVisible:_,setUserOptionsVisibility:O,keepUserOptionState:P}=xe({config:a.value});function F(){const e=H({userConfig:m.config,defaultConfig:j});return e.theme?{...H({userConfig:$e.vue_ui_table_heatmap[e.theme]||m.config,defaultConfig:e})}:e}se(()=>m.config,e=>{a.value=F(),_.value=!a.value.userOptions.showOnChartHover,S()},{deep:!0});const{isPrinting:J,isImaging:L,generatePdf:V,generateImage:R}=ke({elementId:"table_heatmap_".concat($.value),fileName:"vue-ui-table-heatmap",options:a.value.userOptions.print}),W=d(()=>a.value.table.responsiveBreakpoint),Z=d(()=>!!m.dataset&&m.dataset.length);z(()=>{S()});function S(){de(m.dataset)&&pe({componentName:"VueUiTableHeatmap",type:"dataset"});const e=new ResizeObserver(o=>{o.forEach(t=>{v.value=t.contentRect.width<W.value})});b.value&&e.observe(b.value)}const N=d(()=>m.dataset.map(e=>{const o=e.values.map(s=>isNaN(s)?0:s),t=o.reduce((s,r)=>s+r,0);return{...e,values:o,serieExtremes:{max:Math.max(...o),min:Math.min(...o)},sum:t,average:t/o.length,median:me(o),displayValues:[e.name,...e.values],id:G()}})),M=d(()=>{const e=N.value.flatMap(o=>o.values);return{min:Math.min(...e),max:Math.max(...e)}});function q(e,o){const t=a.value.style.heatmapColors.useIndividualScale;return ge(a.value.style.heatmapColors.min,a.value.style.heatmapColors.max,t?o.min:M.value.min,t?o.max:M.value.max,e)}const E=d(()=>N.value.map(e=>({...e,colors:e.displayValues.map(o=>isNaN(o)?a.value.style.backgroundColor:q(o,e.serieExtremes))}))),Y=d(()=>a.value.style.backgroundColor),ee=d(()=>"".concat(a.value.table.borderWidth,"px"));function T(e=null){ie(()=>{const o=E.value.map(r=>[[r.name],r.displayValues,[r.sum],[r.average],[r.median]]),t=[[[""],a.value.table.head.values,["sum"],["average"],["median"]]].concat(o),s=he(t);e?e(s):ye({csvContent:s,title:"vue-ui-table-heatmap"})})}function ae(e){w.value=e,C.value+=1}return Q({generatePdf:V,generateCsv:T,generateImage:R}),(e,o)=>(l(),n("div",{ref_key:"tableContainer",ref:b,style:k("width:100%; overflow-x:auto; container-type: inline-size;padding-top:".concat(a.value.userOptions.show?"36px":"","; ").concat(w.value?"vue-data-ui-wrapper-fullscreen":"","; position:relative;")),class:A({"vue-data-ui-component":!0,"vue-ui-responsive":v.value}),id:"table_heatmap_".concat($.value),onMouseenter:o[0]||(o[0]=()=>i(O)(!0)),onMouseleave:o[1]||(o[1]=()=>i(O)(!1))},[a.value.userOptions.show&&Z.value&&(i(P)||i(_))?(l(),le(i(X),{ref:"details",key:"user_option_".concat(C.value),backgroundColor:a.value.style.backgroundColor,color:a.value.style.color,isPrinting:i(J),isImaging:i(L),uid:$.value,hasPdf:a.value.userOptions.buttons.pdf,hasXls:a.value.userOptions.buttons.csv,hasImg:a.value.userOptions.buttons.img,hasFullscreen:a.value.userOptions.buttons.fullscreen,isFullscreen:w.value,titles:{...a.value.userOptions.buttonTitles},chartElement:b.value,position:a.value.userOptions.position,callbacks:a.value.userOptions.callbacks,printScale:a.value.userOptions.print.scale,onToggleFullscreen:ae,onGeneratePdf:i(V),onGenerateCsv:T,onGenerateImage:i(R),style:k({visibility:i(P)?i(_)?"visible":"hidden":"visible"})},re({_:2},[e.$slots.menuIcon?{name:"menuIcon",fn:y(({isOpen:t,color:s})=>[u(e.$slots,"menuIcon",B(U({isOpen:t,color:s})),void 0,!0)]),key:"0"}:void 0,e.$slots.optionPdf?{name:"optionPdf",fn:y(()=>[u(e.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,e.$slots.optionCsv?{name:"optionCsv",fn:y(()=>[u(e.$slots,"optionCsv",{},void 0,!0)]),key:"2"}:void 0,e.$slots.optionImg?{name:"optionImg",fn:y(()=>[u(e.$slots,"optionImg",{},void 0,!0)]),key:"3"}:void 0,e.$slots.optionFullscreen?{name:"optionFullscreen",fn:y(({toggleFullscreen:t,isFullscreen:s})=>[u(e.$slots,"optionFullscreen",B(U({toggleFullscreen:t,isFullscreen:s})),void 0,!0)]),key:"4"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasXls","hasImg","hasFullscreen","isFullscreen","titles","chartElement","position","callbacks","printScale","onGeneratePdf","onGenerateImage","style"])):p("",!0),h("table",{class:A({"vue-ui-table-heatmap":!0}),style:k("width:100%;font-family:".concat(a.value.style.fontFamily,";background:").concat(a.value.style.backgroundColor,";"))},[h("caption",null,[u(e.$slots,"caption",{},void 0,!0)]),h("thead",null,[h("tr",{role:"row",style:k("background:".concat(a.value.table.head.backgroundColor,";color:").concat(a.value.table.head.color))},[(l(!0),n(x,null,I(a.value.table.head.values,(t,s)=>(l(),n("th",Ie,[u(e.$slots,"head",f({ref_for:!0},{value:t,rowIndex:s,type:typeof t,isResponsive:v.value}),void 0,!0)]))),256))],4)]),h("tbody",null,[(l(!0),n(x,null,I(E.value,(t,s)=>(l(),n("tr",Ce,[(l(!0),n(x,null,I(t.displayValues,(r,c)=>(l(),n("td",{role:"cell","data-cell":a.value.table.head.values[c]},[t.color&&c===0?(l(),n("div",Pe,[t.color?(l(),n("svg",{key:0,height:a.value.style.shapeSize,width:a.value.style.shapeSize,viewBox:"0 0 20 20",style:{background:"none",overflow:"visible"}},[ue(we,{plot:{x:10,y:10},color:t.color,radius:9,shape:t.shape||"circle"},null,8,["color","shape"])],8,Fe)):p("",!0),u(e.$slots,"rowTitle",f({ref_for:!0},{value:r,rowIndex:s,colIndex:c,type:typeof r,isResponsive:v.value}),void 0,!0)])):(l(),n(x,{key:1},[c===0?u(e.$slots,"rowTitle",f({key:0,ref_for:!0},{value:r,rowIndex:s,colIndex:c,type:typeof r,isResponsive:v.value}),void 0,!0):p("",!0),c>0?u(e.$slots,"cell",f({key:1,ref_for:!0},{value:r,rowIndex:s,colIndex:c,type:typeof r,isResponsive:v.value,color:t.colors[c],textColor:i(fe)(t.colors[c])}),void 0,!0):p("",!0)],64))],8,Oe))),256)),a.value.table.showSum?(l(),n("td",Ve,[u(e.$slots,"sum",f({ref_for:!0},{value:t.sum,rowIndex:s,isResponsive:v.value}),void 0,!0)])):p("",!0),a.value.table.showAverage?(l(),n("td",Re,[u(e.$slots,"average",f({ref_for:!0},{value:t.average,rowIndex:s,isResponsive:v.value}),void 0,!0)])):p("",!0),a.value.table.showMedian?(l(),n("td",Se,[u(e.$slots,"median",f({ref_for:!0},{value:t.median,rowIndex:s,isResponsive:v.value}),void 0,!0)])):p("",!0)]))),256))])],4),e.$slots.source?(l(),n("div",Ne,[u(e.$slots,"source",{},void 0,!0)],512)):p("",!0)],46,_e))}},Xe=ce(Me,[["__scopeId","data-v-8e88d7ae"]]);export{Xe as default};
