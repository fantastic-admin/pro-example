
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as i,bx as g,by as L,n as m,l as d,o as c,w as u,M as f,e as r,bz as y,y as b,bW as x,b as k,x as R,a7 as $,ae as B,aB as E,N as M,W as z,X as I,A as S,B as F,aD as N,aE as j,S as D,be as P,g as w,i as T,t as W}from"./index-H6QnEWHf.js";const[q,V]=L("AvatarRoot");var U=i({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){return g(),V({imageLoadingStatus:m("idle")}),(a,t)=>(c(),d(r(y),{"as-child":a.asChild,as:a.as},{default:u(()=>[f(a.$slots,"default")]),_:3},8,["as-child","as"]))}}),X=U,G=i({__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){const a=e,t=q();g();const l=m(a.delayMs===void 0);return b(n=>{if(a.delayMs&&x){const o=window.setTimeout(()=>{l.value=!0},a.delayMs);n(()=>{window.clearTimeout(o)})}}),(n,o)=>l.value&&r(t).imageLoadingStatus.value!=="loaded"?(c(),d(r(y),{key:0,"as-child":n.asChild,as:n.as},{default:u(()=>[f(n.$slots,"default")]),_:3},8,["as-child","as"])):k("v-if",!0)}}),H=G;function A(e,a){return e?a?(e.src!==a&&(e.src=a),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function J(e,{referrerPolicy:a,crossOrigin:t}={}){const l=m(!1),n=m(null),o=R(()=>l.value?(!n.value&&x&&(n.value=new window.Image),n.value):null),v=m(A(o.value,e.value)),_=p=>()=>{l.value&&(v.value=p)};return $(()=>{l.value=!0,b(p=>{const s=o.value;if(!s)return;v.value=A(s,e.value);const h=_("loaded"),C=_("error");s.addEventListener("load",h),s.addEventListener("error",C),a!=null&&a.value&&(s.referrerPolicy=a.value),typeof(t==null?void 0:t.value)=="string"&&(s.crossOrigin=t.value),p(()=>{s.removeEventListener("load",h),s.removeEventListener("error",C)})})}),B(()=>{l.value=!1}),v}var K=i({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(e,{emit:a}){const t=e,l=a,{src:n,referrerPolicy:o,crossOrigin:v}=E(t);g();const _=q(),p=J(n,{referrerPolicy:o,crossOrigin:v});return M(p,s=>{l("loadingStatusChange",s),s!=="idle"&&(_.imageLoadingStatus.value=s)},{immediate:!0}),(s,h)=>z((c(),d(r(y),{role:"img","as-child":s.asChild,as:s.as,src:r(n),"referrer-policy":r(o)},{default:u(()=>[f(s.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[I,r(p)==="loaded"]])}}),Q=K;const Y=i({__name:"Avatar",props:{class:{},size:{default:"sm"},shape:{default:"circle"}},setup(e){const a=e;return(t,l)=>(c(),d(r(X),{class:S(r(F)(r(ee)({size:e.size,shape:e.shape}),a.class))},{default:u(()=>[f(t.$slots,"default")]),_:3},8,["class"]))}}),Z=i({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{}},setup(e){const a=e;return(t,l)=>(c(),d(r(H),N(j(a)),{default:u(()=>[f(t.$slots,"default")]),_:3},16))}}),O=i({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(e){const a=e;return(t,l)=>(c(),d(r(Q),D(a,{class:"h-full w-full object-cover"}),{default:u(()=>[f(t.$slots,"default")]),_:3},16))}}),ee=P("inline-flex items-center justify-center font-normal text-foreground select-none shrink-0 bg-secondary overflow-hidden",{variants:{size:{sm:"h-10 w-10 text-xs",base:"h-16 w-16 text-2xl",lg:"h-32 w-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}}),te=i({name:"FaAvatar",__name:"index",props:{src:{},fallback:{},shape:{},class:{}},setup(e){const a=e;return(t,l)=>(c(),d(r(Y),{shape:e.shape,class:S(a.class)},{default:u(()=>[w(r(O),{src:e.src},null,8,["src"]),w(r(Z),{class:"inline-flex"},{default:u(()=>[f(t.$slots,"default",{},()=>[T(W(e.fallback),1)])]),_:3})]),_:3},8,["shape","class"]))}});export{te as _};
