
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as K,K as Q,L as X,X as j,e as q,bd as J,g as I,ac as $,a1 as T,ao as B,M as D,N as F,o as r,Q as W,a as s,v as V,m,k as b,H as Y,P as Z,l as x,w as tt,bC as et,be as st,n as z,c as f,R as at,S as ot,O as U,G as it,p as nt,aF as S,V as lt}from"./index-Bnionyve.js";import{m as rt}from"./index-Cm0HenuK.js";import{S as ct}from"./sortable.esm-BMgLh4Kk.js";import{u as dt}from"./useTabbar-DQUDAxhI.js";const ut={class:"max-h-80 w-40 flex flex-col gap-2"},bt=["placeholder"],ft=["title","onClick"],pt=["onClick"],ht=["onClick"],E=K({name:"TabbarMoreAction",__name:"moreAction",setup(w){const d=Q(),R=X(),v=j(),i=dt(),{t:p}=q(),{generateI18nTitle:h}=J(),u=I(!1),l=I(""),P=$("searchInputRef");T(u,a=>{a?B(()=>{var e;(e=P.value)==null||e.focus()}):l.value=""});const L=D(()=>{let a=[];return a=v.list.filter(e=>{var n,g;let o=!1;return(h(e.title).toString().includes(l.value)||((g=(n=rt(h(e.title).toString(),l.value,{continuous:!0}))==null?void 0:n.length)!=null?g:0)>0)&&(o=!0),o}),a}),k=D(()=>i.getId()),y=$("dropdownTabContainerRef"),C=I(!1);let _;T(()=>y.value,a=>{a?(_=new ct(a,{animation:200,ghostClass:"opacity-0",draggable:".tab",onStart:()=>{C.value=!0},onEnd:()=>{C.value=!1},onMove:e=>e.dragged.classList.contains("pinned")?e.related.classList.contains("pinned"):!e.related.classList.contains("pinned"),onUpdate:e=>{e.newIndex!==void 0&&e.oldIndex!==void 0&&v.sort(e.newIndex,e.oldIndex)}}),R.mode==="mobile"&&_.option("disabled",!0)):_.destroy()}),T(l,a=>{B(()=>{_.option("disabled",!!a)})});function N(a,e,o){let n;return!a&&e||a&&!o?n=e:a&&o&&(n=o),n}function G(a){d.push(a),u.value=!1}return(a,e)=>{const o=Z,n=Y,g=st,H=W;return r(),F(H,{open:s(u),"onUpdate:open":e[3]||(e[3]=t=>V(u)?u.value=t:null),align:"end",items:[[{label:s(p)("closeOtherSide"),icon:"i-mdi:close",handle:()=>s(i).closeOtherSide(),disabled:!s(i).checkCloseOtherSide()},{label:s(p)("closeLeftSide"),icon:"i-mdi:arrow-expand-left",handle:()=>s(i).closeLeftSide(),disabled:!s(i).checkCloseLeftSide()},{label:s(p)("closeRightSide"),icon:"i-mdi:arrow-expand-right",handle:()=>s(i).closeRightSide(),disabled:!s(i).checkCloseRightSide()}]],class:"min-w-auto p-0"},{footer:m(()=>[x("div",ut,[tt(x("input",{ref_key:"searchInputRef",ref:P,"onUpdate:modelValue":e[0]||(e[0]=t=>V(l)?l.value=t:null),placeholder:s(p)("searchPlaceholder"),class:"h-8 border border-input rounded-md bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none"},null,8,bt),[[et,s(l)]]),b(g,{scrollbar:!1,mask:"","gradient-color":"hsl(var(--popover))"},{default:m(()=>[x("div",{ref_key:"dropdownTabContainerRef",ref:y,class:z(["tabs space-y-1",{dragging:s(C)}])},[(r(!0),f(at,null,ot(s(L),t=>{var M,O;return r(),f("div",{key:t.tabMerge==="routeName"&&t.routeName?t.routeName:t.tabId,class:z(["relative h-8 rounded-md px-2 tab",{"bg-accent":t.tabId===s(k),pinned:t.isPermanent||t.isPin}])},[(r(),f("div",{key:t.tabId,class:"title",title:((M=t.customTitleList.find(c=>c.fullPath===t.fullPath))==null?void 0:M.title)||s(h)(t.title),onClick:c=>G(t.fullPath)},[s(R).settings.tabbar.enableIcon&&N(t.tabId===s(k),t.icon,t.activeIcon)?(r(),F(o,{key:0,name:N(t.tabId===s(k),t.icon,t.activeIcon)},null,8,["name"])):U("",!0),it(" "+nt(((O=t.customTitleList.find(c=>c.fullPath===t.fullPath))==null?void 0:O.title)||s(h)(t.title)),1)],8,ft)),!t.isPermanent&&t.isPin?(r(),f("div",{key:0,class:"action-icon",onClick:S(c=>s(v).unPin(t.tabId),["stop"]),onDblclick:e[1]||(e[1]=S(()=>{},["stop"]))},[b(o,{name:"i-ri:pushpin-2-fill"})],40,pt)):!t.isPermanent&&s(L).length>1?(r(),f("div",{key:1,class:"action-icon",onClick:S(c=>s(i).closeById(t.tabId),["stop"]),onDblclick:e[2]||(e[2]=S(()=>{},["stop"]))},[b(o,{name:"i-ri:close-fill"})],40,ht)):U("",!0)],2)}),128))],2)]),_:1})])]),default:m(()=>[b(n,{variant:"outline",size:"icon",class:"h-7 w-7"},{default:m(()=>[b(o,{name:"i-ep:caret-bottom"})]),_:1})]),_:1},8,["open","items"])}}});function A(w){const d=w;d.__i18n=d.__i18n||[],d.__i18n.push({locale:"",resource:{"zh-cn":{searchPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"搜索..."}},searchTabs:{t:0,b:{t:2,i:[{t:3}],s:"搜索标签页"}},closeOtherSide:{t:0,b:{t:2,i:[{t:3}],s:"关闭其它标签页"}},closeLeftSide:{t:0,b:{t:2,i:[{t:3}],s:"关闭左侧标签页"}},closeRightSide:{t:0,b:{t:2,i:[{t:3}],s:"关闭右侧标签页"}}},"zh-tw":{searchPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"搜索..."}},searchTabs:{t:0,b:{t:2,i:[{t:3}],s:"搜索標籤頁"}},closeOtherSide:{t:0,b:{t:2,i:[{t:3}],s:"關閉其它標籤頁"}},closeLeftSide:{t:0,b:{t:2,i:[{t:3}],s:"關閉左側標籤頁"}},closeRightSide:{t:0,b:{t:2,i:[{t:3}],s:"關閉右側標籤頁"}}},en:{searchPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Search..."}},searchTabs:{t:0,b:{t:2,i:[{t:3}],s:"Search Tabs"}},closeOtherSide:{t:0,b:{t:2,i:[{t:3}],s:"Close Otherside Tabs"}},closeLeftSide:{t:0,b:{t:2,i:[{t:3}],s:"Close Leftside Tabs"}},closeRightSide:{t:0,b:{t:2,i:[{t:3}],s:"Close Rightside Tabs"}}}}})}typeof A=="function"&&A(E);const vt=lt(E,[["__scopeId","data-v-d383d884"]]);export{vt as default};
