
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PackageVersion-By5ZZJ0U-vEde17m7.js","./index-H6QnEWHf.js","./index-BDMvhiMS.css","./Tooltip-D0pGX8qz-DeKbv9Hp.js","./vue-data-ui-3mUtIY8T.js","./alert-yicQvtMn.js","./command.vue_vue_type_script_setup_true_lang-Diw_3237.js","./index.vue_vue_type_script_setup_true_lang-ByxJxKu_.js","./vue-data-ui-C46fMXq5.css"])))=>i.map(i=>d[i]);
import{av as ze,a7 as Q,n as v,aB as Pe,N as Z,x as _,c as n,o as r,b as y,g as ee,l as Oe,a4 as g,f as c,t as S,e as d,aC as te,F as x,q as B,A as O,w as le,M as R,aD as oe,aE as ae,aH as re}from"./index-H6QnEWHf.js";import{s as Te,J as ne,x as Ne,v as Le,o as u,u as E,$ as Ve,E as je,A as se,a as Me,F as U,d as Re,w as ie,X as ue,L as de,g as Ue}from"./vue-data-ui-3mUtIY8T.js";import{s as Je,i as J}from"./useNestedProp-DaR1dBmj-DbQzF8J-.js";import{T as Ye,j as qe}from"./BaseScanner-BMpwQAfz-CIrlPhSG.js";import{i as We}from"./useThemeCheck-DGJ31Vi5-CGxdxkCJ.js";import{o as Xe}from"./useChartAccessibility-9icAAmYg-CCalOnR6.js";import"./alert-yicQvtMn.js";import"./command.vue_vue_type_script_setup_true_lang-Diw_3237.js";import"./index.vue_vue_type_script_setup_true_lang-ByxJxKu_.js";const ce={style:{backgroundColor:"#1A1A1A",bar:{gradient:{underlayerColor:"#FFFFFF"}},legend:{name:{color:"#CCCCCC"},value:{color:"#CCCCCC"},percentage:{color:"#CCCCCC"}},title:{color:"#CCCCCC",subtitle:{color:"#757575"}},tooltip:{backgroundColor:"#1A1A1A",backgroundOpacity:70,color:"#CCCCCC",borderColor:"#5A5A5A"}}},ve={style:{backgroundColor:"#FFF8E1",bar:{gradient:{underlayerColor:"#FFF8E1"}},legend:{name:{color:"#424242"},value:{color:"#424242"},percentage:{color:"#424242"}},title:{color:"#424242",subtitle:{color:"#757575"}},tooltip:{backgroundColor:"#FFECB3",backgroundOpacity:30,color:"#424242",borderColor:"#FF8A65"}}},pe={style:{backgroundColor:"#1E1E1E",bar:{gradient:{underlayerColor:"#FFF8E1"}},legend:{name:{color:"#BDBDBD"},value:{color:"#BDBDBD"},percentage:{color:"#BDBDBD"}},title:{color:"#FFF8E1",subtitle:{color:"#BDBDBD"}},tooltip:{backgroundColor:"#1E1E1E",backgroundOpacity:30,color:"#FFF8E1",borderColor:"#FF8A65"}}},ge={style:{backgroundColor:"#1A1A1A",bar:{gradient:{underlayerColor:"#1A1A1A"}},legend:{name:{color:"#99AA99"},value:{color:"#AACCAA"},percentage:{color:"#99CC99"}},title:{color:"#66CC66",subtitle:{color:"#99AA99"}}}},fe={style:{backgroundColor:"#fbfafa",bar:{gradient:{underlayerColor:"#fbfafa"}},legend:{name:{color:"#8A9892"},value:{color:"#A0AC94"},percentage:{color:"#8A9892"}},title:{color:"#8A9892",subtitle:{color:"#99AA99"}}}},ye={style:{backgroundColor:"#f6f6fb",bar:{gradient:{underlayerColor:"#f6f6fb"}},legend:{name:{color:"#50606C"},value:{color:"#8A9892"},percentage:{color:"#61747E"}},title:{color:"#50606C",subtitle:{color:"#718890"}}}},he={default:{},dark:ce,celebration:ve,celebrationNight:pe,hack:ge,zen:fe,concrete:ye},_t=Object.freeze(Object.defineProperty({__proto__:null,celebration:ve,celebrationNight:pe,concrete:ye,dark:ce,default:he,hack:ge,zen:fe},Symbol.toStringTag,{value:"Module"})),Ge=["xmlns","viewBox"],He=["id"],Ke=["stop-color"],Qe=["stop-color"],Ze=["stop-color"],et={id:"stackPill",clipPathUnits:"objectBoundingBox"},tt=["fill"],lt={key:0,"clip-path":"url(#stackPill)"},ot=["x","width","height","fill"],at=["x","width","height","fill","stroke"],rt=["x","width","height","onClick","onMouseenter","onMouseleave"],nt=["width","height","rx"],st=["onClick"],it={style:{display:"flex","flex-direction":"row","align-items":"center",gap:"4px","justify-content":"center"}},ut=["height","width"],dt=["id"],ct=["stop-color"],vt=["stop-color"],pt=["fill"],gt={key:2,ref:"source",dir:"auto"},ft={__name:"vue-ui-sparkstackbar",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectDatapoint"],setup(be,{expose:me,emit:Ce}){const ke=te(()=>re(()=>import("./PackageVersion-By5ZZJ0U-vEde17m7.js"),__vite__mapDeps([0,1,2]),import.meta.url)),xe=te(()=>re(()=>import("./Tooltip-D0pGX8qz-DeKbv9Hp.js"),__vite__mapDeps([3,4,1,2,5,6,7,8]),import.meta.url)),{vue_ui_sparkstackbar:we}=Je(),{isThemeValid:Ae,warnInvalidTheme:$e}=We(),b=be,_e=ze();Q(()=>{_e["chart-background"]&&console.warn("VueUiSparkStackbar does not support the #chart-background slot.")});const Y=v(null),D=v(ne()),T=v(!1),N=v(""),e=v(L()),{loading:w,FINAL_DATASET:m}=Ye({...Pe(b),FINAL_CONFIG:e,prepareConfig:L,skeletonDataset:[{name:"_",value:8,color:"#808080"},{name:"_",value:5,color:"#ADADAD"},{name:"_",value:3,color:"#DBDBDB"}],skeletonConfig:Ne({defaultConfig:e.value,userConfig:{style:{backgroundColor:"#99999930",animation:{show:!1},bar:{gradient:{inderlayerColor:"#6A6A6A"}},title:{backgroundColor:"transparent"}}}})}),{svgRef:Fe}=Xe({config:e.value.style.title});function L(){const t=J({userConfig:b.config,defaultConfig:we}),o=t.theme;if(!o)return t;if(!Ae.value(t))return $e(t),t;const l=J({userConfig:he[o]||b.config,defaultConfig:t}),a=J({userConfig:b.config,defaultConfig:l});return{...a,customPalette:a.customPalette.length?a.customPalette:Le[o]||u}}Z(()=>b.config,t=>{e.value=L(),X()},{deep:!0}),Z(()=>m.value,t=>{C.value=m.value.map((o,l)=>({...o,color:o.color?E(o.color):F.value[l]||u[l]||u[l%u.length]})),q()},{deep:!0});const F=_(()=>Ve(e.value.customPalette)),C=v(m.value.map((t,o)=>({...t,value:e.value.style.animation.show?0:t.value||0,color:t.color?E(t.color):F.value[o]||u[o]||u[o%u.length]}))),k=v(!0);function q(){if(!e.value.style.animation.show){k.value=!1;return}const t=e.value.style.animation.animationFrames,o=m.value.map(s=>s.value||0),l=o.map(s=>s/t),a=o.reduce((s,i)=>s+i,0);let h=0;k.value=!0,C.value=m.value.map((s,i)=>({...s,value:0,color:s.color?E(s.color):F.value[i]||u[i]||u[i%u.length]}));function P(){h+=a/t,h<a?(C.value=C.value.map((s,i)=>({...s,value:Math.min(s.value+l[i],o[i]),color:s.color?E(s.color):F.value[i]||u[i]||u[i%u.length]})),requestAnimationFrame(P)):(k.value=!1,C.value=m.value.map((s,i)=>({...s,value:o[i],color:s.color?E(s.color):F.value[i]||u[i]||u[i%u.length],id:ne()})))}P()}Q(()=>{X()});const W=_(()=>e.value.debug);function X(){je(b.dataset)?se({componentName:"VueUiSparkStackbar",type:"dataset",debug:W.value}):b.dataset.forEach((t,o)=>{Me({datasetObject:t,requiredAttributes:["name","value"]}).forEach(l=>{se({componentName:"VueUiSparkStackbar",type:"datasetSerieAttribute",property:l,index:o,debug:W.value})})}),q()}const f=v({width:500,height:16}),p=v([]),G=_(()=>m.value.map(t=>t.value||0).filter((t,o)=>!p.value.includes(o)).reduce((t,o)=>t+o,0)),A=_(()=>C.value.map((t,o)=>{const l=t.value||0,a=l/G.value,h=isNaN(a)?0:a,P=h*f.value.width;return{...t,value:l,proportion:h,width:P,seriesIndex:o,proportionLabel:U({v:h*100,s:"%",r:e.value.style.legend.percentage.rounding})}})),V=_(()=>A.value.filter((t,o)=>!p.value.includes(o)));function j(t){p.value.includes(t)?p.value=p.value.filter(o=>o!==t):p.value.length<C.value.length-1&&p.value.push(t)}function H(t){return A.value.length?A.value.find(l=>l.name===t)||(e.value.debug&&console.warn('VueUiSparkStackbar - Series name not found "'.concat(t,'"')),null):(e.value.debug&&console.warn("VueUiSparkStackbar - There are no series to show."),null)}function Se(t){const o=H(t);o!==null&&p.value.includes(o.id)&&j(o.seriesIndex)}function Be(t){const o=H(t);o!==null&&(p.value.includes(o.id)||j(o.seriesIndex))}const I=_(()=>{let t=0;const o=[];for(let l=0;l<V.value.length;l+=1)o.push({...V.value[l],start:t}),t+=V.value[l].width;return o}),Ee=Ce;function K(t,o,l=!1){Ee("selectDatapoint",{datapoint:t,index:o}),e.value.events.datapointClick&&!l&&e.value.events.datapointClick({datapoint:t,seriesIndex:t.seriesIndex})}const M=v(null),z=v(!1),$=v(null);function De({datapoint:t,seriesIndex:o}){T.value=!1,$.value=null,e.value.events.datapointLeave&&e.value.events.datapointLeave({datapoint:t,seriesIndex:t.seriesIndex})}function Ie({datapoint:t,seriesIndex:o}){if(e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:t,seriesIndex:t.seriesIndex}),!e.value.style.tooltip.show)return;M.value={datapoint:t,seriesIndex:o,config:e.value,series:A.value},T.value=!0,$.value=o;const l=e.value.style.tooltip.customFormat;if(Ue(l))try{const a=l({seriesIndex:t.seriesIndex,datapoint:t,series:A.value,config:e.value});typeof a=="string"&&(N.value=a,z.value=!0)}catch(a){console.warn("Custom format cannot be applied."),z.value=!1}if(!z.value){let a="";a+='<div style="width:100%;text-align:center;border-bottom:1px solid '.concat(e.value.style.tooltip.borderColor,';padding-bottom:6px;margin-bottom:3px;">').concat(t.name,"</div>"),a+='<div style="display:flex;flex-direction:row;gap:6px;align-items:center;"><svg viewBox="0 0 12 12" height="14" width="14"><circle cx="6" cy="6" r="6" stroke="none" fill="'.concat(t.color,'"/></svg>'),a+="<b>".concat(t.proportionLabel,"</b>"),a+="<span>(".concat(de(e.value.style.legend.value.formatter,t.value,U({p:e.value.style.legend.value.prefix,v:t.value,s:e.value.style.legend.value.suffix,r:e.value.style.legend.value.rounding}),{datapoint:t,seriesIndex:o}),")</span>"),N.value="<div>".concat(a,"</div>")}}return me({hideSeries:Be,showSeries:Se}),(t,o)=>(r(),n("div",{class:"vue-data-ui-component vue-ui-spark-stackbar",ref_key:"sparkstackbarChart",ref:Y,style:g("width:100%; background:".concat(e.value.style.backgroundColor))},[e.value.style.title.text?(r(),n("div",{key:0,style:g("width:calc(100% - 12px);background:transparent;margin:0 auto;margin:".concat(e.value.style.title.margin,";padding: 0 6px;text-align:").concat(e.value.style.title.textAlign))},[c("div",{class:"atom-title",style:g("font-size:".concat(e.value.style.title.fontSize,"px;color:").concat(e.value.style.title.color,";font-weight:").concat(e.value.style.title.bold?"bold":"normal"))},S(e.value.style.title.text),5),e.value.style.title.subtitle.text?(r(),n("div",{key:0,class:"atom-subtitle",style:g("font-size:".concat(e.value.style.title.subtitle.fontSize,"px;color:").concat(e.value.style.title.subtitle.color,";font-weight:").concat(e.value.style.title.subtitle.bold?"bold":"normal"))},S(e.value.style.title.subtitle.text),5)):y("",!0)],4)):y("",!0),(r(),n("svg",{ref_key:"svgRef",ref:Fe,xmlns:d(Re),width:"100%",viewBox:"0 0 ".concat(f.value.width," ").concat(f.value.height)},[ee(d(ke)),c("defs",null,[(r(!0),n(x,null,B(I.value,(l,a)=>(r(),n("linearGradient",{key:"stack_gradient_".concat(a),gradientTransform:"rotate(90)",id:"stack_gradient_".concat(a,"_").concat(D.value)},[c("stop",{offset:"0%","stop-color":l.color},null,8,Ke),c("stop",{offset:"50%","stop-color":d(ie)(d(ue)(l.color,.05),100-e.value.style.bar.gradient.intensity)},null,8,Qe),c("stop",{offset:"100%","stop-color":l.color},null,8,Ze)],8,He))),128)),c("clipPath",et,[c("rect",{x:"0.005",y:"-2",width:"0.99",height:"5",rx:"3",ry:"3",fill:e.value.style.backgroundColor},null,8,tt)])]),G.value>0?(r(),n("g",lt,[(r(!0),n(x,null,B(I.value,(l,a)=>(r(),n("rect",{key:"stack_underlayer_".concat(a),x:l.start,y:0,width:l.width,height:f.value.height,fill:e.value.style.bar.gradient.underlayerColor,class:O({animated:!k.value&&!d(w)}),style:g({opacity:$.value!==null&&e.value.style.tooltip.show?$.value===a?1:.5:1})},null,14,ot))),128)),(r(!0),n(x,null,B(I.value,(l,a)=>(r(),n("rect",{key:"stack_".concat(a),x:l.start,y:0,width:l.width,height:f.value.height,fill:e.value.style.bar.gradient.show?"url(#stack_gradient_".concat(a,"_").concat(D.value,")"):l.color,stroke:e.value.style.backgroundColor,"stroke-linecap":"round",class:O({animated:!k.value&&!d(w)}),style:g({opacity:$.value!==null&&e.value.style.tooltip.show?$.value===a?1:.5:1})},null,14,at))),128)),(r(!0),n(x,null,B(I.value,(l,a)=>(r(),n("rect",{key:"stack_trap_".concat(a),x:l.start,y:0,width:l.width,height:f.value.height,fill:"transparent",stroke:"none",class:O({animated:!k.value&&!d(w)}),onClick:()=>K(l,a),onMouseenter:()=>Ie({datapoint:l,seriesIndex:a}),onMouseleave:h=>De({datapoint:l,seriesIndex:a})},null,42,rt))),128))])):(r(),n("rect",{key:1,x:2,y:1,width:f.value.width-4,height:f.value.height-2,stroke:"#CCCCCC","stroke-width":"2",fill:"transparent",rx:(f.value.height-4)/2},null,8,nt))],8,Ge)),e.value.style.legend.show?(r(),n("div",{key:1,style:g("background:transparent;margin:0 auto;margin:".concat(e.value.style.legend.margin,";justify-content:").concat(e.value.style.legend.textAlign==="left"?"flex-start":e.value.style.legend.textAlign==="right"?"flex-end":"center")),class:"vue-ui-sparkstackbar-legend"},[(r(!0),n(x,null,B(A.value,(l,a)=>(r(),n("div",{style:g("font-size:".concat(e.value.style.legend.fontSize,"px;")),class:O({"vue-ui-sparkstackbar-legend-item":!0,"vue-ui-sparkstackbar-legend-item-unselected":p.value.includes(a)}),onClick:h=>{j(a),K(l,a,!0)}},[c("div",it,[(r(),n("svg",{height:"".concat(e.value.style.legend.fontSize,"px"),width:"".concat(e.value.style.legend.fontSize,"px"),viewBox:"0 0 10 10"},[c("defs",null,[c("radialGradient",{id:"legend_grad_".concat(a,"-").concat(D.value)},[c("stop",{offset:"0%","stop-color":d(w)?"#FFFFFF":d(ie)(d(ue)(l.color,.05),100-e.value.style.bar.gradient.intensity)},null,8,ct),c("stop",{offset:"100%","stop-color":l.color},null,8,vt)],8,dt)]),c("circle",{cx:5,cy:5,r:5,fill:e.value.style.bar.gradient.show?"url(#legend_grad_".concat(a,"-").concat(D.value,")"):l.color},null,8,pt)],8,ut)),d(w)?y("",!0):(r(),n(x,{key:0},[c("span",{style:g("color:".concat(e.value.style.legend.name.color,"; font-weight:").concat(e.value.style.legend.name.bold?"bold":"normal"))},S(l.name),5),k.value?y("",!0):(r(),n(x,{key:0},[e.value.style.legend.percentage.show?(r(),n("span",{key:0,style:g("font-weight:".concat(e.value.style.legend.percentage.bold?"bold":"normal",";color:").concat(e.value.style.legend.percentage.color))},S(p.value.includes(a)?" - ":l.proportionLabel),5)):y("",!0),e.value.style.legend.value.show?(r(),n("span",{key:1,style:g("font-weight:".concat(e.value.style.legend.value.bold?"bold":"normal",";color:").concat(e.value.style.legend.value.color))}," ("+S(d(de)(e.value.style.legend.value.formatter,l.value,d(U)({p:e.value.style.legend.value.prefix,v:l.value,s:e.value.style.legend.value.suffix,r:e.value.style.legend.value.rounding}),{datapoint:l,seriesIndex:a}))+") ",5)):y("",!0)],64))],64))])],14,st))),256))],4)):y("",!0),ee(d(xe),{show:T.value&&e.value.style.tooltip.show,parent:Y.value,backgroundColor:e.value.style.tooltip.backgroundColor,color:e.value.style.tooltip.color,fontSize:e.value.style.tooltip.fontSize,borderRadius:e.value.style.tooltip.borderRadius,borderColor:e.value.style.tooltip.borderColor,borderWidth:e.value.style.tooltip.borderWidth,backgroundOpacity:e.value.style.tooltip.backgroundOpacity,position:e.value.style.tooltip.position,content:N.value,isCustom:z.value,offsetY:-124+e.value.style.tooltip.offsetY,blockShiftY:!0,smooth:e.value.style.tooltip.smooth,backdropFilter:e.value.style.tooltip.backdropFilter,smoothForce:e.value.style.tooltip.smoothForce,smoothSnapThreshold:e.value.style.tooltip.smoothSnapThreshold},{"tooltip-before":le(()=>[R(t.$slots,"tooltip-before",oe(ae({...M.value})),void 0,!0)]),"tooltip-after":le(()=>[R(t.$slots,"tooltip-after",oe(ae({...M.value})),void 0,!0)]),_:3},8,["show","parent","backgroundColor","color","fontSize","borderRadius","borderColor","borderWidth","backgroundOpacity","position","content","isCustom","offsetY","smooth","backdropFilter","smoothForce","smoothSnapThreshold"]),t.$slots.source?(r(),n("div",gt,[R(t.$slots,"source",{},void 0,!0)],512)):y("",!0),d(w)?(r(),Oe(qe,{key:3})):y("",!0)],4))}},yt=Te(ft,[["__scopeId","data-v-8c8adea4"]]),Ft=Object.freeze(Object.defineProperty({__proto__:null,default:yt},Symbol.toStringTag,{value:"Module"}));export{_t as a,Ft as b,yt as v};
