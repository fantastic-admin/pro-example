
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./vue-ui-skeleton-B-Xjf23P-DjnSNX7q.js","./vue-data-ui-3mUtIY8T.js","./index-H6QnEWHf.js","./index-BDMvhiMS.css","./alert-yicQvtMn.js","./command.vue_vue_type_script_setup_true_lang-Diw_3237.js","./index.vue_vue_type_script_setup_true_lang-ByxJxKu_.js","./vue-data-ui-C46fMXq5.css","./useNestedProp-DaR1dBmj-DbQzF8J-.js","./PackageVersion-By5ZZJ0U-vEde17m7.js","./UserOptions-Cy-iNhZU-LwM8sTRc.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./img-CqYIrJ8I-DG00FvYp.js","./dom-to-png-WXGPkYro-BBSXh0YN.js"])))=>i.map(i=>d[i]);
import{n as l,av as Be,a7 as w,x as S,N as V,z as U,aI as Ee,C as pe,c,o as r,f as M,b as P,l as he,a4 as g,i as D,M as d,t as G,F as j,q as J,S as ge,e as u,A as Re,aC as me,aF as Ve,w as A,aD as be,aE as ye,aH as fe}from"./index-H6QnEWHf.js";import{s as Me,i as He}from"./useNestedProp-DaR1dBmj-DbQzF8J-.js";import{s as Le,J as Ne,E as X,A as W,w as qe,e as Ue,f as De}from"./vue-data-ui-3mUtIY8T.js";import{m as Ge}from"./usePrinter-ChVMpU2f-D86L9bAU.js";import{a as je}from"./useUserOptionState-BIvW1Kz7-D91ZQO74.js";import"./alert-yicQvtMn.js";import"./command.vue_vue_type_script_setup_true_lang-Diw_3237.js";import"./index.vue_vue_type_script_setup_true_lang-ByxJxKu_.js";const Je=["id"],Xe=["height"],We=["data-cell","height"],Ke={key:2,ref:"source",dir:"auto"},Qe={__name:"vue-ui-carousel-table",props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{}}}},setup(C,{expose:xe}){const $e=me(()=>fe(()=>import("./vue-ui-skeleton-B-Xjf23P-DjnSNX7q.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),Ae=me(()=>fe(()=>import("./UserOptions-Cy-iNhZU-LwM8sTRc.js"),__vite__mapDeps([10,2,3,11,1,4,5,6,7,12,13]),import.meta.url)),{vue_ui_carousel_table:Ce}=Me(),i=C,H=l(Ne()),K=l(!1),_=l(!!i.dataset),ke=Be();w(()=>{Q()}),w(()=>{ke["chart-background"]&&console.warn("VueUiCarouselTable does not support the #chart-background slot.")});function Q(){X(i.dataset)?W({componentName:"VueUiCarouselTable",type:"dataset"}):((!i.dataset.head||X(i.dataset.head))&&(W({componentName:"VueUiCarouselTable",type:"datasetAttribute",property:"head"}),_.value=!1),(!i.dataset.body||X(i.dataset.body))&&(W({componentName:"VueUiCarouselTable",type:"datasetAttribute",property:"body"}),_.value=!1))}const e=S({get:()=>ee(),set:t=>t}),{userOptionsVisible:L,setUserOptionsVisibility:Y,keepUserOptionState:Z}=je({config:e.value});function ee(){return He({userConfig:i.config,defaultConfig:Ce})}V(()=>i.config,t=>{e.value=ee(),L.value=!e.value.userOptions.showOnChartHover,Q()},{deep:!0}),V(()=>i.dataset,t=>{N()},{deep:!0});const{isPrinting:te,isImaging:ae,generatePdf:we,generateImage:oe}=Ge({elementId:"carousel-table_".concat(H.value),fileName:e.value.caption.text||"vue-ui-carousel-table",options:e.value.userOptions.print}),m=l({showAnimation:e.value.animation.use}),n=l(null),le=l(null),O=l(null),T=l(null),I=l(0),z=l(0),B=l(!1),F=l(null),y=l(null),k=l(0);function N(){F.value&&(y.value={elements:F.value.getElementsByTagName("tr"),heights:Array.from(F.value.getElementsByTagName("tr")).map(t=>t.getBoundingClientRect().height)})}w(N);const _e=S(()=>!y.value||!y.value.heights.length?0:Math.max(...y.value.heights)+I.value+z.value),Oe=S(()=>i.dataset.body?e.value.tbody.tr.visible<=i.dataset.body.length?e.value.tbody.tr.visible:i.dataset.body.length:0),Te=S(()=>(e.value.tbody.tr.height+e.value.tbody.tr.td.padding.top+e.value.tbody.tr.td.padding.bottom+e.value.tbody.tr.border.size*2)*Oe.value+I.value+z.value),p=l(0),f=l(null),v=l(0),x=l(!1),ne=l(0);w(()=>{O.value&&(I.value=O.value.getBoundingClientRect().height),T.value&&(z.value=T.value.getBoundingClientRect().height),m.value.showAnimation&&y.value&&ie()}),w(()=>{if(n.value){let t=function(){const s=a.getBoundingClientRect().bottom;o.forEach(h=>{h.getBoundingClientRect().top<s?h.style.visibility="hidden":h.style.visibility="visible"})};const a=n.value.querySelector("thead"),o=Array.from(F.value.querySelectorAll("tr"));n.value.addEventListener("scroll",t),t(),U(()=>{n.value.removeEventListener("scroll",t)})}});function Ie(t){K.value=t,ne.value+=1}function ie(){!f.value&&!x.value&&(e.value.animation.type==="scroll"?f.value=requestAnimationFrame(se):f.value=requestAnimationFrame(ue))}function Fe(){if(!n.value)return!1;const{scrollTop:t,scrollHeight:a,clientHeight:o}=n.value;return t+o>=a}function se(t){x.value||(v.value||(v.value=t),t-v.value>=e.value.animation.speedMs&&(p.value+=y.value.heights[k.value],(Fe()||k.value>=y.value.heights.length)&&(p.value=0,k.value=-1),k.value+=1,n.value&&n.value.scrollTo({top:p.value,behavior:"smooth"}),v.value=t),f.value=requestAnimationFrame(se))}function ue(t){if(x.value)return;v.value||(v.value=t);const a=t-v.value,o=e.value.animation.speedMs/4/1e3;a>=o&&(p.value+=o,p.value>=n.value.scrollHeight-n.value.clientHeight&&(p.value=0),n.value&&n.value.scrollTo({top:p.value,behavior:"auto"}),v.value=t),f.value=requestAnimationFrame(ue)}function b(){x.value=!0,cancelAnimationFrame(f.value),f.value=null}U(b);function $(){!x.value||!m.value.showAnimation||(x.value=!1,v.value=0,ie())}function Se(){e.value.animation.pauseOnHover&&b()}const q=l(null);function Pe(){b(),clearTimeout(q.value)}function re(){clearTimeout(q.value),q.value=setTimeout($,1e3)}V(()=>e.value.animation.use,t=>{t?(m.value.showAnimation=!0,$()):(m.value.showAnimation=!1,b())}),V(()=>e.value.animation.type,t=>{b(),p.value=0,k.value=0,n.value.scrollTo({top:0,behavior:"auto"}),$()});const ze=S(()=>e.value.responsiveBreakpoint),E=Ee(null);w(()=>{E.value=new ResizeObserver(t=>{t.forEach(a=>{B.value=a.contentRect.width<ze.value}),I.value=O.value?O.value.getBoundingClientRect().height:0,z.value=T.value?T.value.getBoundingClientRect().height:0,k.value=0,pe(()=>{b(),v.value=0,p.value=0,N(),$()})}),n.value&&E.value.observe(n.value)}),U(()=>{E.value&&E.value.disconnect()});function de(){we()}function ve(){m.value.showAnimation=!m.value.showAnimation,m.value.showAnimation?$():b()}function ce(t=null){pe(()=>{const a=i.dataset.head.map((h,R)=>[[i.dataset.body[R]]]),o=[[e.value.caption.text],[i.dataset.head.map(h=>[h])]].concat(a),s=Ue(o);t?t(s):De({csvContent:s,title:e.value.caption.text||"vue-ui-carousel-table"})})}return xe({pauseAnimation:b,resumeAnimation:$,toggleAnimation:ve,generateCsv:ce,generatePdf:de,generateImage:oe}),(t,a)=>(r(),c("div",{class:"vue-data-ui-component vue-ui-carousel-table",style:{position:"relative",overflow:"visible"},ref_key:"chartContainer",ref:le,onMouseenter:a[5]||(a[5]=()=>u(Y)(!0)),onMouseleave:a[6]||(a[6]=()=>u(Y)(!1))},[M("div",{ref_key:"tableContainer",ref:n,id:"carousel-table_".concat(H.value),style:g({height:u(te)||u(ae)?"auto":"".concat(Math.max(Te.value,_e.value),"px"),containerType:"inline-size",position:"relative",overflow:"auto",fontFamily:e.value.fontFamily}),class:Re({"vue-ui-responsive":B.value,"is-playing":e.value.scrollbar.hide||!x.value&&e.value.scrollbar.showOnlyOnHover}),onMouseover:a[0]||(a[0]=o=>Se()),onMouseleave:a[1]||(a[1]=o=>$()),onTouchstart:a[2]||(a[2]=o=>Pe()),onTouchend:a[3]||(a[3]=o=>re()),onTouchcancel:a[4]||(a[4]=o=>re())},[_.value?(r(),c("table",{key:0,class:"vue-data-ui-carousel-table",style:g({...e.value.style,border:"".concat(e.value.border.size,"px solid ").concat(e.value.border.color),width:"100%",borderCollapse:"collapse",backgroundColor:e.value.tbody.backgroundColor})},[M("caption",{ref_key:"caption",ref:O,class:"vue-data-ui-carousel-table-caption",style:g({...e.value.caption.style,fontFamily:"inherit",position:"sticky",top:0,zIndex:2,paddingTop:e.value.caption.padding.top+"px",paddingRight:e.value.caption.padding.right+"px",paddingBottom:e.value.caption.padding.bottom+"px",paddingLeft:e.value.caption.padding.left+"px",boxShadow:B.value?e.value.thead.tr.style.boxShadow:"none",minHeight:"36px",display:t.$slots.caption||e.value.caption.text||e.value.userOptions.show?"":"none"})},[D(G(e.value.caption.text&&!t.$slots.caption?e.value.caption.text:"")+" ",1),d(t.$slots,"caption",{},void 0,!0)],4),M("thead",{style:g({...e.value.thead.style,position:"sticky",top:"".concat(t.$slots.caption||e.value.caption.text||e.value.userOptions.show?I.value:0,"px"),zIndex:1})},[M("tr",{ref_key:"tableRow",ref:T,role:"row",style:g({...e.value.thead.tr.style,border:e.value.thead.tr.border.size?"".concat(e.value.thead.tr.border.size,"px solid ").concat(e.value.thead.tr.border.color):"none",boxShadow:B.value?"none":e.value.thead.tr.style.boxShadow}),height:"".concat(e.value.thead.tr.height,"px")},[(r(!0),c(j,null,J(C.dataset.head,(o,s)=>(r(),c("th",{role:"cell",key:"th_".concat(s),style:g({...e.value.thead.tr.th.style,border:e.value.thead.tr.th.border.size?"".concat(e.value.thead.tr.th.border.size,"px solid ").concat(e.value.thead.tr.th.border.color):"none",paddingTop:e.value.thead.tr.th.padding.top+"px",paddingRight:e.value.thead.tr.th.padding.right+"px",paddingBottom:e.value.thead.tr.th.padding.bottom+"px",paddingLeft:e.value.thead.tr.th.padding.left+"px"})},[D(G(t.$slots.th?"":o)+" ",1),d(t.$slots,"th",ge({ref_for:!0},{th:o,colIndex:s}),void 0,!0)],4))),128))],12,Xe)],4),C.dataset.body&&C.dataset.head?(r(),c("tbody",{key:0,ref_key:"tbody",ref:F,style:{clipPath:"inset(0,0,0,0)"}},[(r(!0),c(j,null,J(C.dataset.body,(o,s)=>(r(),c("tr",{style:g({...e.value.tbody.tr.style,border:"".concat(e.value.tbody.tr.border.size,"px solid ").concat(e.value.tbody.tr.border.color),verticalAlign:"middle"})},[(r(!0),c(j,null,J(o,(h,R)=>(r(),c("td",{role:"cell","data-cell":C.dataset.head[R]||"",style:g({...e.value.tbody.tr.td.style,border:"".concat(e.value.tbody.tr.td.border.size,"px solid ").concat(e.value.tbody.tr.td.border.color),backgroundColor:u(qe)(e.value.tbody.tr.td.style.backgroundColor,s%2===0&&e.value.tbody.tr.td.alternateColor?e.value.tbody.tr.td.alternateOpacity*100:100),paddingTop:e.value.tbody.tr.td.padding.top+"px",paddingRight:e.value.tbody.tr.td.padding.right+"px",paddingBottom:e.value.tbody.tr.td.padding.bottom+"px",paddingLeft:e.value.tbody.tr.td.padding.left+"px",verticalAlign:"middle"}),height:"".concat(e.value.tbody.tr.height,"px")},[D(G(t.$slots.td?"":h)+" ",1),d(t.$slots,"td",ge({ref_for:!0},{td:h,rowIndex:s,colIndex:R}),void 0,!0)],12,We))),256))],4))),256))],512)):P("",!0)],4)):P("",!0)],46,Je),_.value?P("",!0):(r(),he(u($e),{key:0,config:{type:"table"}})),e.value.userOptions.show&&_.value&&(u(Z)||u(L))?(r(),he(u(Ae),{ref:"details",key:"user_option_".concat(ne.value),backgroundColor:e.value.style.backgroundColor,color:e.value.style.color,isPrinting:u(te),isImaging:u(ae),uid:H.value,hasTooltip:!1,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasXls:e.value.userOptions.buttons.csv,hasTable:!1,hasLabel:!1,hasAnimation:e.value.userOptions.buttons.animation,isAnimation:!m.value.showAnimation,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:K.value,chartElement:le.value,position:e.value.userOptions.position,titles:{...e.value.userOptions.buttonTitles},zIndex:3,offsetX:12,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,onGeneratePdf:de,onGenerateCsv:ce,onGenerateImage:u(oe),onToggleAnimation:ve,onToggleFullscreen:Ie,style:g({visibility:u(Z)?u(L)?"visible":"hidden":"visible"})},Ve({_:2},[t.$slots.menuIcon?{name:"menuIcon",fn:A(({isOpen:o,color:s})=>[d(t.$slots,"menuIcon",be(ye({isOpen:o,color:s})),void 0,!0)]),key:"0"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:A(()=>[d(t.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionCsv?{name:"optionCsv",fn:A(()=>[d(t.$slots,"optionCsv",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:A(()=>[d(t.$slots,"optionImg",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionSvg?{name:"optionSvg",fn:A(()=>[d(t.$slots,"optionSvg",{},void 0,!0)]),key:"4"}:void 0,t.$slots.optionAnimation?{name:"optionAnimation",fn:A(()=>[d(t.$slots,"optionAnimation",{},void 0,!0)]),key:"5"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:A(({toggleFullscreen:o,isFullscreen:s})=>[d(t.$slots,"optionFullscreen",be(ye({toggleFullscreen:o,isFullscreen:s})),void 0,!0)]),key:"6"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasImg","hasXls","hasAnimation","isAnimation","hasFullscreen","isFullscreen","chartElement","position","titles","callbacks","printScale","onGenerateImage","style"])):P("",!0),t.$slots.source?(r(),c("div",Ke,[d(t.$slots,"source",{},void 0,!0)],512)):P("",!0)],544))}},it=Le(Qe,[["__scopeId","data-v-563981b9"]]);export{it as default};
