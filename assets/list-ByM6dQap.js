
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as xe,J as ke,n as p,a7 as De,aQ as A,z as $e,aa as z,ab as H,r,aw as ze,c as Ve,o as v,g as t,am as Me,w as a,W as F,e as o,aG as O,X as J,i as u,_ as Pe,t as Se,l as E,b as Q,A as W,j as Le,L as h,h as Be,k as X}from"./index-H6QnEWHf.js";import{_ as Fe}from"./index.vue_vue_type_script_setup_true_lang-DIEW1slA.js";import{a as V,_ as q}from"./index.vue_vue_type_script_setup_true_lang-DU6qXWRm.js";import{u as Oe}from"./index-D6rA-3wF.js";import{u as he}from"./usePagination-Ci1eRh1x.js";import"./role-Drh3e6Yh.js";const Y=xe({name:"PagesExampleManagerList",__name:"list",setup(Re){const R=ke(),{pagination:b,getParams:Z,onSizeChange:ee,onCurrentChange:te,onSortChange:ae}=he(),M=p(!1),C=p("router"),y=p({id:""}),I={account:"",name:"",mobile:"",sex:""},l=p({...I});function ne(){Object.assign(l.value,I)}const x=p({enable:!0,selectionDataList:[]}),P=p(!1),S=p([]);De(()=>{f(),C.value==="router"&&A.on("get-data-list",()=>{f()})}),$e(()=>{C.value==="router"&&A.off("get-data-list")});function f(){P.value=!0;const n={...Z(),...l.value.account&&{account:l.value.account},...l.value.name&&{name:l.value.name},...l.value.mobile&&{mobile:l.value.mobile},...l.value.sex!==""&&{sex:l.value.sex}};V.list(n).then(e=>{P.value=!1,S.value=e.data.list,S.value.forEach(m=>{m.statusLoading=!1}),b.value.total=e.data.total})}function oe(n){ee(n).then(()=>f())}function d(n=1){te(n).then(()=>f())}function le({prop:n,order:e}){ae(n,e).then(()=>f())}const k=p(),{open:T,update:U}=z().create({destroyOnClose:!0,closeOnClickOverlay:!1,closeOnPressEscape:!1,beforeClose:(n,e)=>{var m;n==="confirm"?(m=k.value)==null||m.submit().then(()=>{f(),e()}):e()},content:()=>H(q,{ref:k,id:y.value.id})}),{open:G,update:K}=Oe().create({destroyOnClose:!0,closeOnClickOverlay:!1,closeOnPressEscape:!1,beforeClose:(n,e)=>{var m;n==="confirm"?(m=k.value)==null||m.submit().then(()=>{f(),e()}):e()},content:()=>H(q,{ref:k,id:y.value.id})});function se(){C.value==="router"?R.push({name:"pagesExampleGeneralManagerCreate"}):(y.value.id="",C.value==="modal"?(U({title:"新增"}),T()):(K({title:"新增"}),G()))}function ie(n){C.value==="router"?R.push({name:"pagesExampleGeneralManagerEdit",params:{id:n.id}}):(y.value.id=n.id,C.value==="modal"?(U({title:"编辑"}),T()):(K({title:"编辑"}),G()))}function re(n){return new Promise(e=>{z().confirm({title:"确认信息",content:"确认".concat(n.status?"禁用":"启用","「").concat(n.account,"」吗？"),onConfirm:()=>{n.statusLoading=!0,V.changeStatus({id:n.id,status:!n.status}).then(()=>(n.statusLoading=!1,h.success("模拟".concat(n.status?"禁用":"启用","成功")),e(!0))).catch(()=>(n.statusLoading=!1,e(!1)))}})})}function ue(n){z().confirm({title:"确认信息",content:"确认将「".concat(n.account,"」的密码重置为 “123456” 吗？"),onConfirm:()=>{V.passwordReset(n.id).then(()=>{h.success("模拟重置成功")})}})}function de(n){z().confirm({title:"确认信息",content:"确认删除「".concat(n.account,"」管理员吗？"),onConfirm:()=>{V.delete(n.id).then(()=>{f(),h.success("模拟删除成功")})}})}function me(n,e){switch(n){case"resetPassword":ue(e);break;case"delete":de(e);break}}return(n,e)=>{const m=Me,L=r("ElInput"),w=r("ElFormItem"),D=r("ElRadioButton"),fe=r("ElRadioGroup"),c=r("ElButton"),$=Pe,pe=r("ElForm"),ce=Fe,ge=r("ElDivider"),N=r("ElSpace"),g=r("ElTableColumn"),B=r("ElTag"),ve=r("ElSwitch"),j=r("ElDropdownItem"),be=r("ElDropdownMenu"),Ce=r("ElDropdown"),_e=r("ElTable"),Ee=r("ElPagination"),we=Le,ye=ze("loading");return v(),Ve("div",{class:W({"absolute-container":o(M)})},[t(m,{title:"管理员管理",description:"页面数据为 Mock 示例数据，非真实数据。",class:"mb-0"}),t(we,{class:W({"flex-1 overflow-auto":o(M)}),"main-class":{"flex-1 flex flex-col overflow-auto":o(M)}},{default:a(()=>[t(ce,{"show-toggle":!1},{default:a(({fold:s,toggle:_})=>[t(pe,{model:o(l),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[t(w,{label:"帐号"},{default:a(()=>[t(L,{modelValue:o(l).account,"onUpdate:modelValue":e[0]||(e[0]=i=>o(l).account=i),placeholder:"请输入帐号，支持模糊查询",clearable:"",onKeydown:e[1]||(e[1]=O(i=>d(),["enter"])),onClear:e[2]||(e[2]=i=>d())},null,8,["modelValue"])]),_:1}),t(w,{label:"姓名"},{default:a(()=>[t(L,{modelValue:o(l).name,"onUpdate:modelValue":e[3]||(e[3]=i=>o(l).name=i),placeholder:"请输入姓名，支持模糊查询",clearable:"",onKeydown:e[4]||(e[4]=O(i=>d(),["enter"])),onClear:e[5]||(e[5]=i=>d())},null,8,["modelValue"])]),_:1}),F(t(w,{label:"手机号"},{default:a(()=>[t(L,{modelValue:o(l).mobile,"onUpdate:modelValue":e[6]||(e[6]=i=>o(l).mobile=i),placeholder:"请输入手机号",clearable:"",onKeydown:e[7]||(e[7]=O(i=>d(),["enter"])),onClear:e[8]||(e[8]=i=>d())},null,8,["modelValue"])]),_:1},512),[[J,!s]]),F(t(w,{label:"性别"},{default:a(()=>[t(fe,{modelValue:o(l).sex,"onUpdate:modelValue":e[9]||(e[9]=i=>o(l).sex=i),onChange:e[10]||(e[10]=i=>d())},{default:a(()=>[t(D,{value:""},{default:a(()=>[...e[14]||(e[14]=[u(" 全部 ",-1)])]),_:1}),t(D,{value:1},{default:a(()=>[...e[15]||(e[15]=[u(" 男 ",-1)])]),_:1}),t(D,{value:0},{default:a(()=>[...e[16]||(e[16]=[u(" 女 ",-1)])]),_:1}),t(D,{value:2},{default:a(()=>[...e[17]||(e[17]=[u(" 保密 ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[J,!s]]),t(w,null,{default:a(()=>[t(c,{onClick:e[11]||(e[11]=i=>{ne(),d()})},{default:a(()=>[...e[18]||(e[18]=[u(" 重置 ",-1)])]),_:1}),t(c,{type:"primary",onClick:e[12]||(e[12]=i=>d())},{icon:a(()=>[t($,{name:"i-ep:search"})]),default:a(()=>[e[19]||(e[19]=u(" 筛选 ",-1))]),_:1}),t(c,{link:"",onClick:_},{icon:a(()=>[t($,{name:s?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[u(" "+Se(s?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(ge,{"border-style":"dashed"}),t(N,{wrap:""},{default:a(()=>[t(c,{type:"primary",size:"default",onClick:se},{icon:a(()=>[t($,{name:"i-ep:plus"})]),default:a(()=>[e[20]||(e[20]=u(" 新增管理员 ",-1))]),_:1}),o(x).enable?(v(),E(c,{key:0,size:"default",disabled:!o(x).selectionDataList.length},{default:a(()=>[...e[21]||(e[21]=[u(" 批量操作 ",-1)])]),_:1},8,["disabled"])):Q("",!0)]),_:1}),F((v(),E(_e,{class:"my-4",data:o(S),stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:le,onSelectionChange:e[13]||(e[13]=s=>o(x).selectionDataList=s)},{default:a(()=>[o(x).enable?(v(),E(g,{key:0,type:"selection",align:"center",fixed:""})):Q("",!0),t(g,{prop:"account",sortable:"",label:"帐号"}),t(g,{prop:"name",label:"姓名",width:"100",align:"center"}),t(g,{prop:"sex",label:"性别",width:"100",align:"center"},{default:a(s=>[s.row.sex===1?(v(),E(B,{key:0,type:"success",size:"small"},{default:a(()=>[...e[22]||(e[22]=[u(" 男 ",-1)])]),_:1})):s.row.sex===0?(v(),E(B,{key:1,type:"warning",size:"small"},{default:a(()=>[...e[23]||(e[23]=[u(" 女 ",-1)])]),_:1})):(v(),E(B,{key:2,type:"info",size:"small"},{default:a(()=>[...e[24]||(e[24]=[u(" 保密 ",-1)])]),_:1}))]),_:1}),t(g,{prop:"mobile",label:"手机号",width:"150",align:"center"}),t(g,{label:"状态",width:"100",align:"center"},{default:a(s=>[t(ve,{modelValue:s.row.status,"onUpdate:modelValue":_=>s.row.status=_,loading:s.row.statusLoading,"inline-prompt":"","active-text":"启用","inactive-text":"禁用","before-change":()=>re(s.row)},null,8,["modelValue","onUpdate:modelValue","loading","before-change"])]),_:1}),t(g,{label:"操作",width:"200",align:"center",fixed:"right"},{default:a(s=>[t(N,null,{default:a(()=>[t(c,{type:"primary",size:"small",plain:"",onClick:_=>ie(s.row)},{default:a(()=>[...e[25]||(e[25]=[u(" 编辑 ",-1)])]),_:1},8,["onClick"]),t(Ce,{onCommand:_=>me(_,s.row)},{dropdown:a(()=>[t(be,null,{default:a(()=>[t(j,{command:"resetPassword"},{default:a(()=>[...e[27]||(e[27]=[u(" 重置密码 ",-1)])]),_:1}),t(j,{command:"delete",divided:""},{default:a(()=>[...e[28]||(e[28]=[u(" 删除 ",-1)])]),_:1})]),_:1})]),default:a(()=>[t(c,{size:"small"},{default:a(()=>[e[26]||(e[26]=u(" 更多操作 ",-1)),t($,{name:"i-ep:arrow-down",class:"el-icon--right"})]),_:1})]),_:1},8,["onCommand"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ye,o(P)]]),t(Ee,{"current-page":o(b).page,total:o(b).total,"page-size":o(b).size,"page-sizes":o(b).sizes,layout:o(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:d,onSizeChange:oe},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["class","main-class"])],2)}}});typeof X=="function"&&X(Y);const je=Be(Y,[["__scopeId","data-v-3fdf7a54"]]);export{je as default};
