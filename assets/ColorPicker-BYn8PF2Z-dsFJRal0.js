
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{n as u,x as I,y as O,a7 as q,z as G,N as U,W,e as Y,c as p,o as s,f as r,b as M,l as j,M as A,g as F,aD as H,aE as J,a4 as i,at as l,F as P,q as $,T as Q,aG as X,C as Z}from"./index-H6QnEWHf.js";import{s as ee,m as oe,O as C}from"./vue-data-ui-3mUtIY8T.js";import{i as te}from"./vClickOutside-C6WiFswA-B2BXHGcD.js";const ne=["onClick"],le={style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-46%)"}},ae=["value"],re=["onClick"],ue={style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-46%)"}},se=["value"],ie={__name:"ColorPicker",props:{value:{type:String,default:"#ffffff"},size:{type:String,default:"50px"},backgroundColor:{type:String,default:"#FFFFFF"},buttonBorderColor:{type:String,default:"#FFFFFF"},teleported:{type:Boolean,default:!1}},emits:["update:value"],setup(t,{emit:V}){const d=t,g=V,D=u(null),b=u(null),c=u(null),a=u(!1),y=u(!1),m=u({top:0,left:0}),N=I(()=>({backgroundColor:d.value,width:"100%",height:"100%",cursor:"pointer"})),v=I(()=>oe(d.value));function w(o){g("update:value",o),a.value=!1}function h(o){g("update:value",o.target.value)}function E(o){var e,n;(e=o==null?void 0:o.stopPropagation)==null||e.call(o),y.value=!0,(n=c.value)==null||n.click()}function R(){a.value=!1}function x(){!y.value&&a.value&&R()}async function K(){a.value=!a.value,a.value&&d.teleported&&(await Z(),L())}function L(){if(!b.value)return;const o=b.value.getBoundingClientRect();m.value={top:o.top+36,left:o.right-48}}function f(){a.value&&d.teleported&&L()}function k(){setTimeout(()=>y.value=!1,0)}O(o=>{const e=c.value;if(!e)return;const n=()=>k(),T=()=>k(),_=()=>{};e.addEventListener("blur",n),e.addEventListener("change",T),e.addEventListener("input",_),o(()=>{e.removeEventListener("blur",n),e.removeEventListener("change",T),e.removeEventListener("input",_)})});function B(){k()}function z(){document.visibilityState==="visible"&&k()}q(()=>{window.addEventListener("scroll",f,{passive:!0}),window.addEventListener("resize",f,{passive:!0}),window.addEventListener("focus",B),document.addEventListener("visibilitychange",z)}),G(()=>{window.removeEventListener("scroll",f),window.removeEventListener("resize",f),window.removeEventListener("focus",B),document.removeEventListener("visibilitychange",z)}),U(()=>d.value,o=>{c.value&&(c.value.value=o)});const S=u(["#000000","#FFFFFF","#FF5733","#33FF57","#3357FF","#FFC300","#800080","#FF1493","#00CED1"]);return(o,e)=>W((s(),p("div",{ref_key:"wrapperRef",ref:D,onKeydown:X(x,["esc"]),style:{height:"100%",width:"100%",position:"relative"}},[r("button",{ref_key:"buttonRef",ref:b,class:"icon",onClick:K,style:i(N.value),type:"button"},[A(o.$slots,"annotator-action-color",H(J({color:v.value})),()=>[F(C,{name:"palette",stroke:v.value,size:22},null,8,["stroke"])],!0)],4),a.value&&!t.teleported?(s(),p("div",{key:0,tabindex:"0",class:"vue-ui-color-picker",style:i({backgroundColor:t.backgroundColor,position:"absolute",left:"calc(100% + 30px)",top:"50%",transform:"translateY(-18%)"}),onMousedown:e[2]||(e[2]=l(()=>{},["stop"])),onClick:e[3]||(e[3]=l(()=>{},["stop"])),onTouchstart:e[4]||(e[4]=l(()=>{},["stop"]))},[(s(!0),p(P,null,$(S.value,n=>(s(),p("button",{key:n,class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:n,outline:"1px solid ".concat(t.buttonBorderColor)}),onClick:()=>w(n)},null,12,ne))),128)),r("button",{class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:t.value,outline:"1px solid ".concat(t.buttonBorderColor)}),onClick:l(E,["stop"]),onMousedown:e[0]||(e[0]=l(()=>{},["stop"])),onTouchstart:e[1]||(e[1]=l(()=>{},["stop"]))},[r("div",le,[F(C,{name:"colorPicker",stroke:v.value,size:22},null,8,["stroke"])]),r("input",{ref_key:"colorInput",ref:c,type:"color",value:t.value,class:"hidden-input",onInput:h},null,40,ae)],36)],36)):M("",!0),a.value&&t.teleported?(s(),j(Q,{key:1,to:"body"},[r("div",{tabindex:"0",class:"vue-ui-color-picker",style:i({backgroundColor:t.backgroundColor,position:"fixed",top:m.value.top+"px",left:m.value.left+"px",zIndex:2147483647}),onMousedown:e[7]||(e[7]=l(()=>{},["stop"])),onClick:e[8]||(e[8]=l(()=>{},["stop"])),onTouchstart:e[9]||(e[9]=l(()=>{},["stop"]))},[(s(!0),p(P,null,$(S.value,n=>(s(),p("button",{key:n,class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:n,outline:"1px solid ".concat(t.buttonBorderColor)}),onClick:()=>w(n)},null,12,re))),128)),r("button",{class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:t.value,outline:"1px solid ".concat(t.buttonBorderColor)}),onClick:l(E,["stop"]),onMousedown:e[5]||(e[5]=l(()=>{},["stop"])),onTouchstart:e[6]||(e[6]=l(()=>{},["stop"]))},[r("div",ue,[F(C,{name:"colorPicker",stroke:v.value,size:22},null,8,["stroke"])]),r("input",{ref_key:"colorInput",ref:c,type:"color",value:t.value,class:"hidden-input",onInput:h},null,40,se)],36)],36)])):M("",!0)],32)),[[Y(te),x]])}},ve=ee(ie,[["__scopeId","data-v-e6c0b73a"]]);export{ve as k};
