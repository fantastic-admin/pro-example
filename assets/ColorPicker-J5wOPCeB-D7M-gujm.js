
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{g as u,M,ae as U,Z as O,af as Y,a1 as Z,w as j,a as q,c as p,o as s,l as r,O as T,N as A,k as F,U as i,aF as l,R as P,S as K,bm as G,aP as H,ao as J}from"./index-Bnionyve.js";import{s as Q,K as W,u as C}from"./vue-data-ui-DO-nR8BN.js";import{i as X}from"./vClickOutside-C6WiFswA-B2BXHGcD.js";const ee=["onClick"],te={style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-46%)"}},oe=["value"],ne=["onClick"],le={style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-46%)"}},ae=["value"],re={__name:"ColorPicker",props:{value:{type:String,default:"#ffffff"},size:{type:String,default:"50px"},backgroundColor:{type:String,default:"#FFFFFF"},buttonBorderColor:{type:String,default:"#FFFFFF"},teleported:{type:Boolean,default:!1}},emits:["update:value"],setup(o,{emit:$}){const v=o,w=$,N=u(null),k=u(null),c=u(null),a=u(!1),b=u(!1),y=u({top:0,left:0}),R=M(()=>({backgroundColor:v.value,width:"100%",height:"100%",cursor:"pointer"})),m=M(()=>W(v.value));function g(t){w("update:value",t),a.value=!1}function h(t){w("update:value",t.target.value)}function E(t){var e,n;(e=t==null?void 0:t.stopPropagation)==null||e.call(t),b.value=!0,(n=c.value)==null||n.click()}function V(){a.value=!1}function L(){!b.value&&a.value&&V()}async function D(){a.value=!a.value,a.value&&v.teleported&&(await J(),x())}function x(){if(!k.value)return;const t=k.value.getBoundingClientRect();y.value={top:t.top+36,left:t.right-48}}function d(){a.value&&v.teleported&&x()}function f(){setTimeout(()=>b.value=!1,0)}U(t=>{const e=c.value;if(!e)return;const n=()=>f(),_=()=>f(),I=()=>{};e.addEventListener("blur",n),e.addEventListener("change",_),e.addEventListener("input",I),t(()=>{e.removeEventListener("blur",n),e.removeEventListener("change",_),e.removeEventListener("input",I)})});function B(){f()}function z(){document.visibilityState==="visible"&&f()}O(()=>{window.addEventListener("scroll",d,{passive:!0}),window.addEventListener("resize",d,{passive:!0}),window.addEventListener("focus",B),document.addEventListener("visibilitychange",z)}),Y(()=>{window.removeEventListener("scroll",d),window.removeEventListener("resize",d),window.removeEventListener("focus",B),document.removeEventListener("visibilitychange",z)}),Z(()=>v.value,t=>{c.value&&(c.value.value=t)});const S=u(["#000000","#FFFFFF","#FF5733","#33FF57","#3357FF","#FFC300","#800080","#FF1493","#00CED1"]);return(t,e)=>j((s(),p("div",{ref_key:"wrapperRef",ref:N,onKeydown:H(L,["esc"]),style:{height:"100%",width:"100%",position:"relative"}},[r("button",{ref_key:"buttonRef",ref:k,class:"icon",onClick:D,style:i(R.value),type:"button"},[F(C,{name:"palette",stroke:m.value,size:22},null,8,["stroke"])],4),a.value&&!o.teleported?(s(),p("div",{key:0,tabindex:"0",class:"vue-ui-color-picker",style:i({backgroundColor:o.backgroundColor,position:"absolute",left:"calc(100% + 30px)",top:"50%",transform:"translateY(-18%)"}),onMousedown:e[2]||(e[2]=l(()=>{},["stop"])),onClick:e[3]||(e[3]=l(()=>{},["stop"])),onTouchstart:e[4]||(e[4]=l(()=>{},["stop"]))},[(s(!0),p(P,null,K(S.value,n=>(s(),p("button",{key:n,class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:n,outline:"1px solid ".concat(o.buttonBorderColor)}),onClick:()=>g(n)},null,12,ee))),128)),r("button",{class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:o.value,outline:"1px solid ".concat(o.buttonBorderColor)}),onClick:l(E,["stop"]),onMousedown:e[0]||(e[0]=l(()=>{},["stop"])),onTouchstart:e[1]||(e[1]=l(()=>{},["stop"]))},[r("div",te,[F(C,{name:"colorPicker",stroke:m.value,size:22},null,8,["stroke"])]),r("input",{ref_key:"colorInput",ref:c,type:"color",value:o.value,class:"hidden-input",onInput:h},null,40,oe)],36)],36)):T("",!0),a.value&&o.teleported?(s(),A(G,{key:1,to:"body"},[r("div",{tabindex:"0",class:"vue-ui-color-picker",style:i({backgroundColor:o.backgroundColor,position:"fixed",top:y.value.top+"px",left:y.value.left+"px",zIndex:2147483647}),onMousedown:e[7]||(e[7]=l(()=>{},["stop"])),onClick:e[8]||(e[8]=l(()=>{},["stop"])),onTouchstart:e[9]||(e[9]=l(()=>{},["stop"]))},[(s(!0),p(P,null,K(S.value,n=>(s(),p("button",{key:n,class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:n,outline:"1px solid ".concat(o.buttonBorderColor)}),onClick:()=>g(n)},null,12,ne))),128)),r("button",{class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:o.value,outline:"1px solid ".concat(o.buttonBorderColor)}),onClick:l(E,["stop"]),onMousedown:e[5]||(e[5]=l(()=>{},["stop"])),onTouchstart:e[6]||(e[6]=l(()=>{},["stop"]))},[r("div",le,[F(C,{name:"colorPicker",stroke:m.value,size:22},null,8,["stroke"])]),r("input",{ref_key:"colorInput",ref:c,type:"color",value:o.value,class:"hidden-input",onInput:h},null,40,ae)],36)],36)])):T("",!0)],32)),[[q(X),L]])}},ce=Q(re,[["__scopeId","data-v-22a32b57"]]);export{ce as v};
