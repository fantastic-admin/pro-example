
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as P,g as p,bu as F,c8 as A,M as k,Z as N,af as q,a1 as j,c9 as I,c as L,o as S,n as V,l as D}from"./index-Bnionyve.js";const T=P({name:"FaParticlesBg",__name:"index",props:{color:{default:"#FFF"},quantity:{default:100},staticity:{default:50},ease:{default:50},class:{}},setup(X){const r=X,i=p(null),h=p(null),u=p(null),d=p([]),m=F({x:0,y:0}),e=F({w:0,h:0}),{x:w,y:M}=A(),{pixelRatio:f}=I(),Y=k(()=>{let a=r.color.replace(/^#/,"");a.length===3&&(a=a.split("").map(l=>l+l).join(""));const t=Number.parseInt(a,16),n=t>>16&255,s=t>>8&255,o=t&255;return"".concat(n," ").concat(s," ").concat(o)});N(()=>{i.value&&(u.value=i.value.getContext("2d")),x(),C(),window.addEventListener("resize",x)}),q(()=>{window.removeEventListener("resize",x)}),j([w,M],()=>{_()});function x(){b(),R()}function _(){if(i.value){const a=i.value.getBoundingClientRect(),{w:t,h:n}=e,s=w.value-a.left-t/2,o=M.value-a.top-n/2;s<t/2&&s>-t/2&&o<n/2&&o>-n/2&&(m.x=s,m.y=o)}}function b(){h.value&&i.value&&u.value&&(d.value.length=0,e.w=h.value.offsetWidth,e.h=h.value.offsetHeight,i.value.width=e.w*f.value,i.value.height=e.h*f.value,i.value.style.width="".concat(e.w,"px"),i.value.style.height="".concat(e.h,"px"),u.value.scale(f.value,f.value))}function z(){const a=Math.floor(Math.random()*e.w),t=Math.floor(Math.random()*e.h),n=0,s=0,o=Math.floor(Math.random()*2)+1,l=0,v=Number.parseFloat((Math.random()*.6+.1).toFixed(1)),g=(Math.random()-.5)*.2,B=(Math.random()-.5)*.2,E=.1+Math.random()*4;return{x:a,y:t,translateX:n,translateY:s,size:o,alpha:l,targetAlpha:v,dx:g,dy:B,magnetism:E}}function y(a,t=!1){if(u.value){const{x:n,y:s,translateX:o,translateY:l,size:v,alpha:g}=a;u.value.translate(o,l),u.value.beginPath(),u.value.arc(n,s,v,0,2*Math.PI),u.value.fillStyle="rgba(".concat(Y.value.split(" ").join(", "),", ").concat(g,")"),u.value.fill(),u.value.setTransform(f.value,0,0,f.value,0,0),t||d.value.push(a)}}function c(){u.value&&u.value.clearRect(0,0,e.w,e.h)}function R(){c();const a=r.quantity;for(let t=0;t<a;t++){const n=z();y(n)}}function $(a,t,n,s,o){const l=(a-t)*(o-s)/(n-t)+s;return l>0?l:0}function C(){c(),d.value.forEach((a,t)=>{const s=[a.x+a.translateX-a.size,e.w-a.x-a.translateX-a.size,a.y+a.translateY-a.size,e.h-a.y-a.translateY-a.size].reduce((l,v)=>Math.min(l,v)),o=Number.parseFloat($(s,0,20,0,1).toFixed(2));if(o>1?(a.alpha+=.02,a.alpha>a.targetAlpha&&(a.alpha=a.targetAlpha)):a.alpha=a.targetAlpha*o,a.x+=a.dx,a.y+=a.dy,a.translateX+=(m.x/(r.staticity/a.magnetism)-a.translateX)/r.ease,a.translateY+=(m.y/(r.staticity/a.magnetism)-a.translateY)/r.ease,a.x<-a.size||a.x>e.w+a.size||a.y<-a.size||a.y>e.h+a.size){d.value.splice(t,1);const l=z();y(l)}else y({...a,x:a.x,y:a.y,translateX:a.translateX,translateY:a.translateY,alpha:a.alpha},!0)}),window.requestAnimationFrame(C)}return(a,t)=>(S(),L("div",{ref_key:"canvasContainerRef",ref:h,class:V(r.class),"aria-hidden":"true"},[D("canvas",{ref_key:"canvasRef",ref:i},null,512)],2))}});export{T as _};
