
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{a as y}from"./table-Cd_DNuRN.js";import{u as T}from"./usePagination-BqwTFOKk.js";import{d as I,aM as L,aN as M,g as P,Z as S,a4 as r,N as c,o as f,m as g,k as m,a as t,c as B,R as D,S as N,V as F}from"./index-Bnionyve.js";const R=I({__name:"index",props:L({id:{default:""},info:{default:{}}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const l=p,u=M(p,"modelValue"),{pagination:s,getParams:b,onSizeChange:h,onCurrentChange:v,onSortChange:C}=T(),e=P({loading:!1,dataList:[],border:!1,stripe:!1,header:!0,columns:[]});S(()=>{d()});function d(){e.value.loading=!0;const n={...b(),...l.id&&{id:l.id},...l.info.code&&{code:l.info.code}};y.preview(n).then(a=>{e.value.loading=!1,e.value.dataList=a.data.list,s.value.total=a.data.total,l.id?(e.value.border=a.data.tableInfo.border,e.value.stripe=a.data.tableInfo.stripe,e.value.header=a.data.tableInfo.header,e.value.columns=a.data.tableInfo.columns.filter(i=>i.enable)):(e.value.border=l.info.border,e.value.stripe=l.info.stripe,e.value.header=l.info.header,e.value.columns=l.info.columns.filter(i=>i.enable))})}function _(n){h(n).then(()=>d())}function w(n=1){v(n).then(()=>d())}function x({prop:n,order:a}){C(n,a).then(()=>d())}return(n,a)=>{const i=r("ElTableColumn"),z=r("ElTable"),E=r("ElPagination"),V=r("ElDialog");return f(),c(V,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=o=>u.value=o),title:"预览",width:"80%","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",onClosed:a[1]||(a[1]=o=>u.value=!1)},{default:g(()=>[m(z,{data:t(e).dataList,border:t(e).border,stripe:t(e).stripe,"show-header":t(e).header,onSortChange:x},{default:g(()=>[(f(!0),B(D,null,N(t(e).columns,(o,k)=>(f(),c(i,{key:k,label:o.name,prop:o.field,width:o.width,align:o.align,sortable:o.sortable,fixed:o.fixed?o.fixed:!1},null,8,["label","prop","width","align","sortable","fixed"]))),128))]),_:1},8,["data","border","stripe","show-header"]),m(E,{"current-page":t(s).page,total:t(s).total,"page-size":t(s).size,"page-sizes":t(s).sizes,layout:t(s).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:w,onSizeChange:_},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["modelValue"])}}}),j=F(R,[["__scopeId","data-v-c12f2de6"]]);export{j as default};
