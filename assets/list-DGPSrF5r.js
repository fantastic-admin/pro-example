
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as de,K as me,g as u,Z as ce,a7 as R,af as fe,bW as V,b6 as I,a4 as l,ck as pe,c as ge,o as b,k as t,aa as _e,m as a,w as ve,a as n,aP as be,G as i,P as Ce,p as Ee,N as y,O as x,n as G,a9 as ye,b9 as ke,V as he,W as T}from"./index-Bnionyve.js";import{_ as ze}from"./index.vue_vue_type_script_setup_true_lang-DwNki4sp.js";import{a as N}from"./role-DVrXwFu0.js";import{u as De}from"./index-CAH_iDR3.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-UYJMlEOF.js";import{u as we}from"./usePagination-BqwTFOKk.js";import"./menu-BAkdgYHt.js";const H=de({name:"PagesExampleRoleList",__name:"list",setup(xe){const P=me(),{pagination:f,getParams:U,onSizeChange:W,onCurrentChange:j,onSortChange:A}=we(),k=u(!1),p=u("router"),C=u({id:""}),$={name:""},g=u({...$});function Z(){Object.assign(g.value,$)}const d=u({enable:!0,selectionDataList:[]}),h=u(!1),B=u([]);ce(()=>{r(),p.value==="router"&&R.on("get-data-list",()=>{r()})}),fe(()=>{p.value==="router"&&R.off("get-data-list")});function r(){h.value=!0;const o={...U(),...g.value.name&&{name:g.value.name}};N.list(o).then(e=>{h.value=!1,B.value=e.data.list,f.value.total=e.data.total})}function q(o){W(o).then(()=>r())}function _(o=1){j(o).then(()=>r())}function J({prop:o,order:e}){A(o,e).then(()=>r())}const E=u(),{open:F,update:O}=V().create({destroyOnClose:!0,closeOnClickOverlay:!1,closeOnPressEscape:!1,beforeClose:(o,e)=>{var m;o==="confirm"?(m=E.value)==null||m.submit().then(()=>{r(),e()}):e()},content:()=>I(K,{ref:E,id:C.value.id})}),{open:S,update:L}=De().create({destroyOnClose:!0,closeOnClickOverlay:!1,closeOnPressEscape:!1,beforeClose:(o,e)=>{var m;o==="confirm"?(m=E.value)==null||m.submit().then(()=>{r(),e()}):e()},content:()=>I(K,{ref:E,id:C.value.id})});function Q(){p.value==="router"?P.push({name:"pagesExampleGeneralRoleCreate"}):(C.value.id="",p.value==="modal"?(O({title:"新增"}),F()):(L({title:"新增"}),S()))}function X(o){p.value==="router"?P.push({name:"pagesExampleGeneralRoleEdit",params:{id:o.id}}):(C.value.id=o.id,p.value==="modal"?(O({title:"编辑"}),F()):(L({title:"编辑"}),S()))}function Y(o){V().confirm({title:"确认信息",content:"确认删除「".concat(o.name,"」吗？"),onConfirm:()=>{N.delete(o.id).then(()=>{r(),ke.success("模拟删除成功")})}})}return(o,e)=>{const m=_e,ee=l("ElInput"),M=l("ElFormItem"),s=l("ElButton"),z=Ce,te=l("ElForm"),ae=ze,ne=l("ElDivider"),oe=l("ElButtonGroup"),le=l("ElSpace"),D=l("ElTableColumn"),se=l("ElTable"),ie=l("ElPagination"),re=ye,ue=pe("loading");return b(),ge("div",{class:G({"absolute-container":n(k)})},[t(m,{title:"角色管理",content:"页面数据为 Mock 示例数据，非真实数据。",class:"mb-0"}),t(re,{class:G({"flex-1 overflow-auto":n(k)}),"main-class":{"flex-1 flex flex-col overflow-auto":n(k)}},{default:a(()=>[t(ae,{"show-toggle":!1},{default:a(({fold:c,toggle:w})=>[t(te,{model:n(g),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[t(M,{label:"名称"},{default:a(()=>[t(ee,{modelValue:n(g).name,"onUpdate:modelValue":e[0]||(e[0]=v=>n(g).name=v),placeholder:"请输入角色名称，支持模糊查询",clearable:"",onKeydown:e[1]||(e[1]=be(v=>_(),["enter"])),onClear:e[2]||(e[2]=v=>_())},null,8,["modelValue"])]),_:1}),t(M,null,{default:a(()=>[t(s,{onClick:e[3]||(e[3]=v=>{Z(),_()})},{default:a(()=>[...e[6]||(e[6]=[i(" 重置 ",-1)])]),_:1}),t(s,{type:"primary",onClick:e[4]||(e[4]=v=>_())},{icon:a(()=>[t(z,{name:"i-ep:search"})]),default:a(()=>[e[7]||(e[7]=i(" 筛选 ",-1))]),_:1}),t(s,{link:"",disabled:"",onClick:w},{icon:a(()=>[t(z,{name:c?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[i(" "+Ee(c?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(ne,{"border-style":"dashed"}),t(le,{wrap:""},{default:a(()=>[t(s,{type:"primary",size:"default",onClick:Q},{icon:a(()=>[t(z,{name:"i-ep:plus"})]),default:a(()=>[e[8]||(e[8]=i(" 新增角色 ",-1))]),_:1}),n(d).enable?(b(),y(s,{key:0,size:"default",disabled:!n(d).selectionDataList.length},{default:a(()=>[...e[9]||(e[9]=[i(" 单个批量操作按钮 ",-1)])]),_:1},8,["disabled"])):x("",!0),n(d).enable?(b(),y(oe,{key:1},{default:a(()=>[t(s,{size:"default",disabled:!n(d).selectionDataList.length},{default:a(()=>[...e[10]||(e[10]=[i(" 批量操作按钮组1 ",-1)])]),_:1},8,["disabled"]),t(s,{size:"default",disabled:!n(d).selectionDataList.length},{default:a(()=>[...e[11]||(e[11]=[i(" 批量操作按钮组2 ",-1)])]),_:1},8,["disabled"])]),_:1})):x("",!0)]),_:1}),ve((b(),y(se,{class:"my-4",data:n(B),stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:J,onSelectionChange:e[5]||(e[5]=c=>n(d).selectionDataList=c)},{default:a(()=>[n(d).enable?(b(),y(D,{key:0,type:"selection",align:"center",fixed:""})):x("",!0),t(D,{prop:"name",label:"名称"}),t(D,{label:"操作",width:"250",align:"center",fixed:"right"},{default:a(c=>[t(s,{type:"primary",size:"small",plain:"",onClick:w=>X(c.row)},{default:a(()=>[...e[12]||(e[12]=[i(" 编辑 ",-1)])]),_:1},8,["onClick"]),t(s,{type:"danger",size:"small",plain:"",onClick:w=>Y(c.row)},{default:a(()=>[...e[13]||(e[13]=[i(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ue,n(h)]]),t(ie,{"current-page":n(f).page,total:n(f).total,"page-size":n(f).size,"page-sizes":n(f).sizes,layout:n(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:q,onCurrentChange:_},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["class","main-class"])],2)}}});typeof T=="function"&&T(H);const Me=he(H,[["__scopeId","data-v-4c76b43a"]]);export{Me as default};
