
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as M,an as P,e as j,f as G,g as y,Z as H,ac as L,a1 as Z,c as p,o as r,R as w,k as i,a,v as q,m as f,r as K,N as Q,P as W,H as X,l as m,p as S,be as Y,S as ee,aF as te,b7 as ae,A as ne,b9 as B}from"./index-Bnionyve.js";import{_ as oe}from"./index.vue_vue_type_script_setup_true_lang-qwRnxT-f.js";import{S as se}from"./sortable.esm-BMgLh4Kk.js";const ie={class:"w-80"},le={class:"flex items-center justify-between px-4 py-3"},ce={class:"text-sm font-bold"},re=["title","onClick"],me={class:"flex-1 truncate pe-4 text-sm group-hover:[mask-image:linear-gradient(90deg,#000_calc(100%-80px),transparent)]"},ue={class:"absolute right-2 hidden h-5 w-5 rounded-full text-secondary-foreground group-hover:flex-center hover:bg-secondary hover:ring-1"},de={key:1,class:"flex-col-center py-6 text-secondary-foreground"},pe={class:"m-2 text-base"},fe=M({name:"FaStorageBox",__name:"index",props:{data:{},name:{},title:{}},emits:["takeOut"],setup(g,{emit:u}){const v=g,$=u,E=P(),{t:l}=j(),b=G(),_=y(!1),o=y([]),n=y({visible:!1,name:""});H(()=>{O()});function I(t,e){t==="confirm"?n.value.name?o.value.find(c=>c.title===n.value.name)?B.warning(l("nameExist")):e():B.warning(l("nameEmpty")):e()}function N(){o.value.push({title:n.value.name,content:JSON.stringify(v.data)}),x(),n.value.visible=!1,n.value.name=""}function F(t){_.value=!1,$("takeOut",JSON.parse(t))}function V(t){o.value.splice(t,1),x()}function D(t,e){o.value.splice(t,0,o.value.splice(e,1)[0]),x()}function x(){const t=localStorage.has("storageBoxData")?JSON.parse(localStorage.getItem("storageBoxData")):{};t[b.account]=t[b.account]||{},t[b.account][v.name]=o.value,localStorage.setItem("storageBoxData",JSON.stringify(t))}function O(){localStorage.has("storageBoxData")&&(o.value=JSON.parse(localStorage.getItem("storageBoxData"))[b.account][v.name]||[])}const h=L("containerRef");return Z(()=>h.value,t=>{t&&new se(t,{animation:200,ghostClass:"op-0",draggable:".draggable-item",onUpdate:e=>{e.newIndex!==void 0&&e.oldIndex!==void 0&&D(e.newIndex,e.oldIndex)}})}),(t,e)=>{const c=W,R=X,z=Y,J=oe,T=ne,U=ae;return r(),p(w,null,[i(J,{open:a(_),"onUpdate:open":e[1]||(e[1]=s=>q(_)?_.value=s:null),class:"p-0"},{panel:f(()=>{var s;return[m("div",ie,[m("div",le,[m("div",ce,S((s=g.title)!=null?s:a(l)("title")),1),i(c,{name:"i-ep:plus",class:"cursor-pointer text-base",onClick:e[0]||(e[0]=d=>a(n).visible=!0)})]),i(z,{class:"max-h-200px"},{default:f(()=>[a(o).length>0?(r(),p("div",{key:0,ref_key:"containerRef",ref:h,class:"flex flex-col gap-2 px-4 pb-4"},[(r(!0),p(w,null,ee(a(o),(d,k)=>(r(),p("div",{key:"".concat(k,"_").concat(d.title),title:d.title,class:"group draggable-item relative w-[calc(50%-0.25rem)] flex cursor-pointer items-center gap-1 rounded-lg px-2 py-2 ring-1 ring-border ring-inset hover-bg-accent",onClick:A=>F(d.content)},[m("div",me,S(d.title),1),m("div",ue,[i(c,{name:"i-ep:delete",class:"size-3",onClick:te(A=>V(k),["stop"])},null,8,["onClick"])])],8,re))),128))],512)):(r(),p("div",de,[i(c,{name:"i-tabler:mood-empty",class:"size-10"}),m("p",pe,S(a(l)("empty")),1)]))]),_:1})])]}),default:f(()=>[E.default?K(t.$slots,"default",{key:0}):(r(),Q(R,{key:1,variant:"ghost",size:"icon"},{default:f(()=>[i(c,{name:"i-ep:message-box",class:"size-4"})]),_:1}))]),_:3},8,["open"]),i(U,{modelValue:a(n).visible,"onUpdate:modelValue":e[3]||(e[3]=s=>a(n).visible=s),title:a(l)("dialogTitle"),"confirm-button-text":a(l)("confirm"),"cancel-button-text":a(l)("cancel"),"content-class":"min-h-auto","before-close":I,onConfirm:N,onCancel:e[4]||(e[4]=s=>a(n).visible=!1)},{default:f(()=>[i(T,{modelValue:a(n).name,"onUpdate:modelValue":e[2]||(e[2]=s=>a(n).name=s),class:"w-full!"},null,8,["modelValue"])]),_:1},8,["modelValue","title","confirm-button-text","cancel-button-text"])],64)}}});function C(g){const u=g;u.__i18n=u.__i18n||[],u.__i18n.push({locale:"",resource:{"zh-cn":{title:{t:0,b:{t:2,i:[{t:3}],s:"储物箱"}},dialogTitle:{t:0,b:{t:2,i:[{t:3}],s:"请输入一个方便记忆的名称"}},nameEmpty:{t:0,b:{t:2,i:[{t:3}],s:"名称不能为空"}},nameExist:{t:0,b:{t:2,i:[{t:3}],s:"名称已存在"}},confirm:{t:0,b:{t:2,i:[{t:3}],s:"确认"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"取消"}},empty:{t:0,b:{t:2,i:[{t:3}],s:"空空如也"}}},"zh-tw":{title:{t:0,b:{t:2,i:[{t:3}],s:"儲物箱"}},dialogTitle:{t:0,b:{t:2,i:[{t:3}],s:"請輸入一個方便記憶的名稱"}},nameEmpty:{t:0,b:{t:2,i:[{t:3}],s:"名稱不能為空"}},nameExist:{t:0,b:{t:2,i:[{t:3}],s:"名稱已存在"}},confirm:{t:0,b:{t:2,i:[{t:3}],s:"確認"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"取消"}},empty:{t:0,b:{t:2,i:[{t:3}],s:"空空如也"}}},en:{title:{t:0,b:{t:2,i:[{t:3}],s:"Storage Box"}},dialogTitle:{t:0,b:{t:2,i:[{t:3}],s:"Please enter a name that is easy to remember"}},nameEmpty:{t:0,b:{t:2,i:[{t:3}],s:"Name cannot be empty"}},nameExist:{t:0,b:{t:2,i:[{t:3}],s:"Name already exists"}},confirm:{t:0,b:{t:2,i:[{t:3}],s:"Confirm"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"Cancel"}},empty:{t:0,b:{t:2,i:[{t:3}],s:"Empty"}}}}})}typeof C=="function"&&C(fe);export{fe as _};
