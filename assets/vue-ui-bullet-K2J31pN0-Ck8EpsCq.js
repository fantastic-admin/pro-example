
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PackageVersion-TgflyMpU-BuemEpsd.js","./index-Bnionyve.js","./index-DpF4sDjY.css","./PenAndPaper-DSvu9dwa-CWkxTD_Q.js","./vue-data-ui-DO-nR8BN.js","./alert-Vqv_sKXu.js","./command.vue_vue_type_script_setup_true_lang-BupUAzs5.js","./index.vue_vue_type_script_setup_true_lang-BlKfdQqy.js","./vue-data-ui-D1HaM8UR.css","./ColorPicker-J5wOPCeB-D7M-gujm.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./UserOptions-1OZ3jcm6-ChPN5pX4.js","./img-BecE5qXd-BcsKpilD.js","./dom-to-png--BNgrTZV-Dq14aDuv.js"])))=>i.map(i=>d[i]);
import{g as v,M as h,Z as He,ar as Ve,a1 as ce,af as Ne,c as u,o as r,N as x,O as n,l as A,a as o,cA as D,co as Ue,m as $,r as f,D as F,E as R,U as j,n as ge,k as We,R as G,S as q,p as E,bm as De,cC as Q}from"./index-Bnionyve.js";import{t as je,o as de}from"./useNestedProp-dJX_8vvZ-Dub3p3M4.js";import{s as Ge,Q as qe,A as Qe,o as Ye,j as Je,a as Xe,I as M,f as T,y as Ze,g as me,p as fe,b as Ke}from"./vue-data-ui-DO-nR8BN.js";import{E as et,M as tt}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{m as at}from"./usePrinter-DTzqpYKF-B2bIVIDD.js";import{a as lt}from"./useUserOptionState-BIvW1Kz7-KDDO9AXL.js";import{o as st}from"./useChartAccessibility-9icAAmYg-DZae9bBn.js";import{J as rt}from"./themes-AUNCOb2G-RAhReTPj.js";import ot from"./Legend-G6GMcdAc-4DYhSLWk.js";import ut from"./Title-BWp-37K_-Dj90ij3U.js";import nt from"./img-BecE5qXd-BcsKpilD.js";import{S as it,T as vt}from"./BaseScanner-BgWxam9d-Cak_1oua.js";import{O as ht}from"./useSvgExport-DrjCWun4-cEuqHQFy.js";import"./alert-Vqv_sKXu.js";import"./command.vue_vue_type_script_setup_true_lang-BupUAzs5.js";import"./index.vue_vue_type_script_setup_true_lang-BlKfdQqy.js";import"./Shape-CNXKB8O0-CSD830I9.js";import"./dom-to-png--BNgrTZV-Dq14aDuv.js";const ct=["id"],gt={key:1,ref:"noTitle",class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},dt=["id"],mt=["xmlns","viewBox"],ft=["width","height"],yt={key:1},pt=["x","y","height","width","fill","stroke"],bt=["x","y","height","width","rx","fill","stroke","stroke-width"],kt=["x","y","height","width","fill","stroke","stroke-width"],wt=["x","y","font-size","font-weight","fill"],xt=["x","y","height","width","rx","fill","stroke","stroke-width"],At={key:3},$t=["x","y","fill","font-size","font-weight"],Ot={key:4},_t=["x1","x2","y1","y2","stroke"],Ct={key:4,class:"vue-data-ui-watermark"},Lt=["id"],Bt={key:0,class:"vue-ui-bullet-legend-item",dir:"auto"},It={style:{"margin-right":"2px"}},St={__name:"vue-ui-bullet",props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{}}}},setup(ye,{expose:pe}){const be=D(()=>Q(()=>import("./PackageVersion-TgflyMpU-BuemEpsd.js"),__vite__mapDeps([0,1,2]),import.meta.url)),ke=D(()=>Q(()=>import("./PenAndPaper-DSvu9dwa-CWkxTD_Q.js"),__vite__mapDeps([3,1,2,4,5,6,7,8,9,10]),import.meta.url)),we=D(()=>Q(()=>import("./UserOptions-1OZ3jcm6-ChPN5pX4.js"),__vite__mapDeps([11,1,2,10,4,5,6,7,8,12,13]),import.meta.url)),{vue_ui_bullet:xe}=je(),L=ye,y=v(null),Y=v(null),J=v(0),X=v(null),Z=v(null),Ae=v(0),O=v(null),B=v(null),K=v(!1),b=h({get:()=>i.value.hasOwnProperty("value"),set:t=>t}),_=h(()=>i.value.segments?Array.isArray(i.value.segments)?i.value.segments.length?!0:(console.warn("VueUiBullet: dataset segments is empty. Provide segments with this datastructure:\n\nsegments: [\n    {\n        name: string;\n        from: number;\n        to: number;\n        color?: string;\n    },\n    {...}\n]\n        "),b.value=!1,!1):(console.warn("VueUiBullet: dataset segments must be an array of objects with this datastructure:\n\nsegments: [\n    {\n        name: string;\n        from: number;\n        to: number;\n        color?: string;\n    },\n    {...}\n] \n        "),b.value=!1,!1):(console.warn("VueUiBullet: dataset segments is empty. Provide segments with this datastructure:\n\nsegments: [\n    {\n        name: string;\n        from: number;\n        to: number;\n        color?: string;\n    },\n    {...}\n]\n        "),b.value=!1,!1)),ee=h(()=>!!e.value.debug);function te(){if(me(i.value)?(fe({componentName:"VueUiBullet",type:"dataset",debug:ee.value}),I.value=!0):_.value?i.value.segments.forEach((t,s)=>{Ke({datasetObject:t,requiredAttributes:["name","from","to"]}).forEach(a=>{b.value=!1,fe({componentName:"VueUiBullet segment",type:"datasetSerieAttribute",property:a,index:s,debug:ee.value})})}):(b.value=!1,I.value=!0),me(i.value)||(I.value=e.value.loading),e.value.responsive){const t=et(()=>{const{width:s,height:a}=tt({chart:y.value,title:e.value.style.chart.title.text?Y.value:null,legend:e.value.style.chart.legend.show?X.value:null,source:Z.value});requestAnimationFrame(()=>{S.value.width=s,S.value.height=a-12})});O.value&&(B.value&&O.value.unobserve(B.value),O.value.disconnect()),O.value=new ResizeObserver(t),B.value=y.value.parentNode,O.value.observe(B.value)}e.value.style.chart.animation.show&&!k.value&&re(i.value.value||0)}He(()=>{K.value=!0,te()});const p=v(qe());function z(){const t=de({userConfig:L.config,defaultConfig:xe});return t.theme?{...de({userConfig:rt.vue_ui_bullet[t.theme]||L.config,defaultConfig:t})}:t}const e=v(z()),{loading:k,FINAL_DATASET:i,manualLoading:I}=it({...Ve(L),FINAL_CONFIG:e,prepareConfig:z,skeletonDataset:{value:100,target:100,segments:[{name:"",from:0,to:33,color:"#AAAAAA"},{name:"",from:33,to:66,color:"#BABABA"},{name:"",from:66,to:100,color:"#CACACA"}]},skeletonConfig:Qe({defaultConfig:e.value,userConfig:{userOptions:{show:!1},style:{chart:{backgroundColor:"#99999930",segments:{dataLabels:{show:!1},ticks:{stroke:"#8A8A8A"}},valueBar:{label:{show:!1}}}}}})}),{userOptionsVisible:H,setUserOptionsVisibility:ae,keepUserOptionState:le}=lt({config:e.value}),{svgRef:V}=st({config:e.value.style.chart.title});ce(()=>L.config,t=>{k.value||(e.value=z()),H.value=!e.value.userOptions.showOnChartHover,te(),J.value+=1},{deep:!0});const S=v({width:e.value.style.chart.width,height:e.value.style.chart.height}),$e=h(()=>S.value.width),Oe=h(()=>S.value.height),l=h(()=>{const t=Oe.value,s=$e.value,a=e.value.style.chart.padding.left,c=s-e.value.style.chart.padding.right,w=e.value.style.chart.padding.top,g=t-e.value.style.chart.padding.bottom;return{height:Math.max(.001,t),width:Math.max(.001,s),left:a,right:c,top:w,bottom:g,chartWidth:Math.max(.001,c-a),chartHeight:Math.max(.001,g-w)}}),_e=h(()=>{if(!_.value)return[];const t=[];for(let s=0;s<i.value.segments.length;s+=1)t.push(Ye(e.value.style.chart.segments.baseColor,s/i.value.segments.length));return t}),N=h(()=>_.value?{min:Math.min(...i.value.segments.map(t=>t.from)),max:Math.max(...i.value.segments.map(t=>t.to))}:{min:0,max:1}),d=v(Ce());ce(()=>i.value,t=>{t.hasOwnProperty("value")&&(I.value=!1),e.value.style.chart.animation.show&&!k.value?re(t.value||0):d.value=t.value||0},{deep:!0});function Ce(){return e.value.style.chart.animation.show&&!k.value?N.value.min:i.value.value||0}const se=v(null);function re(t){const s=Math.abs(t-d.value)/e.value.style.chart.animation.animationFrames;function a(){d.value<t?d.value=Math.min(d.value+s,t):d.value>t&&(d.value=Math.max(d.value-s,t)),d.value!==t&&(se.value=requestAnimationFrame(a))}a()}Ne(()=>{cancelAnimationFrame(se.value)});const m=h(()=>{if(!_.value)return[];const t=Je(N.value.min,N.value.max,e.value.style.chart.segments.ticks.divisions),s=t.min>=0?0:Math.abs(t.min),a={x:l.value.left+(i.value.target+s)/(t.max+s)*l.value.chartWidth-e.value.style.chart.target.width/2},c={width:(d.value+s)/(t.max+s)*l.value.chartWidth},w=t.ticks.map(g=>({value:g,y:l.value.bottom+e.value.style.chart.segments.dataLabels.fontSize+3+e.value.style.chart.segments.dataLabels.offsetY,x:l.value.left+(g+s)/(t.max+s)*l.value.chartWidth}));return{scale:t,target:a,value:c,ticks:w,chunks:i.value.segments.map((g,ze)=>({...g,color:g.color?Xe(g.color):_e.value[ze],x:l.value.left+l.value.chartWidth*((g.from+s)/(t.max+s)),y:l.value.top,height:l.value.chartHeight,width:l.value.chartWidth*(Math.abs(g.to-g.from)/(t.max+s))}))}}),U=h(()=>!m.value||!m.value.chunks||!m.value.chunks.length?[]:m.value.chunks.map(t=>{const s=M(e.value.style.chart.segments.dataLabels.formatter,t.from,T({p:e.value.style.chart.segments.dataLabels.prefix,v:t.from,s:e.value.style.chart.segments.dataLabels.suffix,r:e.value.style.chart.segments.dataLabels.rounding})),a=M(e.value.style.chart.segments.dataLabels.formatter,t.to,T({p:e.value.style.chart.segments.dataLabels.prefix,v:t.to,s:e.value.style.chart.segments.dataLabels.suffix,r:e.value.style.chart.segments.dataLabels.rounding})),c="".concat(s," — ").concat(a);return{...t,shape:"square",value:c,display:"".concat(t.name,": ").concat(c)}})),Le=h(()=>({cy:"bullet-div-legend",backgroundColor:"transparent",color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:6,fontWeight:e.value.style.chart.legend.bold?"bold":""})),{isPrinting:oe,isImaging:ue,generatePdf:ne,generateImage:ie}=at({elementId:"bullet_".concat(p.value),fileName:e.value.style.chart.title.text||"vue-ui-bullet",options:e.value.userOptions.print}),Be=h(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),C=v(!1);function ve(t){C.value=t,Ae.value+=1}function Ie(){return m.value}const P=v(!1);function W(){P.value=!P.value}async function Se({scale:t=2}={}){if(!y.value)return;const{width:s,height:a}=y.value.getBoundingClientRect(),c=s/a,{imageUri:w,base64:g}=await nt({domElement:y.value,base64:!0,img:!0,scale:t});return{imageUri:w,base64:g,title:e.value.style.chart.title.text,width:s,height:a,aspectRatio:c}}const Pe=h(()=>U.value.map(t=>({...t,name:t.display}))),Fe=h(()=>e.value.style.chart.backgroundColor),Re=h(()=>e.value.style.chart.legend),Ee=h(()=>e.value.style.chart.title),{exportSvg:Me,getSvg:Te}=ht({svg:V,title:Ee,legend:Re,legendItems:Pe,backgroundColor:Fe});function he({isCb:t}){t?e.value.userOptions.callbacks.svg(Te()):Me()}return pe({getData:Ie,getImage:Se,generatePdf:ne,generateImage:ie,generateSvg:he,toggleAnnotator:W,toggleFullscreen:ve}),(t,s)=>(r(),u("div",{ref_key:"bulletChart",ref:y,class:ge("vue-data-ui-component vue-ui-bullet ".concat(C.value?"vue-data-ui-wrapper-fullscreen":"")),style:j("font-family:".concat(e.value.style.fontFamily,";width:100%;background:").concat(e.value.style.chart.backgroundColor)),id:"bullet_".concat(p.value),onMouseenter:s[0]||(s[0]=()=>o(ae)(!0)),onMouseleave:s[1]||(s[1]=()=>o(ae)(!1))},[e.value.userOptions.buttons.annotator?(r(),x(o(ke),{key:0,svgRef:o(V),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:P.value,onClose:W},null,8,["svgRef","backgroundColor","color","active"])):n("",!0),Be.value?(r(),u("div",gt,null,512)):n("",!0),e.value.style.chart.title.text?(r(),u("div",{key:2,ref_key:"chartTitle",ref:Y,style:"width:100%;background:transparent;"},[(r(),x(ut,{lineHeight:"1.3rem",key:"title_".concat(J.value),config:{title:{cy:"bullet-div-title",...e.value.style.chart.title},subtitle:{cy:"bullet-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):n("",!0),A("div",{id:"legend-top-".concat(p.value)},null,8,dt),e.value.userOptions.show&&b.value&&(o(le)||o(H))?(r(),x(o(we),{key:3,ref:"details",backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:o(oe),isImaging:o(ue),uid:p.value,hasTooltip:!1,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasXls:!1,hasTable:!1,hasLabel:!1,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:C.value,chartElement:y.value,position:e.value.userOptions.position,titles:{...e.value.userOptions.buttonTitles},hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:P.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,onToggleFullscreen:ve,onGeneratePdf:o(ne),onGenerateImage:o(ie),onGenerateSvg:he,onToggleAnnotator:W,style:j({visibility:o(le)?o(H)?"visible":"hidden":"visible"})},Ue({_:2},[t.$slots.menuIcon?{name:"menuIcon",fn:$(({isOpen:a,color:c})=>[f(t.$slots,"menuIcon",F(R({isOpen:a,color:c})),void 0,!0)]),key:"0"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:$(()=>[f(t.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:$(()=>[f(t.$slots,"optionImg",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:$(({toggleFullscreen:a,isFullscreen:c})=>[f(t.$slots,"optionFullscreen",F(R({toggleFullscreen:a,isFullscreen:c})),void 0,!0)]),key:"3"}:void 0,t.$slots.optionAnnotator?{name:"optionAnnotator",fn:$(({toggleAnnotator:a,isAnnotator:c})=>[f(t.$slots,"optionAnnotator",F(R({toggleAnnotator:a,isAnnotator:c})),void 0,!0)]),key:"4"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasImg","hasSvg","hasFullscreen","isFullscreen","chartElement","position","titles","hasAnnotator","isAnnotation","callbacks","printScale","onGeneratePdf","onGenerateImage","style"])):n("",!0),(r(),u("svg",{ref_key:"svgRef",ref:V,xmlns:o(Ze),class:ge({"vue-data-ui-fullscreen--on":C.value,"vue-data-ui-fulscreen--off":!C.value,"vue-ui-bullet-svg":!0}),viewBox:"0 0 ".concat(l.value.width," ").concat(l.value.height),style:j("width: 100%; overflow: visible; background:transparent;color:".concat(e.value.style.chart.color))},[We(o(be)),t.$slots["chart-background"]?(r(),u("foreignObject",{key:0,x:0,y:0,width:l.value.width,height:l.value.height,style:{pointerEvents:"none"}},[f(t.$slots,"chart-background",{},void 0,!0)],8,ft)):n("",!0),_.value?(r(),u("g",yt,[(r(!0),u(G,null,q(m.value.chunks,a=>(r(),u("rect",{x:a.x,y:a.y,height:a.height,width:a.width,fill:a.color,"stroke-width":1,stroke:e.value.style.chart.backgroundColor,style:{transition:"x 0.3s ease-in-out, width 0.3s ease-in-out"}},null,8,pt))),256)),!e.value.style.chart.target.onTop&&e.value.style.chart.target.show?(r(),u("rect",{key:0,x:m.value.target.x,y:l.value.top+(l.value.chartHeight-l.value.chartHeight*e.value.style.chart.target.heightRatio)/2,height:l.value.chartHeight*e.value.style.chart.target.heightRatio,width:e.value.style.chart.target.width,rx:e.value.style.chart.target.rounded?e.value.style.chart.target.width/2:0,fill:e.value.style.chart.target.color,stroke:e.value.style.chart.target.stroke,"stroke-width":e.value.style.chart.target.strokeWidth},null,8,bt)):n("",!0),A("rect",{x:l.value.left,y:l.value.top+(l.value.chartHeight-l.value.chartHeight*e.value.style.chart.valueBar.heightRatio)/2,height:l.value.chartHeight*e.value.style.chart.valueBar.heightRatio,width:m.value.value.width,fill:e.value.style.chart.valueBar.color,stroke:e.value.style.chart.valueBar.stroke,"stroke-width":e.value.style.chart.valueBar.strokeWidth},null,8,kt),e.value.style.chart.valueBar.label.show?(r(),u("text",{key:1,x:l.value.left+m.value.value.width,y:l.value.top-6+e.value.style.chart.valueBar.label.offsetY,"font-size":e.value.style.chart.valueBar.label.fontSize,"font-weight":e.value.style.chart.valueBar.label.bold?"bold":"normal",fill:e.value.style.chart.valueBar.label.color,"text-anchor":"middle"},E(o(M)(e.value.style.chart.segments.dataLabels.formatter,d.value,o(T)({p:e.value.style.chart.segments.dataLabels.prefix,v:d.value,s:e.value.style.chart.segments.dataLabels.suffix,r:e.value.style.chart.segments.dataLabels.rounding}))),9,wt)):n("",!0),e.value.style.chart.target.onTop&&e.value.style.chart.target.show?(r(),u("rect",{key:2,x:m.value.target.x,y:l.value.top+(l.value.chartHeight-l.value.chartHeight*e.value.style.chart.target.heightRatio)/2,height:l.value.chartHeight*e.value.style.chart.target.heightRatio,width:e.value.style.chart.target.width,rx:e.value.style.chart.target.rounded?e.value.style.chart.target.width/2:0,fill:e.value.style.chart.target.color,stroke:e.value.style.chart.target.stroke,"stroke-width":e.value.style.chart.target.strokeWidth,style:{transition:"x 0.3s ease-in-out"}},null,8,xt)):n("",!0),e.value.style.chart.segments.dataLabels.show?(r(),u("g",At,[(r(!0),u(G,null,q(m.value.ticks,a=>(r(),u("text",{x:a.x,y:a.y,"text-anchor":"middle",fill:e.value.style.chart.segments.dataLabels.color,"font-size":e.value.style.chart.segments.dataLabels.fontSize+"px","font-weight":e.value.style.chart.segments.dataLabels.bold?"bold":"normal"},E(o(M)(e.value.style.chart.segments.dataLabels.formatter,a.value,o(T)({p:e.value.style.chart.segments.dataLabels.prefix,v:a.value,s:e.value.style.chart.segments.dataLabels.suffix,r:e.value.style.chart.segments.dataLabels.rounding}))),9,$t))),256))])):n("",!0),e.value.style.chart.segments.dataLabels.show&&e.value.style.chart.segments.ticks.show?(r(),u("g",Ot,[(r(!0),u(G,null,q(m.value.ticks,a=>(r(),u("line",{x1:a.x,x2:a.x,y1:l.value.bottom,y2:l.value.bottom+3,stroke:e.value.style.chart.segments.ticks.stroke,"stroke-width":1,"stroke-linecap":"round"},null,8,_t))),256))])):n("",!0)])):n("",!0),f(t.$slots,"svg",{svg:l.value},void 0,!0)],14,mt)),t.$slots.watermark?(r(),u("div",Ct,[f(t.$slots,"watermark",F(R({isPrinting:o(oe)||o(ue)})),void 0,!0)])):n("",!0),A("div",{id:"legend-bottom-".concat(p.value)},null,8,Lt),K.value?(r(),x(De,{key:5,to:e.value.style.chart.legend.position==="top"?"#legend-top-".concat(p.value):"#legend-bottom-".concat(p.value)},[A("div",{ref_key:"chartLegend",ref:X},[e.value.style.chart.legend.show?(r(),x(ot,{key:0,clickable:!1,legendSet:U.value,config:Le.value},{item:$(({legend:a})=>[o(k)?n("",!0):(r(),u("div",Bt,[A("span",It,E(a.name)+":",1),A("span",null,E(a.value),1)]))]),_:1},8,["legendSet","config"])):n("",!0),f(t.$slots,"legend",{legend:U.value},void 0,!0)],512)],8,["to"])):n("",!0),t.$slots.source?(r(),u("div",{key:6,ref_key:"source",ref:Z,dir:"auto"},[f(t.$slots,"source",{},void 0,!0)],512)):n("",!0),o(k)?(r(),x(vt,{key:7})):n("",!0)],46,ct))}},Jt=Ge(St,[["__scopeId","data-v-fd9177ca"]]);export{Jt as default};
