
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as me,K as pe,g as c,Z as ge,a7 as T,af as ve,bW as S,b6 as N,a4 as s,ck as _e,c as be,o as C,k as a,aa as Ce,m as n,w as Ee,a as l,aP as he,G as u,P as ye,p as ke,N as k,O as $,n as U,a9 as De,b9 as G,V as we,W as K}from"./index-Bnionyve.js";import{_ as ze}from"./index.vue_vue_type_script_setup_true_lang-DwNki4sp.js";import{a as L,D as R}from"./index-IJIDpkub.js";import{u as xe}from"./index-CAH_iDR3.js";import{u as Se}from"./usePagination-BqwTFOKk.js";import"./index.vue_vue_type_script_setup_true_lang-jWXiGcK5.js";import"./index-zga0vFZI.js";const H=me({name:"PagesExampleDeliveryList",__name:"list",setup($e){const P=pe(),{pagination:m,getParams:W,onSizeChange:j,onCurrentChange:A,onSortChange:Z}=Se(),D=c(!1),p=c("router"),E=c({id:""}),F={title:""},g=c({...F});function q(){Object.assign(g.value,F)}const f=c({enable:!0,selectionDataList:[]}),w=c(!1),z=c([]);ge(()=>{d(),p.value==="router"&&T.on("get-data-list",()=>{d()})}),ve(()=>{p.value==="router"&&T.off("get-data-list")});function d(){w.value=!0;const t={...W(),...g.value.title&&{title:g.value.title}};L.list(t).then(e=>{w.value=!1,z.value=e.data.list,z.value.forEach(i=>{i.statusLoading=!1}),m.value.total=e.data.total})}function J(t){j(t).then(()=>d())}function v(t=1){A(t).then(()=>d())}function Q({prop:t,order:e}){Z(t,e).then(()=>d())}const h=c(),{open:V,update:B}=S().create({destroyOnClose:!0,closeOnClickOverlay:!1,closeOnPressEscape:!1,beforeClose:(t,e)=>{var i;t==="confirm"?(i=h.value)==null||i.submit().then(()=>{d(),e()}):e()},content:()=>N(R,{ref:h,id:E.value.id})}),{open:O,update:M}=xe().create({destroyOnClose:!0,closeOnClickOverlay:!1,closeOnPressEscape:!1,beforeClose:(t,e)=>{var i;t==="confirm"?(i=h.value)==null||i.submit().then(()=>{d(),e()}):e()},content:()=>N(R,{ref:h,id:E.value.id})});function X(){p.value==="router"?P.push({name:"pagesExampleShopDeliveryCreate"}):(E.value.id="",p.value==="modal"?(B({title:"新增"}),V()):(M({title:"新增"}),O()))}function Y(t){p.value==="router"?P.push({name:"pagesExampleShopDeliveryEdit",params:{id:t.id}}):(E.value.id=t.id,p.value==="modal"?(B({title:"编辑"}),V()):(M({title:"编辑"}),O()))}function ee(t){S().confirm({title:"确认信息",content:"确认删除「".concat(t.title,"」吗？"),onConfirm:()=>{L.delete(t.id).then(()=>{d(),G.success("模拟删除成功")})}})}function te(t){return new Promise(e=>{S().confirm({title:"确认信息",content:"确认".concat(t.status?"停用":"启用","「").concat(t.title,"」运费模版吗？"),onConfirm:()=>{t.statusLoading=!0,L.changeStatus({id:t.id,status:!t.status}).then(()=>(t.statusLoading=!1,G.success("模拟".concat(t.status?"停用":"启用","成功")),e(!0))).catch(()=>(t.statusLoading=!1,e(!1)))}})})}return(t,e)=>{const i=Ce,ae=s("ElInput"),I=s("ElFormItem"),r=s("ElButton"),x=ye,ne=s("ElForm"),le=ze,oe=s("ElDivider"),se=s("ElButtonGroup"),ie=s("ElSpace"),y=s("ElTableColumn"),re=s("ElSwitch"),ue=s("ElTable"),de=s("ElPagination"),ce=De,fe=_e("loading");return C(),be("div",{class:U({"absolute-container":l(D)})},[a(i,{title:"运费模版管理",class:"mb-0"}),a(ce,{class:U({"flex-1 overflow-auto":l(D)}),"main-class":{"flex-1 flex flex-col overflow-auto":l(D)}},{default:n(()=>[a(le,{"show-toggle":!1},{default:n(({fold:o,toggle:_})=>[a(ne,{model:l(g),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:n(()=>[a(I,{label:"模版名称"},{default:n(()=>[a(ae,{modelValue:l(g).title,"onUpdate:modelValue":e[0]||(e[0]=b=>l(g).title=b),placeholder:"请输入模版名称，支持模糊查询",clearable:"",onKeydown:e[1]||(e[1]=he(b=>v(),["enter"])),onClear:e[2]||(e[2]=b=>v())},null,8,["modelValue"])]),_:1}),a(I,null,{default:n(()=>[a(r,{onClick:e[3]||(e[3]=b=>{q(),v()})},{default:n(()=>[...e[6]||(e[6]=[u(" 重置 ",-1)])]),_:1}),a(r,{type:"primary",onClick:e[4]||(e[4]=b=>v())},{icon:n(()=>[a(x,{name:"i-ep:search"})]),default:n(()=>[e[7]||(e[7]=u(" 筛选 ",-1))]),_:1}),a(r,{disabled:"",link:"",onClick:_},{icon:n(()=>[a(x,{name:o?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:n(()=>[u(" "+ke(o?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),a(oe,{"border-style":"dashed"}),a(ie,{wrap:""},{default:n(()=>[a(r,{type:"primary",size:"default",onClick:X},{icon:n(()=>[a(x,{name:"i-ep:plus"})]),default:n(()=>[e[8]||(e[8]=u(" 新增运费模版 ",-1))]),_:1}),l(f).enable?(C(),k(r,{key:0,size:"default",disabled:!l(f).selectionDataList.length},{default:n(()=>[...e[9]||(e[9]=[u(" 单个批量操作按钮 ",-1)])]),_:1},8,["disabled"])):$("",!0),l(f).enable?(C(),k(se,{key:1},{default:n(()=>[a(r,{size:"default",disabled:!l(f).selectionDataList.length},{default:n(()=>[...e[10]||(e[10]=[u(" 批量操作按钮组1 ",-1)])]),_:1},8,["disabled"]),a(r,{size:"default",disabled:!l(f).selectionDataList.length},{default:n(()=>[...e[11]||(e[11]=[u(" 批量操作按钮组2 ",-1)])]),_:1},8,["disabled"])]),_:1})):$("",!0)]),_:1}),Ee((C(),k(ue,{class:"my-4",data:l(z),stripe:"","highlight-current-row":"",border:"",onSortChange:Q,onSelectionChange:e[5]||(e[5]=o=>l(f).selectionDataList=o)},{default:n(()=>[l(f).enable?(C(),k(y,{key:0,type:"selection",width:"40"})):$("",!0),a(y,{prop:"title",label:"模版名称"}),a(y,{label:"开启状态",width:"100",align:"center"},{default:n(o=>[a(re,{modelValue:o.row.status,"onUpdate:modelValue":_=>o.row.status=_,loading:o.row.statusLoading,"inline-prompt":"","active-text":"启用","inactive-text":"禁用","before-change":()=>te(o.row)},null,8,["modelValue","onUpdate:modelValue","loading","before-change"])]),_:1}),a(y,{label:"操作",width:"200",align:"center"},{default:n(o=>[a(r,{type:"primary",size:"small",plain:"",onClick:_=>Y(o.row)},{default:n(()=>[...e[12]||(e[12]=[u(" 编辑 ",-1)])]),_:1},8,["onClick"]),a(r,{type:"danger",size:"small",plain:"",onClick:_=>ee(o.row)},{default:n(()=>[...e[13]||(e[13]=[u(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[fe,l(w)]]),a(de,{"current-page":l(m).page,total:l(m).total,"page-size":l(m).size,"page-sizes":l(m).sizes,layout:l(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:J,onCurrentChange:v},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["class","main-class"])],2)}}});typeof K=="function"&&K(H);const Ie=we(H,[["__scopeId","data-v-670017c8"]]);export{Ie as default};
