
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{_ as U}from"./index.vue_vue_type_script_setup_true_lang-Dq4MN271.js";import{d as W,n as j,a7 as q,r as c,aw as A,c as v,o as f,g as a,f as J,am as K,l as p,b as O,w as n,e as o,W as Q,_ as R,C as _,b5 as X,L as Y,k as b}from"./index-H6QnEWHf.js";import{a as h}from"./table-Bw6yXVea.js";import Z from"./index-mrX8ro-m.js";import ee from"./index-_ZFQ793d.js";import{u as ae}from"./usePagination-Ci1eRh1x.js";import"./sortable.esm-DqU0xpXh.js";const ie={class:"absolute size-full flex flex-col"},oe={class:"flex-1 overflow-auto"},ne={key:1,class:"flex-center flex-1 text-3xl text-primary/50"},le=W({name:"PagesExampleTable",__name:"index",setup(te){const{pagination:t,getParams:C,onSizeChange:x,onCurrentChange:k,onSortChange:w}=ae();t.value.size=20,t.value.sizes=[20,50,100];const e=j({loading:!1,search:{name:""},dataList:[],selectionDataList:[],form:{visible:!1,id:""},dialog:{visible:!1,id:"",info:{}}});q(()=>{r()});function r(){e.value.loading=!0;const i={...C(),...e.value.search.name&&{name:e.value.search.name}};h.list(i).then(l=>{e.value.loading=!1,e.value.dataList=l.data.list,t.value.total=l.data.total})}function y(i){x(i).then(()=>r())}function z(i=1){k(i).then(()=>r())}function E({prop:i,order:l}){w(i,l).then(()=>r())}function T(){e.value.form.visible=!1,_(()=>{e.value.form.visible=!0,e.value.form.id=""})}function P(i){e.value.form.visible=!1,_(()=>{e.value.form.visible=!0,e.value.form.id=i.id})}function S(i){X.confirm("确认删除「".concat(i.name,"」表格吗？"),"确认信息").then(()=>{h.delete(i.id).then(()=>{r(),Y.success("模拟删除成功")})}).catch(()=>{})}function B(i){e.value.dialog.visible=!0,e.value.dialog.id=i.id,e.value.dialog.info={}}function L(i){e.value.dialog.visible=!0,e.value.dialog.id="",e.value.dialog.info=i}function D(){e.value.form.visible=!1,r()}function $(){e.value.form.visible=!1}return(i,l)=>{const F=K,d=R,u=c("ElButton"),V=c("ElSpace"),m=c("ElTableColumn"),M=c("ElButtonGroup"),N=c("ElTable"),G=c("ElPagination"),H=U,I=A("loading");return f(),v("div",ie,[a(F,{title:"表格管理",description:"页面数据为 Mock 示例数据，非真实数据。",class:"mb-0"}),J("div",oe,[a(H,{"left-side-width":"520px","hide-left-side-toggle":"",class:"static","left-side-class":"h-full flex flex-col gap-4","default-class":"flex flex-col flex-1 gap-4"},{leftSide:n(()=>[a(V,{wrap:""},{default:n(()=>[a(u,{type:"primary",size:"default",onClick:T},{icon:n(()=>[a(d,{name:"i-ep:plus"})]),_:1}),a(u,{type:"danger",size:"default",disabled:!o(e).selectionDataList.length},{icon:n(()=>[a(d,{name:"i-ep:delete"})]),_:1},8,["disabled"])]),_:1}),Q((f(),p(N,{data:o(e).dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:E,onSelectionChange:l[0]||(l[0]=s=>o(e).selectionDataList=s)},{default:n(()=>[a(m,{type:"selection",align:"center",fixed:""}),a(m,{prop:"name",label:"名称","min-width":"150px"}),a(m,{prop:"code",label:"标识",width:"150",align:"center"}),a(m,{label:"操作",width:"140",align:"center",fixed:"right"},{default:n(s=>[a(M,null,{default:n(()=>[a(u,{type:"primary",size:"small",plain:"",onClick:g=>P(s.row)},{icon:n(()=>[a(d,{name:"i-ep:edit"})]),_:1},8,["onClick"]),a(u,{type:"info",size:"small",plain:"",onClick:g=>B(s.row)},{icon:n(()=>[a(d,{name:"i-ep:view"})]),_:1},8,["onClick"]),a(u,{type:"danger",size:"small",plain:"",onClick:g=>S(s.row)},{icon:n(()=>[a(d,{name:"i-ep:delete"})]),_:1},8,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[I,o(e).loading]]),a(G,{"current-page":o(t).page,total:o(t).total,"page-size":o(t).size,"page-sizes":o(t).sizes,layout:o(t).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:z,onSizeChange:y},null,8,["current-page","total","page-size","page-sizes","layout"])]),default:n(()=>[o(e).form.visible?(f(),p(Z,{key:0,id:o(e).form.id,onSuccess:D,onCancel:$,onPreview:L},null,8,["id"])):(f(),v("div",ne," 请在左侧新增或编辑一个表格 "))]),_:1}),o(e).dialog.visible?(f(),p(ee,{key:0,id:o(e).dialog.id,modelValue:o(e).dialog.visible,"onUpdate:modelValue":l[1]||(l[1]=s=>o(e).dialog.visible=s),info:o(e).dialog.info},null,8,["id","modelValue","info"])):O("",!0)])])}}});typeof b=="function"&&b(le);export{le as default};
