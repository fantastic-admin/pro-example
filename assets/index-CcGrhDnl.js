
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{_ as rt}from"./index.vue_vue_type_script_setup_true_lang-ChpqWgwo.js";import{_ as bt}from"./index.vue_vue_type_script_setup_true_lang-CWOxsaH-.js";import{_ as ft}from"./index.vue_vue_type_script_setup_true_lang-BnHOlB0K.js";import{d as ut,aJ as pt,u as ht,J as vt,a as gt,K as mt,bC as _t,b9 as kt,az as xt,x as $,s as B,n as O,a7 as H,N as A,C as X,L as Y,b7 as j,ae as wt,c as w,o as p,l as W,f as h,Y as Q,e as n,g as S,A as V,w as C,bc as St,F as It,q as Pt,b as F,W as Ct,i as Tt,_ as yt,t as M,at as z,X as Lt,h as Rt}from"./index-H6QnEWHf.js";import{S as $t}from"./sortable.esm-DqU0xpXh.js";import{u as Z}from"./index-DQKdgUNY.js";import Wt from"./moreAction-CNqP_QFP.js";import{u as Mt}from"./useTabbar-CHDZazX8.js";import{u as zt}from"./useMainPage-DUpdcC28.js";import"./useNonce-BgbsT9jy.js";import"./clamp-BstbYvQo.js";import"./useGraceArea-DMfrKGwH.js";import"./index-BRDkT_K9.js";import"./index-Bo-_Kxas.js";import"./index-GW34aOAv.js";import"./index-Cm0HenuK.js";const Nt={class:"tabbar"},Dt={class:"tabbar-container"},Bt=["data-index","onClick","onDblclick"],Ot={class:"size-full"},At={class:"tab-content"},Vt=["onClick"],Ft=["onClick"],Et={class:"text-sm"},Kt={class:"text-accent-foreground/50"},Ut={class:"flex-center flex-shrink-0 gap-2 whitespace-nowrap p-2"},at=ut({name:"Tabbar",__name:"index",setup(E){pt(t=>({v5431278d:n(it),v546490f1:n(st)}));const I=ht(),g=vt(),d=gt(),l=mt(),o=Mt(),K=zt(),U=_t({reactive:!0}),{t:v}=kt(),{generateI18nTitle:J}=xt(),r=$(()=>o.getId()),et=$(()=>l.list.length>1&&(o.checkCloseOtherSide()||o.checkCloseLeftSide()||o.checkCloseRightSide())),x=B("tabsRef"),N=B("tabContainerRef"),_=B("tabRef"),it=$(()=>{var a,s;const t=l.list.findIndex(i=>i.tabId===r.value);return"".concat(((s=(a=_.value)==null?void 0:a.find(i=>Number.parseInt(i.dataset.index)===t))==null?void 0:s.offsetLeft)||0,"px")}),st=$(()=>{var a,s;const t=l.list.findIndex(i=>i.tabId===r.value);return"".concat(((s=(a=_.value)==null?void 0:a.find(i=>Number.parseInt(i.dataset.index)===t))==null?void 0:s.offsetWidth)||0,"px")}),T=O(!1),y=O(!1);let L;H(()=>{var t;L=new $t((t=N.value)==null?void 0:t.$el,{animation:200,ghostClass:"opacity-0",draggable:".tab",handle:".drag-handle",onStart:()=>{y.value=!0},onEnd:()=>{y.value=!1},onMove:a=>a.dragged.classList.contains("pinned")?a.related.classList.contains("pinned"):!a.related.classList.contains("pinned"),onUpdate:a=>{a.newIndex!==void 0&&a.oldIndex!==void 0&&l.sort(a.newIndex,a.oldIndex)}})}),A([()=>d.mode,()=>d.settings.app.direction],t=>{X(()=>{L==null||L.option("disabled",t[0]==="mobile"||t[1]==="rtl")})},{immediate:!0}),A(()=>I,t=>{d.settings.tabbar.enable&&(l.add(t),X(()=>{var s,i,b,k;const a=l.list.findIndex(e=>e.tabId===r.value);if(a!==-1){const e=(s=_.value)==null?void 0:s.find(c=>Number.parseInt(c.dataset.index)===a),f=(b=(i=x.value)==null?void 0:i.ref)==null?void 0:b.$el;if(e&&f){const c=e.offsetLeft,u=e.offsetWidth,m=f.clientWidth,R=c-(m-u)/2;(k=x.value)==null||k.scrollTo(R)}nt()}}))},{immediate:!0,deep:!0});function nt(){var t,a,s,i;if(((t=N.value)==null?void 0:t.$el.clientWidth)>((i=(s=(a=x.value)==null?void 0:a.ref)==null?void 0:s.$el.clientWidth)!=null?i:0)&&!localStorage.has("tabbarScrollTip")){localStorage.setItem("tabbarScrollTip","");const b=Y.info("温馨提示",{description:"标签栏数量超过展示区域范围，可以将鼠标移到标签栏上，通过鼠标滚轮滑动浏览",position:"top-center",duration:1/0,action:{label:"知道了",onClick:()=>Y.dismiss(b)}})}}function lt(t){switch(d.settings.tabbar.dblclickAction){case"reload":K.reload();break;case"close":o.closeById(t.tabId);break;case"pin":t.isPin?l.unPin(t.tabId):l.pin(t.tabId);break;case"maximize":d.setMainPageMaximize();break;case"window":window.open(g.resolve(t.fullPath).href,"_blank");break}}function ot(t){return[[{label:v("reload"),icon:"i-ri:refresh-line",disabled:t.tabId!==r.value,handle:()=>K.reload()},{label:v("close"),icon:"i-ri:close-line",disabled:!o.checkClose(t.tabId),handle:()=>o.closeById(t.tabId)}],[{label:t.isPin?v("unpin"):v("pin"),icon:t.isPin?"i-lucide:pin-off":"i-lucide:pin",disabled:t.fullPath===d.settings.home.fullPath||t.isPermanent,handle:()=>t.isPin?l.unPin(t.tabId):l.pin(t.tabId)},{label:v("maximize"),icon:"i-ri:picture-in-picture-exit-line",handle:()=>{t.tabId!==r.value&&g.push(t.fullPath),d.setMainPageMaximize()}},{label:v("newWindow"),icon:"i-ci:window",handle:()=>{window.open(g.resolve(t.fullPath).href,"_blank")}}],[{label:v("closeOtherSide"),icon:"i-mdi:close",disabled:!o.checkCloseOtherSide(t.tabId),handle:()=>{o.closeOtherSide(t.tabId)}},{label:v("closeLeftSide"),icon:"i-mdi:arrow-expand-left",disabled:!o.checkCloseLeftSide(t.tabId),handle:()=>{o.closeLeftSide(t.tabId)}},{label:v("closeRightSide"),icon:"i-mdi:arrow-expand-right",disabled:!o.checkCloseRightSide(t.tabId),handle:()=>{o.closeRightSide(t.tabId)}}]]}function q(t,a,s){let i;return!t&&a||t&&!s?i=a:t&&s&&(i=s),i}const P=O([]);function dt(){var s,i,b,k,e,f,c,u;const t=(b=(i=(s=x.value)==null?void 0:s.ref)==null?void 0:i.$el.clientWidth)!=null?b:0,a=(u=(c=(f=(e=(k=x.value)==null?void 0:k.ref)==null?void 0:e.el)==null?void 0:f.viewportElement)==null?void 0:c.scrollLeft)!=null?u:0;if(P.value=[],_.value)for(let m=0;m<_.value.length;m++){const R=_.value[m],G=R.offsetLeft,ct=G+R.offsetWidth;G<a+t&&ct>a&&m>=0&&m<l.list.length&&P.value.push(m)}}function D(t){var a;return(a=P.value.findIndex(s=>s===t))!=null?a:-1}return A(()=>U.alt,t=>{t&&dt()}),H(()=>{j("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0",(t,a)=>{var s;if(d.settings.tabbar.enable&&d.settings.tabbar.enableHotkeys)switch(t.preventDefault(),a.key){case"alt+left":if(l.list[0].tabId!==r.value){const i=l.list.findIndex(b=>b.tabId===r.value);g.push(l.list[i-1].fullPath)}break;case"alt+right":if(((s=l.list.at(-1))==null?void 0:s.tabId)!==r.value){const i=l.list.findIndex(b=>b.tabId===r.value);g.push(l.list[i+1].fullPath)}break;case"alt+w":o.closeById(r.value);break;case"alt+1":case"alt+2":case"alt+3":case"alt+4":case"alt+5":case"alt+6":case"alt+7":case"alt+8":case"alt+9":{const i=Number(a.key.split("+")[1]);P.value[i-1]!==void 0&&g.push(l.list[P.value[i-1]].fullPath);break}case"alt+0":g.push(l.list[l.list.length-1].fullPath);break}})}),wt(()=>{j.unbind("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0")}),(t,a)=>{const s=yt,i=ft,b=bt,k=rt;return p(),w("div",Nt,[(p(),W(Q(n(Z)("tabbar-start")))),h("div",Dt,[S(k,{ref_key:"tabsRef",ref:x,scrollbar:!1,mask:"",horizontal:"","gradient-color":"var(--g-tabbar-bg)",class:V(["tabs",{"tabs-ontop":n(d).settings.topbar.switchTabbarAndToolbar,["tabs-".concat(n(d).settings.tabbar.style)]:n(d).settings.tabbar.style!==""}])},{default:C(()=>[S(St,{ref_key:"tabContainerRef",ref:N,name:n(y)?void 0:"tabbar",tag:"div",class:V(["tab-container",{dragging:n(y)}]),onBeforeLeave:a[2]||(a[2]=e=>T.value=!0),onAfterLeave:a[3]||(a[3]=e=>T.value=!1)},{default:C(()=>[(p(!0),w(It,null,Pt(n(l).list,(e,f)=>(p(),w("div",{key:e.tabMerge==="routeName"&&e.routeName?e.routeName:e.tabId,ref_for:!0,ref_key:"tabRef",ref:_,"data-index":f,class:V(["tab",{"tab-ontop":n(d).settings.topbar.switchTabbarAndToolbar,actived:e.tabId===n(r),pinned:e.isPermanent||e.isPin}]),onClick:c=>!n(T)&&n(g).push(e.fullPath),onDblclick:c=>!n(T)&&lt(e)},[S(b,{items:ot(e)},{default:C(()=>[h("div",Ot,[a[5]||(a[5]=h("div",{class:"tab-dividers"},null,-1)),a[6]||(a[6]=h("div",{class:"tab-background"},null,-1)),S(i,{delay:1e3,side:"bottom"},{content:C(()=>{var c;return[h("div",Et,M(((c=e.customTitleList.find(u=>u.fullPath===e.fullPath))==null?void 0:c.title)||n(J)(e.title)),1),h("div",Kt,M(e.fullPath),1)]}),default:C(()=>{var c;return[h("div",At,[(p(),w("div",{key:e.tabId,class:"title"},[n(d).settings.tabbar.enableIcon&&q(e.tabId===n(r),e.icon,e.activeIcon)?(p(),W(s,{key:0,name:q(e.tabId===n(r),e.icon,e.activeIcon),class:"icon"},null,8,["name"])):F("",!0),Tt(" "+M(((c=e.customTitleList.find(u=>u.fullPath===e.fullPath))==null?void 0:c.title)||n(J)(e.title)),1)])),!e.isPermanent&&e.isPin?(p(),w("div",{key:0,class:"action-icon",onClick:z(u=>n(l).unPin(e.tabId),["stop"]),onDblclick:a[0]||(a[0]=z(()=>{},["stop"]))},[S(s,{name:"i-ri:pushpin-2-fill"})],40,Vt)):!e.isPermanent&&n(l).list.length>1?(p(),w("div",{key:1,class:"action-icon",onClick:z(u=>n(o).closeById(e.tabId),["stop"]),onDblclick:a[1]||(a[1]=z(()=>{},["stop"]))},[S(s,{name:"i-ri:close-fill"})],40,Ft)):F("",!0),Ct(h("div",{class:"hotkey-number"},M(D(f)+1),513),[[Lt,n(U).alt&&D(f)>=0&&D(f)<9]]),a[4]||(a[4]=h("div",{class:"drag-handle"},null,-1))])]}),_:2},1024)])]),_:2},1032,["items"])],42,Bt))),128))]),_:1},8,["name","class"])]),_:1},8,["class"]),h("div",Ut,[n(et)?(p(),W(Wt,{key:0})):F("",!0)])]),(p(),W(Q(n(Z)("tabbar-end"))))])}}});function tt(E){const I=E;I.__i18n=I.__i18n||[],I.__i18n.push({locale:"",resource:{"zh-cn":{reload:{t:0,b:{t:2,i:[{t:3}],s:"重新加载"}},close:{t:0,b:{t:2,i:[{t:3}],s:"关闭标签页"}},pin:{t:0,b:{t:2,i:[{t:3}],s:"固定"}},unpin:{t:0,b:{t:2,i:[{t:3}],s:"取消固定"}},maximize:{t:0,b:{t:2,i:[{t:3}],s:"最大化"}},newWindow:{t:0,b:{t:2,i:[{t:3}],s:"新窗口中打开"}},closeOtherSide:{t:0,b:{t:2,i:[{t:3}],s:"关闭其它标签页"}},closeLeftSide:{t:0,b:{t:2,i:[{t:3}],s:"关闭左侧标签页"}},closeRightSide:{t:0,b:{t:2,i:[{t:3}],s:"关闭右侧标签页"}}},"zh-tw":{reload:{t:0,b:{t:2,i:[{t:3}],s:"重新加載"}},close:{t:0,b:{t:2,i:[{t:3}],s:"關閉標籤頁"}},pin:{t:0,b:{t:2,i:[{t:3}],s:"固定"}},unpin:{t:0,b:{t:2,i:[{t:3}],s:"取消固定"}},maximize:{t:0,b:{t:2,i:[{t:3}],s:"最大化"}},newWindow:{t:0,b:{t:2,i:[{t:3}],s:"新窗口中打開"}},closeOtherSide:{t:0,b:{t:2,i:[{t:3}],s:"關閉其它標籤頁"}},closeLeftSide:{t:0,b:{t:2,i:[{t:3}],s:"關閉左側標籤頁"}},closeRightSide:{t:0,b:{t:2,i:[{t:3}],s:"關閉右側標籤頁"}}},en:{reload:{t:0,b:{t:2,i:[{t:3}],s:"Reload"}},close:{t:0,b:{t:2,i:[{t:3}],s:"Close"}},pin:{t:0,b:{t:2,i:[{t:3}],s:"Pin"}},unpin:{t:0,b:{t:2,i:[{t:3}],s:"Unpin"}},maximize:{t:0,b:{t:2,i:[{t:3}],s:"Maximize"}},newWindow:{t:0,b:{t:2,i:[{t:3}],s:"Open In New Window"}},closeOtherSide:{t:0,b:{t:2,i:[{t:3}],s:"Close Otherside Tabs"}},closeLeftSide:{t:0,b:{t:2,i:[{t:3}],s:"Close Leftside Tabs"}},closeRightSide:{t:0,b:{t:2,i:[{t:3}],s:"Close Rightside Tabs"}}}}})}typeof tt=="function"&&tt(at);const oa=Rt(at,[["__scopeId","data-v-c9c67389"]]);export{oa as default};
